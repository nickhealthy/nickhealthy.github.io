{"componentChunkName":"component---src-templates-blog-post-js","path":"/Kubernetes/[따배쿠] kubectl 실습/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"1a7d7952-a13f-50d7-8ec8-6181a2b64c5f","excerpt":"kubectl 이란? 내가 원하는 걸 요청할 때 사용하는 명령어 기본구조는  : 자원(object)에 실행할 명령(createm getm delete, edit…) : 자원의 타입(node, pod, service…) : 자원의 이름(사용자 정의) : 부가적으로 설정할 옵션(—help, -o options…) kubectl : 약어 정보 및 리소스들을 확인해 볼 수 있다.  : 해당하는 노드에 대해 자세한 정보를 확인 주요 명령어 직접실행 - nginx pod 생성 및 동작 확인 nginx…","html":"<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>kubectl 이란?</p>\n<p>내가 원하는 걸 요청할 때 사용하는 명령어</p>\n<p>기본구조는 <code class=\"language-text\">kubectl [command] [TYPE] [NAME] [flags]</code></p>\n<p><code class=\"language-text\">command</code>: 자원(object)에 실행할 명령(createm getm delete, edit…)</p>\n<p><code class=\"language-text\">TYPE</code>: 자원의 타입(node, pod, service…)</p>\n<p><code class=\"language-text\">NAME</code>: 자원의 이름(사용자 정의)</p>\n<p><code class=\"language-text\">flags</code>: 부가적으로 설정할 옵션(—help, -o options…)</p>\n</div>\n</div>\n<h2 id=\"kubectl\" style=\"position:relative;\"><a href=\"#kubectl\" aria-label=\"kubectl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kubectl</h2>\n<ul>\n<li><code class=\"language-text\">kubectl api-resources</code>: 약어 정보 및 리소스들을 확인해 볼 수 있다.</li>\n<li><code class=\"language-text\">kubectl describe node master.example.com</code> : 해당하는 노드에 대해 자세한 정보를 확인</li>\n</ul>\n<h3 id=\"주요-명령어\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"주요 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 명령어</h3>\n<img width=\"786\" alt=\"캡처\" src=\"https://user-images.githubusercontent.com/66216102/108683288-c5126b80-7534-11eb-9e85-66555d8f3a97.PNG\">\n<h3 id=\"직접실행---nginx-pod-생성-및-동작-확인\" style=\"position:relative;\"><a href=\"#%EC%A7%81%EC%A0%91%EC%8B%A4%ED%96%89---nginx-pod-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%8F%99%EC%9E%91-%ED%99%95%EC%9D%B8\" aria-label=\"직접실행   nginx pod 생성 및 동작 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>직접실행 - nginx pod 생성 및 동작 확인</h3>\n<ol>\n<li>nginx 실행</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl run webserver --image<span class=\"token operator\">=</span>nginx:1.14 --port <span class=\"token number\">80</span></code></pre></div>\n<ol start=\"2\">\n<li>명령어를 입력하면 실행과정을 자세하게 확인할 수 있다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl describe pods</code></pre></div>\n<ol start=\"3\">\n<li>IP주소 실행 중인 node 위치 등등 자세하게 확인할 수 있다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods -o wide</code></pre></div>\n<ol start=\"4\">\n<li><code class=\"language-text\">curl</code> 명령어로 파드의 IP 주소를 입력하면 nginx 초기 화면을 확인할 수 있다.</li>\n<li>좀 더 멋진 화면으로 보기 위해 <code class=\"language-text\">elinks</code> 설치: <code class=\"language-text\">sudo apt-get install elinks</code></li>\n<li><code class=\"language-text\">elinks IP주소</code> : 웹 브라우저에서 보는 화면처럼 표시가 된다.</li>\n</ol>\n<h3 id=\"여러-개의-파드를-만들기\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC-%EA%B0%9C%EC%9D%98-%ED%8C%8C%EB%93%9C%EB%A5%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"여러 개의 파드를 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>여러 개의 파드를 만들기</h3>\n<ol>\n<li>위에서 만든 파드를 확인하기 위해 <code class=\"language-text\">kubectl get pods webserver</code>을 입력해본다.</li>\n<li><code class=\"language-text\">run</code> 명령어는 하나의 파드만 생성되기 때문에 여러개의 명령어를 사용하기 위해 <code class=\"language-text\">create</code> 명령어를 사용</li>\n<li>디플로이먼트 타입으로 httpd 이미지를 3개 실행하는 명령어</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create deployment mainui --image<span class=\"token operator\">=</span>httpd --replicas<span class=\"token operator\">=</span><span class=\"token number\">3</span></code></pre></div>\n<ol start=\"4\">\n<li><code class=\"language-text\">kubectl get deployments.apps</code> : 파드 확인</li>\n<li><code class=\"language-text\">kubectl describe deployments.apps mainui</code> : 자세하게 확인</li>\n</ol>\n<h3 id=\"다양한-format으로-확인하기\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-format%EC%9C%BC%EB%A1%9C-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"다양한 format으로 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다양한 format으로 확인하기</h3>\n<ul>\n<li><code class=\"language-text\">kubectl get pod webserver -o yaml</code> : yaml 형태로 확인</li>\n<li><code class=\"language-text\">kubectl get pod webserver -o json</code> : json 형태로 확인</li>\n</ul>\n<h3 id=\"컨테이너-내부로-들어가서-nginx-화면을-바꾸기\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%82%B4%EB%B6%80%EB%A1%9C-%EB%93%A4%EC%96%B4%EA%B0%80%EC%84%9C-nginx-%ED%99%94%EB%A9%B4%EC%9D%84-%EB%B0%94%EA%BE%B8%EA%B8%B0\" aria-label=\"컨테이너 내부로 들어가서 nginx 화면을 바꾸기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너 내부로 들어가서 nginx 화면을 바꾸기</h3>\n<ol>\n<li>해당 컨테이너의 이름(webserver) 입력 후, 도커와 마찮가지로 컨테이너 내부로 bash창 실행</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl <span class=\"token builtin class-name\">exec</span> webserver -it -- /bin/bash</code></pre></div>\n<ol start=\"2\">\n<li><code class=\"language-text\">echo &quot;Hello world&quot; &gt; index.html</code> : index.html 덮어쓰기</li>\n<li><code class=\"language-text\">exit</code> 명령어로 컨테이너를 빠져나온 뒤, <code class=\"language-text\">curl IP주소</code>로 바뀐 것을 확인</li>\n</ol>\n<h3 id=\"로그-확인하기\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"로그 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그 확인하기</h3>\n<ol>\n<li>해당 컨테이너의 로그 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl logs webserver</code></pre></div>\n<ol start=\"2\">\n<li>외부(엔드)유저들이 접근 가능하도록 포트포워딩 설정</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl port-forward webserver <span class=\"token number\">8080</span>:80</code></pre></div>\n<ol start=\"3\">\n<li>새로운 터미널 창을 복사한 후, <code class=\"language-text\">curl localhost:8080</code> 으로 접속하면 같은 “Hello world”가 출력되는 것을 확인할 수 있다.</li>\n</ol>\n<h3 id=\"yaml-파일을-수정해서-상태를-바꾸기\" style=\"position:relative;\"><a href=\"#yaml-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%88%98%EC%A0%95%ED%95%B4%EC%84%9C-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%B0%94%EA%BE%B8%EA%B8%B0\" aria-label=\"yaml 파일을 수정해서 상태를 바꾸기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yaml 파일을 수정해서 상태를 바꾸기</h3>\n<ol>\n<li><code class=\"language-text\">kubectl edit deployments.apps mainui</code> : spec 탭에서 replicas 숫자를 수정</li>\n<li><code class=\"language-text\">kubectl get pods</code> : 파드의 개수 확인</li>\n</ol>\n<h3 id=\"yaml-파일로-실행---yaml-파일로-생성\" style=\"position:relative;\"><a href=\"#yaml-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%8B%A4%ED%96%89---yaml-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%83%9D%EC%84%B1\" aria-label=\"yaml 파일로 실행   yaml 파일로 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yaml 파일로 실행 - yaml 파일로 생성</h3>\n<ol>\n<li>yaml 파일로 만들 수 있는지 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl run webserver --image<span class=\"token operator\">=</span>nginx:1.14 --port <span class=\"token number\">80</span> --dry-run -o yaml</code></pre></div>\n<ul>\n<li><code class=\"language-text\">--dry-run</code>으로 옵션을 주면 실행이 가능한지 확인할 수 있다.(Ansible 과 똑같음)</li>\n<li>yaml 형태로 만들기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl run webserver --image<span class=\"token operator\">=</span>nginx:1.14 --port <span class=\"token number\">80</span> --dry-run -o yaml <span class=\"token operator\">></span> webserver.pod.yaml</code></pre></div>","frontmatter":{"title":"[따배쿠] kubectl 명령어 사용하기","date":"February 22, 2021","category":"🧭 Kubernetes"}}},"pageContext":{"slug":"/Kubernetes/[따배쿠] kubectl 실습/","previous":{"fields":{"slug":"/network/[후니]_1. 네트워크(이더넷), 케이블, MAC(ARP)/"},"frontmatter":{"title":"[후니] 1. 네트워크(이더넷), 케이블, MAC(ARP)","category":"🌐 network","draft":false}},"next":{"fields":{"slug":"/Kubernetes/[따배쿠] 쿠버네티스 아키텍처 - k8s 동작원리/"},"frontmatter":{"title":"[따배쿠]쿠버네티스 아키텍처 - k8s 동작원리","category":"🧭 Kubernetes","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}