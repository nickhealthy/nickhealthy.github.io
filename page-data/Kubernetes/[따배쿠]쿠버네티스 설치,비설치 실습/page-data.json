{"componentChunkName":"component---src-templates-blog-post-js","path":"/Kubernetes/[ë”°ë°°ì¿ ]ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜,ë¹„ì„¤ì¹˜ ì‹¤ìŠµ/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"5821f419-933c-5826-b7db-e5eb8e563dd8","excerpt":"ì¹´íƒ€ì½”ë‹¤ ì¿ ë²„ë„¤í‹°ìŠ¤ í”Œë ˆì´ê·¸ë¼ìš´ë“œ https://www.katacoda.com/courses/kubernetes/playground Master, node1 êµ¬ì„±ë˜ì–´ ìˆì–´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥(1ì‹œê°„) Play with Kubernetes dockerì—ì„œ ì œê³µ, docker hub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ https://labs.play-with-k8s.com/ 4ì‹œê°„ ì‚¬ìš© ê°€ëŠ¥. master, worker nodeë¥¼ ì§ì ‘ êµ¬ì„±í•œ í›„ ì‚¬ìš©ê°€ëŠ¥ play with K8Sâ€¦","html":"<ul>\n<li>\n<p>ì¹´íƒ€ì½”ë‹¤ ì¿ ë²„ë„¤í‹°ìŠ¤ í”Œë ˆì´ê·¸ë¼ìš´ë“œ</p>\n<ul>\n<li><a href=\"https://www.katacoda.com/courses/kubernetes/playground\">https://www.katacoda.com/courses/kubernetes/playground</a></li>\n<li>Master, node1 êµ¬ì„±ë˜ì–´ ìˆì–´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥(1ì‹œê°„)</li>\n</ul>\n</li>\n<li>\n<p>Play with Kubernetes</p>\n<ul>\n<li>dockerì—ì„œ ì œê³µ, docker hub ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸</li>\n<li><a href=\"https://labs.play-with-k8s.com/\">https://labs.play-with-k8s.com/</a></li>\n<li>4ì‹œê°„ ì‚¬ìš© ê°€ëŠ¥. master, worker nodeë¥¼ ì§ì ‘ êµ¬ì„±í•œ í›„ ì‚¬ìš©ê°€ëŠ¥</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"play-with-k8s\" style=\"position:relative;\"><a href=\"#play-with-k8s\" aria-label=\"play with k8s permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>play with K8S</h1>\n<p><code class=\"language-text\">ADD NEW INSTANCE</code> ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ í™•ì¸ ê°€ëŠ¥</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>. Initializes cluster master node:\n\n kubeadm init --apiserver-advertise-address <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">hostname</span> -i<span class=\"token variable\">)</span></span> --pod-network-cidr <span class=\"token number\">10.5</span>.0.0/16\n\n\n <span class=\"token number\">2</span>. Initialize cluster networking:\n\nkubectl apply -f https://raw.githubusercontent.com/cloudnativelabs/kube-router/master/daemonset/kubeadm-kuberouter.yaml\n\n\n <span class=\"token number\">3</span>. <span class=\"token punctuation\">(</span>Optional<span class=\"token punctuation\">)</span> Create an nginx deployment:\n\n kubectl apply -f https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/nginx-app.yaml</code></pre></div>\n<img width=\"335\" alt=\"2\" src=\"https://user-images.githubusercontent.com/66216102/107961735-a6b6e800-6fe9-11eb-9f58-e4aa196b43e1.PNG\">\n<ul>\n<li>\n<p>1ë²ˆì˜ ëª…ë ¹ì–´ë¡œ ì»´í¬ë„ŒíŠ¸ë“¤ êµ¬ì„± ë° ë§ˆìŠ¤í„° ë…¸ë“œ ìƒì„±</p>\n<ul>\n<li>ì»´í¬ë„ŒíŠ¸ë“¤ì˜ êµ¬ì„±ìš”ì†ŒëŠ” <strong>API, Controller, schduler, etcd, CoreDNS</strong> ê°€ ìˆë‹¤.</li>\n</ul>\n</li>\n<li>ì„¤ì¹˜ ì´í›„ ì›Œì»¤ ë…¸ë“œë¥¼ ì¡°ì¸í•  ìˆ˜ ìˆëŠ” í‚¤ê°€ ì£¼ì–´ì§„ë‹¤. (ë§¤ìš° ì¤‘ìš”)</li>\n<li>2ë²ˆì˜ ëª…ë ¹ì–´ë¡œ ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ˆê¸°í™” í•˜ëŠ” ëª…ë ¹ì–´ì´ë‹¤. ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•œë‹¤.</li>\n<li>\n<p>ì›Œì»¤ ë…¸ë“œë¥¼ í•˜ë‚˜ ë” ìƒì„± í›„ ì•„ê¹Œ ë´¤ë˜ ì›Œì»¤ ë…¸ë“œë¥¼ ì¡°ì¸í•  ìˆ˜ ìˆëŠ” í‚¤ë¥¼ ê·¸ëŒ€ë¡œ ì›Œì»¤ë…¸ë“œì— ë³µì‚¬/ë¶™ì—¬ë„£ê¸°</p>\n<ul>\n<li>ì›Œì»¤ë…¸ë“œì— í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ êµ¬ì„±í•œë‹¤.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">kubectl get nodes -o wide</code> ëª…ë ¹ì–´ë¡œ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ì„ í™•ì¸</li>\n<li>ëª¨ë“  ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤.</li>\n</ul>\n<h1 id=\"í´ë¼ìš°ë“œ-ì„œë¹„ìŠ¤ì—ì„œ-ì œê³µí•˜ëŠ”-ì¿ ë²„ë„¤í‹°ìŠ¤-ë„êµ¬\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8F%84%EA%B5%AC\" aria-label=\"í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë„êµ¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ë„êµ¬</h1>\n<ul>\n<li>êµ¬ê¸€ ì¿ ë²„ë„¤í‹°ìŠ¤ ì—”ì§„(GKE)</li>\n<li>ì•„ë§ˆì¡´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì¼ë˜ìŠ¤í‹± ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤(EKS)</li>\n<li>ì• ì € ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤(AKS)</li>\n</ul>\n<h1 id=\"ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°ë¥¼-ì§ì ‘-êµ¬ì„±í•˜ëŠ”-ë„êµ¬\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%EB%A5%BC-%EC%A7%81%EC%A0%91-%EA%B5%AC%EC%84%B1%ED%95%98%EB%8A%94-%EB%8F%84%EA%B5%AC\" aria-label=\"ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§ì ‘ êµ¬ì„±í•˜ëŠ” ë„êµ¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§ì ‘ êµ¬ì„±í•˜ëŠ” ë„êµ¬</h1>\n<ul>\n<li>\n<p>kubeadm</p>\n<ul>\n<li>ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ê³µì‹ ì œê³µí•˜ëŠ” í´ëŸ¬ìŠ¤í„° ìƒì„±/ê´€ë¦¬ ë„êµ¬</li>\n</ul>\n</li>\n<li>\n<p>kubespray</p>\n<ul>\n<li>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸</li>\n<li>ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ê°€ëŠ¥</li>\n<li>ì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œ ìƒìš© ì„œë¹„ìŠ¤ í´ëŸ¬ìŠ¤í„° ìš´ì˜ì‹œ ìœ ìš©</li>\n<li>ë‹¤ì–‘í•œ CNI ì œê³µ</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"cni-container-network-interface\" style=\"position:relative;\"><a href=\"#cni-container-network-interface\" aria-label=\"cni container network interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CNI (Container Network Interface)</h1>\n<ul>\n<li>Containerê°„ í†µì‹ ì„ ì§€ì›í•˜ëŠ” <code class=\"language-text\">VxLAN</code>, <code class=\"language-text\">Pod Network</code>ë¼ê³ ë„ ë¶€ë¦„</li>\n<li>\n<p>ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ í”Œë¡œê·¸ ì¸ì´ ì¡´ì¬</p>\n<ul>\n<li>í”Œë¼ë„¬(flannel)</li>\n<li>ì¹¼ë¦¬ì½”(calico)</li>\n<li>ìœ„ë¸Œë„·(weavenet) ë“±ë“±</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"ì¿ ë²„ë„¤í‹°ìŠ¤-í´ëŸ¬ìŠ¤í„°-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EA%B5%AC%EC%84%B1\" aria-label=\"ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° êµ¬ì„±</h1>\n<ul>\n<li>\n<p>control plane(master node)</p>\n<ul>\n<li>ì›Œì»¤ ë…¸ë“œë“¤ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ì œì–´</li>\n<li>single master</li>\n<li>multi master(3, 5ê°œì˜ master nodes)</li>\n</ul>\n</li>\n<li>\n<p>worker node</p>\n<ul>\n<li>ë„ì»¤ í”Œë«í¼ì„ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ë™ì‘í•˜ë©° ì‹¤ì œ ì„œë¹„ìŠ¤ ì œê³µ</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"ì¿ ë²„ë„¤í‹°ìŠ¤-ì§ì ‘-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%B9%98\" aria-label=\"ì¿ ë²„ë„¤í‹°ìŠ¤ ì§ì ‘ ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¿ ë²„ë„¤í‹°ìŠ¤ ì§ì ‘ ì„¤ì¹˜</h1>\n<ol>\n<li>ëª¨ë“  ê°€ìƒë¨¸ì‹  ì‹œì‘(docker ì„¤ì¹˜ë˜ì–´ìˆì–´ì•¼ í•¨)</li>\n<li>\n<p>kubeadm íˆ´ì„ ì´ìš©í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜ <a href=\"https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/\">ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µí™ˆ</a></p>\n<ul>\n<li>ìµœì†Œ ì‚¬ì–‘ ë“±ì„ í™•ì¸</li>\n</ul>\n</li>\n<li>ë£¨íŠ¸ ê³„ì • ì „í™˜ &#x26; Swap disabled</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">su</span> -\n<span class=\"token comment\"># swapoff -a &amp;&amp; sed -i '/swap/s/^/#/' /etc/fstab</span></code></pre></div>\n<ol start=\"4\">\n<li><a href=\"https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#letting-iptables-see-bridged-traffic\">Letting iptables see bridged traffic</a>(ë¸Œë¦¿ì§€ ë„¤íŠ¸ì›Œí¬ Listenì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> <span class=\"token function\">tee</span> /etc/modules-load.d/k8s.conf</span>\nbr_netfilter\nEOF</span>\n\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> <span class=\"token function\">tee</span> /etc/sysctl.d/k8s.conf</span>\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF</span>\nsysctl --system</code></pre></div>\n<ol start=\"5\">\n<li>Check required ports &#x26; Disable firewall</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># systemctl stop firewalld</span>\n<span class=\"token comment\"># systemctl disable firewalld</span></code></pre></div>\n<ol start=\"6\">\n<li>\n<p>Installing runtime</p>\n<ul>\n<li>ë„ì»¤ ì„¤ì¹˜ ì™„ë£Œ, ë™ì‘ ì¤‘</li>\n</ul>\n</li>\n<li>\n<p>Installing kubeadm, kubelet and kubectl</p>\n<ul>\n<li><code class=\"language-text\">kubeadm</code>: ì¿ ë²„ë„¤í‹°ìŠ¤ ì „ì²´ë¥¼ ê´€ë¦¬í•˜ê³  ìš´ì˜í•´ì£¼ëŠ” ëª…ë ¹ì–´</li>\n<li><code class=\"language-text\">kubelet</code>: ë°ëª¬(ì»¨í…Œì´ë„ˆ ì¡°ì‘ ë° ë§ˆìŠ¤í„°ì™€ í†µì‹ í•  ë•Œ ì‚¬ìš©)</li>\n<li><code class=\"language-text\">kubectl</code>: ì£¼ìš” ëª…ë ¹ì–´</li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y apt-transport-https <span class=\"token function\">curl</span>\n<span class=\"token function\">curl</span> -s https://packages.cloud.google.com/apt/doc/apt-key.gpg <span class=\"token operator\">|</span> apt-key <span class=\"token function\">add</span> -\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> <span class=\"token function\">tee</span> /etc/apt/sources.list.d/kubernetes.list</span>\ndeb https://apt.kubernetes.io/ kubernetes-xenial main\nEOF</span>\n<span class=\"token function\">apt-get</span> update\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y kubelet kubeadm kubectl\napt-mark hold kubelet kubeadm kubectl</code></pre></div>\n<h1 id=\"control-plane-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#control-plane-%EA%B5%AC%EC%84%B1\" aria-label=\"control plane êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>control-plane êµ¬ì„±</h1>\n<ol>\n<li>ì„œë¹„ìŠ¤ ì‹œì‘ ë° ìë™ ì‹œì‘ ì„¤ì •</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl start kubelet\nsystemctl <span class=\"token builtin class-name\">enable</span> kubelet</code></pre></div>\n<ol start=\"2\">\n<li>control-plane ë…¸ë“œ ì‹¤í–‰</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubeadm init</code></pre></div>\n<ul>\n<li>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìƒì„±ëœë‹¤.</p>\n<ul>\n<li>API, controller, scduler, etcd</li>\n</ul>\n</li>\n<li>ì„¤ì¹˜ ì´í›„ í† í° ì €ì¥</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">></span> token.txt</code></pre></div>\n<ul>\n<li>ë³µì‚¬ ë¶™ì—¬ ë„£ê¸° ì´í›„ <code class=\"language-text\">ctrl + d</code></li>\n<li>kubectl ëª…ë ¹ ì‚¬ìš©í—ˆê°€ ì„¤ì •</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">exit</span>\n\n<span class=\"token function\">mkdir</span> -p <span class=\"token environment constant\">$HOME</span>/.kube\n<span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> -i /etc/kubernetes/admin.conf <span class=\"token environment constant\">$HOME</span>/.kube/config\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u<span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g<span class=\"token variable\">)</span></span> <span class=\"token environment constant\">$HOME</span>/.kube/config</code></pre></div>\n<ol start=\"4\">\n<li>ëª…ë ¹ì˜ ì†Œìœ ê¶Œì„ ë£¨íŠ¸ ê³„ì •ì´ ì•„ë‹Œ <strong>ê´€ë¦¬ì ê³„ì •ì— ë¶€ì—¬</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u<span class=\"token variable\">)</span></span><span class=\"token builtin class-name\">:</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g<span class=\"token variable\">)</span></span> <span class=\"token environment constant\">$HOME</span>/.kube/config\nkubectl get nodes ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ëª…ë ¹ì–´ ë˜ëŠ”ì§€ í™•ì¸</code></pre></div>\n<p>ì´ ìƒíƒœê¹Œì§€ ë”°ë¼ì˜¨ë‹¤ë©´, kubectl get nodes ëª…ë ¹ì–´ë¥¼ ì…ë ¥í–ˆì„ ë•Œ, master ë…¸ë“œê°€ <code class=\"language-text\">NotReady</code> ìƒíƒœë¡œ ë‚˜ì˜¬í…ë°, CNIê°€ ë¯¸ì„¤ì¹˜ ëœ ìƒíƒœë¼ì„œ ê·¸ë ‡ë‹¤. ë°‘ì˜ ëª…ë ¹ì–´ë¥¼ ì„¤ì¹˜í•œ í›„ ì ì‹œ ê¸°ë‹¤ë ¤ë³´ë©´ Ready ìƒíƒœë¡œ ë°”ë€” ìˆ˜ ìˆë‹¤.</p>\n<ol start=\"5\">\n<li>pod network add-on (CNI ì„¤ì¹˜ - weavenet)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f <span class=\"token string\">\"https://cloud.weave.works/k8s/net?k8s-version=<span class=\"token variable\"><span class=\"token variable\">$(</span>kubectl version <span class=\"token operator\">|</span> base64 <span class=\"token operator\">|</span> <span class=\"token function\">tr</span> -d <span class=\"token string\">'<span class=\"token entity\" title=\"\\n\">\\n</span>'</span><span class=\"token variable\">)</span></span>\"</span>\n\nkubectl get nodesë¡œ Ready ìƒíƒœë¥¼ í™•ì¸</code></pre></div>\n<h1 id=\"worker-ë…¸ë“œ-êµ¬ì„±\" style=\"position:relative;\"><a href=\"#worker-%EB%85%B8%EB%93%9C-%EA%B5%AC%EC%84%B1\" aria-label=\"worker ë…¸ë“œ êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>worker ë…¸ë“œ êµ¬ì„±</h1>\n<p>ì›Œì»¤ ë…¸ë“œë¥¼ ë§ˆìŠ¤í„° ë…¸ë“œì™€ Join ì‹œì¼œì•¼í•œë‹¤.</p>\n<ol>\n<li>ì•„ê¹Œ ë°œê¸‰ ë°›ì•˜ë˜ token.txtë¥¼ ê° ë…¸ë“œì— ë¶™ì—¬ë„£ê¸° í›„ í™•ì¸</li>\n</ol>\n<img width=\"1100\" alt=\"ìº¡ì²˜\" src=\"https://user-images.githubusercontent.com/66216102/108671982-a5734700-7524-11eb-9532-f67d7677a951.PNG\">\n<h1 id=\"tip---bashì°½ì—-tabí‚¤-ì´ìš©-ê°€ëŠ¥í•˜ê²Œ-í•˜ê¸°\" style=\"position:relative;\"><a href=\"#tip---bash%EC%B0%BD%EC%97%90-tab%ED%82%A4-%EC%9D%B4%EC%9A%A9-%EA%B0%80%EB%8A%A5%ED%95%98%EA%B2%8C-%ED%95%98%EA%B8%B0\" aria-label=\"tip   bashì°½ì— tabí‚¤ ì´ìš© ê°€ëŠ¥í•˜ê²Œ í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TIP - bashì°½ì— TABí‚¤ ì´ìš© ê°€ëŠ¥í•˜ê²Œ í•˜ê¸°</h1>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Bash ìë™ì™„ì„±ì„ ì§€ì›í•´ì£¼ê³  ìˆì§€ì•Šë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ê³µì‹í™ˆí˜ì´ì§€ì—ì„œ <code class=\"language-text\">bash completion</code> ê²€ìƒ‰ í›„ <strong>kubectl ì¹˜íŠ¸ ì‹œíŠ¸ ì ‘ì†</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># bash-completion íŒ¨í‚¤ì§€ë¥¼ ë¨¼ì € ì„¤ì¹˜í•œ í›„, bashì˜ ìë™ ì™„ì„±ì„ í˜„ì¬ ì…¸ì— ì„¤ì •í•œë‹¤</span>\n<span class=\"token builtin class-name\">source</span> <span class=\"token operator\">&lt;</span><span class=\"token punctuation\">(</span>kubectl completion <span class=\"token function\">bash</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ìë™ ì™„ì„±ì„ bash ì…¸ì— ì˜êµ¬ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"source &lt;(kubectl completion bash)\"</span> <span class=\"token operator\">>></span> ~/.bashrc</code></pre></div>\n<ul>\n<li>kubectlë¥¼ kubeadmìœ¼ë¡œ ë°”ê¾¸ë©´ kubeadmë„ íƒ­í‚¤ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>","frontmatter":{"title":"[ë”°ë°°ì¿ ] ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜, ë¹„ì„¤ì¹˜ ì‹¤ìŠµ","date":"February 16, 2021","category":"ğŸ§­ Kubernetes"}}},"pageContext":{"slug":"/Kubernetes/[ë”°ë°°ì¿ ]ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜,ë¹„ì„¤ì¹˜ ì‹¤ìŠµ/","previous":{"fields":{"slug":"/Kubernetes/[ë”°ë°°ì¿ ]virtual machine ì„¤ì¹˜ ë° ì„¸íŒ…ì„¤ì¹˜/"},"frontmatter":{"title":"[ë”°ë°°ì¿ ] virtual machine ì„¤ì¹˜ ë° ì„¸íŒ…","category":"ğŸ§­ Kubernetes","draft":false}},"next":{"fields":{"slug":"/solving-algo/[programmers]_ì •ìˆ˜ì‚¼ê°í˜•/"},"frontmatter":{"title":"[programmers]ì •ìˆ˜ ì‚¼ê°í˜•","category":"ğŸ’¯ solving-algo","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}