{"componentChunkName":"component---src-templates-blog-post-js","path":"/Kubernetes/[따배쿠] 쿠버네티스 아키텍처 - k8s 동작원리/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"bd0a7359-4d0b-5e97-9d33-44ba0c2a91fb","excerpt":"쿠버네티스 동작과정(원리) 컨테이너 이미지 저장소에 이미지 push 및 pull 컨테이너 이미지 저장소는 사내망이 될 수도, 도커허브처럼 퍼블릭 공간도 될 수 있다. 개발자나 운영자가의 yaml 형태든, CLI 형태든 명령어를 입력하게 되면, 마스터 노드 즉, control-plane 노드의 가 명령어를 받아서 명령어에 맞게 요청을 받아준다. etcd의 상태 정보를 확인한다. 이때 어느 노드에 배치하는 것이 가장 좋은지 판단 및 배치 해주는 것이  이다. 스케줄러는 REST API Server…","html":"<h2 id=\"쿠버네티스-동작과정원리\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EB%8F%99%EC%9E%91%EA%B3%BC%EC%A0%95%EC%9B%90%EB%A6%AC\" aria-label=\"쿠버네티스 동작과정원리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠버네티스 동작과정(원리)</h2>\n<ol>\n<li>\n<p>컨테이너 이미지 저장소에 이미지 push 및 pull</p>\n<ul>\n<li>컨테이너 이미지 저장소는 사내망이 될 수도, 도커허브처럼 퍼블릭 공간도 될 수 있다.</li>\n</ul>\n</li>\n<li>개발자나 운영자가<code class=\"language-text\">kubectl</code>의 yaml 형태든, CLI 형태든 명령어를 입력하게 되면,</li>\n<li>\n<p>마스터 노드 즉, control-plane 노드의 <code class=\"language-text\">REST API Server</code>가 명령어를 받아서 명령어에 맞게 요청을 받아준다.</p>\n<ul>\n<li>etcd의 상태 정보를 확인한다.</li>\n</ul>\n</li>\n<li>이때 어느 노드에 배치하는 것이 가장 좋은지 판단 및 배치 해주는 것이 <code class=\"language-text\">Scheduler</code> 이다. 스케줄러는 REST API Server에게 적절하게 판단해 응답해준다.</li>\n<li>그럼 REST API Server는 적절한 node의 <code class=\"language-text\">kubelet</code>에게 요청을 한다.</li>\n<li>요청을 받은 kubelet은 해당 명령어를 <code class=\"language-text\">docker</code> 명령어로 변환한다.</li>\n<li>도커 데몬은 최종적으로 이미지 저장소에서 컨테이너를 적절히 불러와 실행시켜 준다.</li>\n<li>컨트롤러는 지속적으로 감시해 파드 개수를 보장해준다.</li>\n</ol>\n<h2 id=\"컴포넌트-종류와-구성\" style=\"position:relative;\"><a href=\"#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%A2%85%EB%A5%98%EC%99%80-%EA%B5%AC%EC%84%B1\" aria-label=\"컴포넌트 종류와 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컴포넌트 종류와 구성</h2>\n<img width=\"509\" alt=\"캡처\" src=\"https://user-images.githubusercontent.com/66216102/108697082-b8e2da00-7545-11eb-8d07-41a7c6ed4987.PNG\">\n<ul>\n<li>etcd 저장소는 하드웨어의 상태, 이미지 정보 등을 저장하고 관리하고 있다. 이러한 정보를 REST API Server가 kubectl 명령어와 비교하고 확인해 적절한 형태로 만들어준다.</li>\n</ul>\n<h2 id=\"애드온\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%EC%98%A8\" aria-label=\"애드온 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드온</h2>\n<img width=\"454\" alt=\"캡처1\" src=\"https://user-images.githubusercontent.com/66216102/108697078-b7b1ad00-7545-11eb-8120-4a3d5208b72b.PNG\">\n<blockquote>\n<ul>\n<li>대시보드, 클러스터 로깅 같은 경우에는 기본적으로 설치되어 있지 않다. 따로 설치를 해야함</li>\n<li>클러스터 로깅 같은 경우, 여러 개의 노드를 관리해야하는 쿠버네티스의 특성상 한곳에 로그에서 관리할 수 있다는 점에서 아주 유용하다.</li>\n<li>컨테이너 자원 모니터링(cAdvisor)는 kubelet에 포함되어 있다.</li>\n</ul>\n</blockquote>\n<h4 id=\"이런-식의-구성을-하게-되면-운영-서비스-로깅-등을-한번에-할-수-있게-된다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%9F%B0-%EC%8B%9D%EC%9D%98-%EA%B5%AC%EC%84%B1%EC%9D%84-%ED%95%98%EA%B2%8C-%EB%90%98%EB%A9%B4-%EC%9A%B4%EC%98%81-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%A1%9C%EA%B9%85-%EB%93%B1%EC%9D%84-%ED%95%9C%EB%B2%88%EC%97%90-%ED%95%A0-%EC%88%98-%EC%9E%88%EA%B2%8C-%EB%90%9C%EB%8B%A4\" aria-label=\"이런 식의 구성을 하게 되면 운영 서비스 로깅 등을 한번에 할 수 있게 된다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이런 식의 구성을 하게 되면 운영, 서비스, 로깅 등을 한번에 할 수 있게 된다.</h4>\n<h2 id=\"namespace란-\" style=\"position:relative;\"><a href=\"#namespace%EB%9E%80-\" aria-label=\"namespace란  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Namespace란 ?</h2>\n<ul>\n<li>K8S API 종류 중 하나</li>\n<li>클러스터 하나를 <strong>여러 개의 논리적인 단위로 나눠서 사용</strong></li>\n<li>쿠버네티스 클러스터 하나를 <strong>여러 팀이나 사용자가 함께 공유</strong></li>\n<li><strong>용도에 따라 실행해야 하는 앱</strong>을 구분할 때 사용</li>\n<li>클러스터를 구성하게 되면 기본적으로 4개의 네임스페이스가 존재하고, <code class=\"language-text\">default</code> 네임스페이스를 이용한다.</li>\n</ul>\n<h4 id=\"물리적으로-하나의-클러스터서버가-있더라도-네임스페이스를-통해-논리적으로-구분해-줄-수-있다\" style=\"position:relative;\"><a href=\"#%EB%AC%BC%EB%A6%AC%EC%A0%81%EC%9C%BC%EB%A1%9C-%ED%95%98%EB%82%98%EC%9D%98-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%EC%84%9C%EB%B2%84%EA%B0%80-%EC%9E%88%EB%8D%94%EB%9D%BC%EB%8F%84-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%ED%86%B5%ED%95%B4-%EB%85%BC%EB%A6%AC%EC%A0%81%EC%9C%BC%EB%A1%9C-%EA%B5%AC%EB%B6%84%ED%95%B4-%EC%A4%84-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"물리적으로 하나의 클러스터서버가 있더라도 네임스페이스를 통해 논리적으로 구분해 줄 수 있다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>물리적으로 하나의 클러스터(서버)가 있더라도 네임스페이스를 통해 논리적으로 구분해 줄 수 있다.</h4>\n<h3 id=\"네임스페이스-만드는-법\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%A7%8C%EB%93%9C%EB%8A%94-%EB%B2%95\" aria-label=\"네임스페이스 만드는 법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네임스페이스 만드는 법</h3>\n<ul>\n<li>\n<p>CLI 방식</p>\n<ul>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create namespace blue\n$ kubectl get namespaces</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>yam 방식</p>\n<ul>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create namespace green --dry-run -o yaml <span class=\"token operator\">></span> green-ns.yaml\n$ <span class=\"token function\">vim</span> green-ns.yaml\n$ kubectl create -f green-ns.yaml</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<ol>\n<li>yaml 파일로 만들기</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mypod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span><span class=\"token number\">1.14</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span></code></pre></div>\n<ol start=\"2\">\n<li>yaml 파일로 실행 및 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f nginx.yaml\n$ kubectl get pods -n default</code></pre></div>\n<blockquote>\n<p>아무 옵션도 주지 않았으므로 default 네임스페이스에 생성됨</p>\n</blockquote>\n<ol start=\"3\">\n<li>blue 네임스페이스 생성</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create namespace blue</code></pre></div>\n<ol start=\"4\">\n<li>orange 네임스페이스에 yaml 파일로 생성 &#x26; 실행</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create namespace orange --dry-run -o yaml <span class=\"token operator\">></span> orange-ns.yaml\n$ kubectl create -f orange-ns.yaml -n orange</code></pre></div>\n<blockquote>\n<p>—dry-run 옵션은 실제로 실행하지 않고, 실행여부를 확인</p>\n</blockquote>\n<ol start=\"5\">\n<li>blue 네임스페이스에서 실행하기</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f nginx.yaml -n blue</code></pre></div>\n<ol start=\"6\">\n<li>yaml 파일 안에 네임스페이스를 지정해 실행</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mypod\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> orange <span class=\"token comment\"># 오렌지 네임스페이스에 지정했다.</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span><span class=\"token number\">1.14</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span></code></pre></div>\n<h4 id=\"cli-yaml-yaml-파일-안에-정의-등을-통해서-다양하게-실행할-수-있다\" style=\"position:relative;\"><a href=\"#cli-yaml-yaml-%ED%8C%8C%EC%9D%BC-%EC%95%88%EC%97%90-%EC%A0%95%EC%9D%98-%EB%93%B1%EC%9D%84-%ED%86%B5%ED%95%B4%EC%84%9C-%EB%8B%A4%EC%96%91%ED%95%98%EA%B2%8C-%EC%8B%A4%ED%96%89%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4\" aria-label=\"cli yaml yaml 파일 안에 정의 등을 통해서 다양하게 실행할 수 있다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CLI, yaml, yaml 파일 안에 정의 등을 통해서 다양하게 실행할 수 있다.</h4>\n<h2 id=\"base-네임스페이스-변경하기switch\" style=\"position:relative;\"><a href=\"#base-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0switch\" aria-label=\"base 네임스페이스 변경하기switch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Base 네임스페이스 변경하기(switch)</h2>\n<p>하나의 context를 config에 등록하여 default 클러스터를 스위칭할 수 있다.</p>\n<ol>\n<li>기존의 config 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl config view</code></pre></div>\n<ol start=\"2\">\n<li>새로운 context를 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl config set-context blue@kubernetes --cluster<span class=\"token operator\">=</span>kubernetes --user<span class=\"token operator\">=</span>kubernetes-admin --namespace<span class=\"token operator\">=</span>blue</code></pre></div>\n<blockquote>\n<p>blue@kubernetes : 이름</p>\n<p>—cluster= 클러스터 이름</p>\n<p>—user : 쿠버네티스 유저</p>\n<p>—namespace : 지정할 네임스페이스</p>\n</blockquote>\n<ol start=\"3\">\n<li>default 네임스페이스에서 blue 네임스페이스를 기본으로 스위칭</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl config use-context blue@kubernetes</code></pre></div>\n<ol start=\"4\">\n<li>현재 지정된 네임스페이스 확인</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl config current-context</code></pre></div>\n<ol start=\"5\">\n<li>파드들을 생성할 때 아무 옵션을 주지 않는다면, 이제 blue 네임스페이스에 생성된다.</li>\n<li>다시 원래 default 클러스터로 돌리기</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl config use-context kubernetes-admin@kubernetes</code></pre></div>\n<h2 id=\"네임스페이스-삭제하기\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0\" aria-label=\"네임스페이스 삭제하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네임스페이스 삭제하기</h2>\n<p>하나의 네임스페이스 안에 여러 리소스가 존재하게 되는데, 네임스페이스를 지우게 된다면 안에 있는 리소스 모두 같이 삭제된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl delete namespace blue</code></pre></div>","frontmatter":{"title":"[따배쿠]쿠버네티스 아키텍처 - k8s 동작원리","date":"February 22, 2021","category":"🧭 Kubernetes"}}},"pageContext":{"slug":"/Kubernetes/[따배쿠] 쿠버네티스 아키텍처 - k8s 동작원리/","previous":{"fields":{"slug":"/Kubernetes/[따배쿠] kubectl 실습/"},"frontmatter":{"title":"[따배쿠] kubectl 명령어 사용하기","category":"🧭 Kubernetes","draft":false}},"next":{"fields":{"slug":"/Kubernetes/[따배쿠] 쿠버네티스 yaml, API version/"},"frontmatter":{"title":"[따배쿠]쿠버네티스 yaml, API version","category":"🧭 Kubernetes","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}