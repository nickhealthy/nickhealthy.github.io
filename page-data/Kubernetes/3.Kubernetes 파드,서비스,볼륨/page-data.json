{"componentChunkName":"component---src-templates-blog-post-js","path":"/Kubernetes/3.Kubernetes 파드,서비스,볼륨/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"06777131-8304-5bd1-8b3f-d9b6291653c3","excerpt":"Pod 파드는 하나 또는 그 이상의 애플리케이션 컨테이너 (도커와 같은)들의 그룹을 나타내는 쿠버네티스의 추상적 개념으로 일부는 컨테이너에 대한 자원을 공유한다. 그 자원은 다음을 포함한다. 볼륨과 같은, 공유 스토리지 클러스터 IP…","html":"<h2 id=\"pod\" style=\"position:relative;\"><a href=\"#pod\" aria-label=\"pod permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pod</h2>\n<p>파드는 하나 또는 그 이상의 애플리케이션 컨테이너 (도커와 같은)들의 그룹을 나타내는 쿠버네티스의 추상적 개념으로 일부는 컨테이너에 대한 자원을 공유한다. 그 자원은 다음을 포함한다.</p>\n<ul>\n<li>볼륨과 같은, 공유 스토리지</li>\n<li>클러스터 IP 주소와 같은, 네트워킹</li>\n<li>컨테이너 이미지 버전 또는 사용할 특정 포트와 같이, 각 컨테이너가 동작하는 방식에 대한 정보</li>\n</ul>\n<p><b style=\"color:red\">파드는 쿠버네티스 플랫폼 상에서 최소 단위가 된다.</b></p>\n<blockquote>\n<p>각 파드는 스케쥴 되어진 노드에게 묶여지게 된다. 그리고 (재구동 정책에 따라) 소멸되거나 삭제되기 전까지 그 노드에 유지된다. 노드에 실패가 발생할 경우, 클러스터 내에 가용한 다른 노드들을 대상으로 스케쥴되어진다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/104288550-4d93fa00-54fb-11eb-930f-a463c2c8b1dc.PNG\" alt=\"IMG\"></p>\n<br />\n<h3 id=\"1-container\" style=\"position:relative;\"><a href=\"#1-container\" aria-label=\"1 container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Container</h3>\n<ol>\n<li>\n<p>하나의 독립적인 서비스를 구동할 수 있는 컨테이너들이 있다</p>\n<ul>\n<li>한 파드 안에서 여러개의 컨테이너를 생성할 수 있다.</li>\n</ul>\n</li>\n<li>그 컨테이너는 각각의 컨테이너끼리 서비스를 연결할 수 있도록 <strong>포트를 가지고 있다.</strong></li>\n<li>한 컨테이너에서 포트를 여러개 가질 순 있지만, 한 파드 안에서 <strong>컨테이너끼리 중복된 포트</strong>를 가질 수 없다.</li>\n<li>\n<p>파드를 생성 시 IP가 생성되고, <strong>쿠버네티스 클러스터</strong>로만 접근이 가능하다. 또한 <strong>재생성 시 변경된다.</strong></p>\n<ul>\n<li>휘발성의 특징을 가지고 있는 이 IP는 외부에서 접근이 불가능하다.</li>\n</ul>\n</li>\n</ol>\n<br />\n<h3 id=\"2-label속성\" style=\"position:relative;\"><a href=\"#2-label%EC%86%8D%EC%84%B1\" aria-label=\"2 label속성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Label(속성)</h3>\n<p>라벨 사용이유 : 목적에 따라 오브젝트들을 분류하고, 분류된 오브젝트들만 따로 골라서 연결하기 위해서이다.</p>\n<ul>\n<li>모든 오브젝트에서 사용이 가능</li>\n</ul>\n<h4 id=\"2-1-label의-구성\" style=\"position:relative;\"><a href=\"#2-1-label%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"2 1 label의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. Label의 구성</h4>\n<ul>\n<li><code class=\"language-text\">key</code>와 <code class=\"language-text\">value</code> 가 한쌍으로 이루어져 있다.</li>\n<li>\n<p>한 파드에는 여러개의 Label을 달 수 있다</p>\n<blockquote>\n<p>예시) 웹 파드만 <code class=\"language-text\">service</code> 오브젝트의 <code class=\"language-text\">selector</code>를 통해 운용하고 싶으면 라벨로 필터링할 수 있다. 즉, 자신이 원하는 파드만 골라서 할 수 있다. 마치 해쉬테이블처럼 검색해서 사용</p>\n</blockquote>\n</li>\n</ul>\n<br />\n<h3 id=\"3-node-schedule\" style=\"position:relative;\"><a href=\"#3-node-schedule\" aria-label=\"3 node schedule permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Node Schedule</h3>\n<ul>\n<li>\n<p>파드는 결국 여러 노드들 중에 한 노드에 올라가져야 한다. 그 중 2가지 방법이 존재</p>\n<ol>\n<li>직접선택</li>\n<li>자동할당(스케줄러가 판단)</li>\n</ol>\n</li>\n</ul>\n<br />\n<p>직접 선택: 노드에 원하는 <code class=\"language-text\">label</code>를 달고 Pod.yml 파일에서 <code class=\"language-text\">nodeSelector</code> 정의를 통해 연결이 가능<br>\n자동할당: 노드에는 전체 사용가능한 자원량이 정해져있다. CPU와 Memory가 대표적이며, <strong>스케줄러가 각 노드의 점수를 매겨 파드를 알아서 스케줄링 해준다.</strong> 또한 파드에는 <code class=\"language-text\">resources</code> 옵션으로 자원량을 한정 시킬 수 있다.</p>\n<blockquote>\n<p>하나의 Pod 내에서 많은 자원을 소비하게 될 경우 같은 노드 안에 있는 다른 파드들은 자원을 공급받지 못해 같이 다운타임이 발생할 수 있으므로 필요에 따라 자원량을 한정하는 것이 좋다.</p>\n</blockquote>\n<h4 id=\"3-1-resources\" style=\"position:relative;\"><a href=\"#3-1-resources\" aria-label=\"3 1 resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1. resources</h4>\n<ul>\n<li>requests: 요청하는 자원의 량</li>\n<li>\n<p>limits: 최대 허용 자원의 량</p>\n<ul>\n<li>예시</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 2Gi  &lt;<span class=\"token tag\">!--</span> memory 자원 최소 요청의 량\n  <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span> 3Gi  &lt;<span class=\"token tag\">!--</span> memory 자원 최대 허용량</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">limits</code>의 옵션은 자원의 성격에 따라 동작하는 방식이 다르다.</p>\n<ul>\n<li><code class=\"language-text\">memory</code>는 초과시 파드를 종료 시킴</li>\n<li><code class=\"language-text\">CPU</code> 초과시 <code class=\"language-text\">request</code>까지 낮춤. 즉, over시 종료되지 않음</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>이렇게 서로 다른 이유는 자원의 성격이 다르기 때문</p>\n</blockquote>\n<h2 id=\"알고가야할-내용-node\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EA%B3%A0%EA%B0%80%EC%95%BC%ED%95%A0-%EB%82%B4%EC%9A%A9-node\" aria-label=\"알고가야할 내용 node permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알고가야할 내용: Node</h2>\n<p>파드는 언제나 노드 상에서 동작한다. 노드는 쿠버네티스에서 <strong>워커 머신을 말하며 클러스터에 따라 가상 또는 물리 머신일 수 있다.</strong> 각 노드는 마스터에 의해 관리된다. 하나의 노드는 여러 개의 파드를 가질 수 있고, 쿠버네티스 마스터는 클러스터 내 노드를 통해서 파드에 대한 스케쥴링을 자동으로 처리한다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/104289382-66e97600-54fc-11eb-9b9f-6fcbe8718f7e.PNG\" alt=\"IMG\"></p>\n<h2 id=\"service\" style=\"position:relative;\"><a href=\"#service\" aria-label=\"service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Service</h2>\n<p><code class=\"language-text\">Service</code>는 기본적으로 IP를 가지고 있다. 그리고 연결된 Pod에 한해서 이 IP를 통해 <code class=\"language-text\">Pod</code>에 접근이 가능하다.<br>\n<strong>하지만 Pod 자체에서도 IP를 가지고 있는데 왜 굳이 <code class=\"language-text\">Service</code>를 이용해 <code class=\"language-text\">Pod</code>에 접근할까 ?</strong><br>\n왜냐하면 <code class=\"language-text\">Pod</code>는 쿠버네티스에서 시스템 장애, 성능 장애 등으로 언제든지 죽을 수 있고 언제든지 재생성 된다면 <strong>IP의 주소가 바뀌므로 신뢰성이 떨어진다.</strong> 하지만 <code class=\"language-text\">Service</code>는 사용자가 지우지 않는 한 서비스는 신뢰성을 보장한다.</p>\n<h3 id=\"1-type-clusterip\" style=\"position:relative;\"><a href=\"#1-type-clusterip\" aria-label=\"1 type clusterip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. type: ClusterIP</h3>\n<ul>\n<li>\n<p>클러스터 내에서만 접근이 가능(Pod의 IP와 동일함)</p>\n<ul>\n<li>즉, 모든 오브젝트들이 접근 가능하다.</li>\n<li>외부에서는 접근이 불가능하다.</li>\n</ul>\n</li>\n<li>여러 개의 파드들을 연결시켜 줄 수 있고, 트래픽을 분산해서 보내준다.</li>\n<li><code class=\"language-text\">Service</code>의 default 값은 ClusterIP이다.</li>\n</ul>\n<h4 id=\"1-1-언제-사용해야-할까-\" style=\"position:relative;\"><a href=\"#1-1-%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C-\" aria-label=\"1 1 언제 사용해야 할까  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1. 언제 사용해야 할까 ?</h4>\n<p>클러스터에 내에서만 사용하는 서비스.<br>\n즉, 외부에서 접근할 수 없기 때문에 인가된 사용자(운영자)가 사용할 수 있다.<br>\n또한 주된 작업 내용은 내부 대쉬보드, Pod 서비스 상태 디버깅</p>\n<br />\n<h3 id=\"2-type-nodeport\" style=\"position:relative;\"><a href=\"#2-type-nodeport\" aria-label=\"2 type nodeport permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. type: NodePort</h3>\n<p>기본적으로 <code class=\"language-text\">ClusterIP</code> 타입과 같은 기능이 포함되어 있음</p>\n<p>이 타입의 가장 큰 특징은 <strong>모든 노드에 Port를 할당해 준다.</strong><br>\n또한 외부로부터 어느 특정 노드의 IP에 대한 요청이 오던 간에 <code class=\"language-text\">IP+NodePort</code>를 입력해 준다면 서비스에 연결된 각 <code class=\"language-text\">Pod</code>에 접근이 가능하다.</p>\n<ul>\n<li>노드 포드 범위는 <code class=\"language-text\">30000~32767</code></li>\n</ul>\n<blockquote>\n<p>추가 설명: 어떤 노드한테 온 트래픽이든 상관없이 Service(자신)한테 연결되어 있는 파드들한테 트래픽 분산을 해준다.</p>\n</blockquote>\n<blockquote>\n<p>하지만 <code class=\"language-text\">externalTrafficPolicy</code> 옵션을 사용하면 특정 노드한테만 즉, 특정 노드의 IP를 통해 트래픽을 설정 할 수도 있다.</p>\n</blockquote>\n<h4 id=\"2-1-언제-사용해야-할까-\" style=\"position:relative;\"><a href=\"#2-1-%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C-\" aria-label=\"2 1 언제 사용해야 할까  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. 언제 사용해야 할까 ?</h4>\n<ul>\n<li>내부망 연결용으로 쓰인다.(호스트 아이피(Node)는 보안적으로 내부망에서만 접근 가능하게 구성해하기 때문에)</li>\n<li>데모 또는 일시적인 외부 연동용으로 쓰인다.</li>\n</ul>\n<br />\n<h3 id=\"3-type-loadbalancer\" style=\"position:relative;\"><a href=\"#3-type-loadbalancer\" aria-label=\"3 type loadbalancer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. type: LoadBalancer</h3>\n<p>기본적으로 <code class=\"language-text\">NodePort</code> 타입과 같은 기능이 포함되어 있음\n추가적으로 <code class=\"language-text\">LoadBalancer</code>는 <strong>각각의 Node에 트래픽을 분산하는 역할을 한다.</strong><br>\n기본적으로 쿠버네티스를 운영한다면 외부 접속 IP주소는 기본적으로 생기지 않는다. 별도로 외부 접속 IP를 할당해 주는 <code class=\"language-text\">플러그인</code>이 설치되어 있어야 한다.</p>\n<blockquote>\n<p>GCP, AWS, Azure, OpenStack 등은 자동으로 플러그인이 설치되어 있어 <code class=\"language-text\">LoadBalancer</code> 타입의 Service 생성 시 외부 접속 IP주소를 자동으로 할당해 준다.</p>\n</blockquote>\n<h4 id=\"3-1-언제-사용해야-할까-\" style=\"position:relative;\"><a href=\"#3-1-%EC%96%B8%EC%A0%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C-\" aria-label=\"3 1 언제 사용해야 할까  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1. 언제 사용해야 할까 ?</h4>\n<p>외부에 시스템 노출용</p>\n<blockquote>\n<p>내부 IP를 노출 시키지 않고, 외부 IP만 노출시킴</p>\n</blockquote>\n<h2 id=\"volume\" style=\"position:relative;\"><a href=\"#volume\" aria-label=\"volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Volume</h2>\n<h3 id=\"1-emptydir\" style=\"position:relative;\"><a href=\"#1-emptydir\" aria-label=\"1 emptydir permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. emptyDir</h3>\n<p><strong>파드 안에 생성되며, 컨테이너들끼리 데이터를 공유하기위해 사용한다.</strong></p>\n<ul>\n<li>최초에 사용할 때는 항상 <code class=\"language-text\">Volume</code> 내용이 비어있기떄문에 명칭이 정해짐</li>\n<li>마운트가 된 <code class=\"language-text\">Volume</code>에 저장함. 즉, 해당 <code class=\"language-text\">Volume</code>에 저장 시키면 컨테이너들끼리 서로 데이터 공유가 가능하다.</li>\n<li>파드 생성시 만들어지고 삭제시 없어지기 때문에 <strong>꼭 일시적인 사용목적에만 사용</strong></li>\n<li>옵션 <code class=\"language-text\">Volume</code>의 name 설정이 같다면, 서로 다른 컨테이너들끼리 마운트의 경로가 달라도 공유가 가능</li>\n</ul>\n<br />\n<h3 id=\"2-hostpath\" style=\"position:relative;\"><a href=\"#2-hostpath\" aria-label=\"2 hostpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. hostPath</h3>\n<p><strong>Pod가 올라가 있는 Node의 <code class=\"language-text\">Volume</code>를 사용한다.</strong></p>\n<ul>\n<li>\n<p><code class=\"language-text\">emptyDir</code>과의 차이점은 각각의 Pod들이 <strong>Node Path를 마운트해서 공유하기 때문에</strong>, 이 데이터는 Pod들이 종료되었어도 보존됨. 단, Pod가 재생성될 때 다른 <code class=\"language-text\">Node</code>로 배치될 수 있기 때문에 기존의 데이터를 못쓸 가능성도 있음</p>\n<blockquote>\n<p>새로운 Node를 추가할 때마다 기존의 <code class=\"language-text\">volume</code>를 마운트해서 연결시켜줄 수 있지만 비추한다.<br>\n(사람의 개입으로 설정 => 실수 발생 가능성) == 자동화에 안좋다.</p>\n</blockquote>\n</li>\n</ul>\n<p>각각의 <code class=\"language-text\">Node</code>들의 설정 파일들을 <code class=\"language-text\">Pod</code> 자신이 할당되어 있는 <code class=\"language-text\">Node</code>(호스트)에 데이터를 읽거나 써야할 때 사용한다. 즉, <strong>파드에 있는 데이터를 저장하기 위한 용도가 아닌, 노드에 있는 데이터를 파드가 사용하기 위한 목적이다.</strong></p>\n<blockquote>\n<p>주의사항 : Pod 생성 전에 지정한 Node - Volume의 경로가 존재 해야한다.</p>\n</blockquote>\n<br />\n<h3 id=\"3-pvcpersistent-volume-claim--pvpersistent-volume\" style=\"position:relative;\"><a href=\"#3-pvcpersistent-volume-claim--pvpersistent-volume\" aria-label=\"3 pvcpersistent volume claim  pvpersistent volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. PVC(Persistent Volume Claim) / PV(Persistent Volume)</h3>\n<p><strong>Pod의 영속성 있는 Volume을 제공하기 위한 개념이다.</strong><br>\n실제로 로컬 <code class=\"language-text\">Volume</code> 즉, Node의 볼륨 외에 외부의 Volume 서비스(AWS, git 등)와 연동해서 사용할 때도 많다.<br>\n그리고 외부의 Volume 서비스들을 연동하기 위한 설정 사항은 다르다. 즉, 각각의 분리가 필요하다.<br>\n<strong>따라서 Admin이 정의해 놓은 각각의 <code class=\"language-text\">PV</code>와 User가 정의해 놓은 각각의 <code class=\"language-text\">PVC</code>가 매핑 되는 것만 연결해서 사용하면 목적에 맞는 Volume를 연동해 사용할 수 있다.</strong></p>\n<blockquote>\n<p><em>PV - Spec</em> .yml 파일 안에 정의 된 <code class=\"language-text\">capacity</code> 속성과 <code class=\"language-text\">accessModes</code>속성으로 매핑을 한다.</p>\n</blockquote>\n<h4 id=\"3-1-프로세스\" style=\"position:relative;\"><a href=\"#3-1-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\"3 1 프로세스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3-1. 프로세스</h4>\n<ol>\n<li>PV 정의 생성</li>\n<li>PVC 생성</li>\n<li>쿠버네티스가 PVC를 이용해 자동으로 PV에 연결(<em>Spec</em>의 내용을 보고 쿠버네티스가 알아서 할당한다.)</li>\n<li>\n<p>Pod 생성 시 PVC에 마운팅이 되면서 전체적인 시스템 구조는 이러한 형식을 갖는다.</p>\n<blockquote>\n<p><code class=\"language-text\">Pod - PVC - PV - 외부 서비스</code></p>\n</blockquote>\n</li>\n</ol>\n<br />\n<h2 id=\"참고-사이트\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%82%AC%EC%9D%B4%ED%8A%B8\" aria-label=\"참고 사이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 사이트</h2>\n<p><a href=\"https://kubernetes.io/ko/docs/tutorials/kubernetes-basics/explore/explore-intro/\">https://kubernetes.io/ko/docs/tutorials/kubernetes-basics/explore/explore-intro/</a></p>\n<br />\n<a href='#'><small class='up-button'>위로 올라가기💨</small></a>\n<br />","frontmatter":{"title":"#3 Kubernetes Pod, Service, Volume","date":"January 12, 2021","category":"🧭 Kubernetes"}}},"pageContext":{"slug":"/Kubernetes/3.Kubernetes 파드,서비스,볼륨/","previous":{"fields":{"slug":"/solving-algo/[프로그래머스]/[programmers]_기능개발/"},"frontmatter":{"title":"[programmers]기능개발","category":"💯 solving-algo","draft":false}},"next":{"fields":{"slug":"/solving-algo/[프로그래머스]/[programmers]_다리를_지나는_트럭/"},"frontmatter":{"title":"[programmers]다리를 지나는 트럭","category":"💯 solving-algo","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}