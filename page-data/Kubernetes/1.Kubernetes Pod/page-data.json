{"componentChunkName":"component---src-templates-blog-post-js","path":"/Kubernetes/1.Kubernetes Pod/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"24f592b6-aa4f-5077-8855-6e9aa9b0e3e5","excerpt":"쿠버네티스를 실습할 수 있는 환경을 구성하고, 전체적인 개념과 구성을 알아보고 실습을 통해 자세히 살펴봅시다. 사실 공부한지가 너무 오래되서 다시 공부를 시작… 쿠버네티스 기본 개념 클러스터 마스터노드와 워커노드가 묶여 있는 집합 및 공간 네임스페이스 클러스터 내에서 독립된 공간을 제공 실행 방식 많은 컨테이너 플랫폼이 존재하지만 도커를 기본으로 사용하고 있으며, Pod를 실행 시 dockerhub에서 도커 이미지를 받아와 쿠버네티스의 가장 작은 단위 배포인 Pod…","html":"<p>쿠버네티스를 실습할 수 있는 환경을 구성하고,<br>\n전체적인 개념과 구성을 알아보고 실습을 통해 자세히 살펴봅시다.<br>\n<ins style=\"text-decoration:line-through\">사실 공부한지가 너무 오래되서 다시 공부를 시작…</ins></p>\n<h2 id=\"쿠버네티스-기본-개념\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90\" aria-label=\"쿠버네티스 기본 개념 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿠버네티스 기본 개념</h2>\n<h3 id=\"클러스터\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0\" aria-label=\"클러스터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클러스터</h3>\n<ul>\n<li>마스터노드와 워커노드가 묶여 있는 집합 및 공간</li>\n</ul>\n<h3 id=\"네임스페이스\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"네임스페이스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네임스페이스</h3>\n<ul>\n<li>클러스터 내에서 독립된 공간을 제공</li>\n</ul>\n<h3 id=\"실행-방식\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%EB%B0%A9%EC%8B%9D\" aria-label=\"실행 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 방식</h3>\n<ul>\n<li>많은 컨테이너 플랫폼이 존재하지만 도커를 기본으로 사용하고 있으며, Pod를 실행 시 dockerhub에서 도커 이미지를 받아와 쿠버네티스의 가장 작은 단위 배포인 Pod로 실행 및 운영합니다.</li>\n</ul>\n<blockquote>\n<p>당연히 사내 hub를 통해 컨테이너 이미지를 관리할 수 있습니다.</p>\n</blockquote>\n<h2 id=\"도커--쿠버네티스-설치-스크립트\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4--%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%84%A4%EC%B9%98-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"도커  쿠버네티스 설치 스크립트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도커 &#x26; 쿠버네티스 설치 스크립트</h2>\n<ul>\n<li>우분투 18.04 LTS 기준으로 스크립트 작성</li>\n</ul>\n<blockquote>\n<p>마스터노드와 워커 노드에 스크립트를 작성하면 됩니다.</p>\n</blockquote>\n<ul>\n<li>스크립트 파일 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">></span> install.sh\n<span class=\"token comment\"># 아래 내용을 복사</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token punctuation\">\\</span>\n    apt-transport-https <span class=\"token punctuation\">\\</span>\n    ca-certificates <span class=\"token punctuation\">\\</span>\n    <span class=\"token function\">curl</span> <span class=\"token punctuation\">\\</span>\n    gnupg <span class=\"token punctuation\">\\</span>\n    lsb-release\n<span class=\"token function\">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n<span class=\"token builtin class-name\">echo</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token string\">\"deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\\n  <span class=\"token variable\"><span class=\"token variable\">$(</span>lsb_release -cs<span class=\"token variable\">)</span></span> stable\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/apt/sources.list.d/docker.list <span class=\"token operator\">></span> /dev/null\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> docker-ce docker-ce-cli containerd.io\nswapoff -a <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sed</span> -i <span class=\"token string\">'/swap/s/^/#/'</span> /etc/fstab\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/modules-load.d/k8s.conf</span>\nbr_netfilter\nEOF</span>\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/sysctl.d/k8s.conf</span>\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nEOF</span>\n<span class=\"token function\">sudo</span> sysctl --system\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y apt-transport-https ca-certificates <span class=\"token function\">curl</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/apt/sources.list.d/kubernetes.list\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y kubelet kubeadm kubectl\n<span class=\"token function\">sudo</span> apt-mark hold kubelet kubeadm kubectl\n<span class=\"token comment\"># Enter 이후, Ctrl + D</span></code></pre></div>\n<ul>\n<li>실행 권한 설정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">chmod</span> +x install.sh</code></pre></div>\n<ul>\n<li>스크립트 실행 및 설치완료</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sh</span> install.sh</code></pre></div>\n<h2 id=\"lab1---pod-실습\" style=\"position:relative;\"><a href=\"#lab1---pod-%EC%8B%A4%EC%8A%B5\" aria-label=\"lab1   pod 실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lab1 - Pod 실습</h2>\n<h4 id=\"파드를-생성하고-도커허브에서-가져온-도커-파일을-통해-컨테이너-통신이-되는지-확인해-봅시다\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EB%93%9C%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EA%B3%A0-%EB%8F%84%EC%BB%A4%ED%97%88%EB%B8%8C%EC%97%90%EC%84%9C-%EA%B0%80%EC%A0%B8%EC%98%A8-%EB%8F%84%EC%BB%A4-%ED%8C%8C%EC%9D%BC%EC%9D%84-%ED%86%B5%ED%95%B4-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%ED%86%B5%EC%8B%A0%EC%9D%B4-%EB%90%98%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%B4-%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"파드를 생성하고 도커허브에서 가져온 도커 파일을 통해 컨테이너 통신이 되는지 확인해 봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파드를 생성하고, 도커허브에서 가져온 도커 파일을 통해 컨테이너 통신이 되는지 확인해 봅시다.</h4>\n<ul>\n<li>\n<p>[pods.yaml] 파일 작성</p>\n<ul>\n<li>하나의 pod에 2개의 컨테이너 생성</li>\n<li>각각의 포트는 <em>8000, 8080</em></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> container1\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kubetm/p8000\n      <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8000</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> container2\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kubetm/p8080\n      <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span></code></pre></div>\n<ul>\n<li>.yaml 파일로 만들어진 pods 을 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f pods.yaml</code></pre></div>\n<ul>\n<li>생성된 pod 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl get pods -o wide\n$ kubectl describe pods</code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">curl</code> 명령어로 컨테이너 포트 확인</p>\n<ul>\n<li>정상적으로 통신이 되며, 포트를 알려주는 컨테이너 생성이 완료되었습니다.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128293088-d68cb9ed-3424-44dc-bdf3-e8d478cc62d9.JPG\" alt=\"1  파드 생성 후 테스트\"></p>\n<h3 id=\"pod-재생성-시-ip가-바뀌는지-test\" style=\"position:relative;\"><a href=\"#pod-%EC%9E%AC%EC%83%9D%EC%84%B1-%EC%8B%9C-ip%EA%B0%80-%EB%B0%94%EB%80%8C%EB%8A%94%EC%A7%80-test\" aria-label=\"pod 재생성 시 ip가 바뀌는지 test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pod 재생성 시 IP가 바뀌는지 TEST</h3>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>알아두면 좋은 것!</p>\n<p>Pod 재생성 시 <u>Pod의 IP는 자동으로 바뀝니다.</u></p>\n</div>\n</div>\n<ul>\n<li>[replica.yaml] 파일 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ReplicationController\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> replication<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> rc\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> rc\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> container\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kubetm/init</code></pre></div>\n<ul>\n<li>레플리카 컨트롤러 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f replica.yaml</code></pre></div>\n<ul>\n<li>Pod를 삭제 후, 레플리카에 의해 다시 생성된 pod의 ip 정보를 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl delete pod replication-1</code></pre></div>\n<ul>\n<li>검증 - 레플리카 컨트롤러를 통해 재생성 된 파드의 IP 주소가 다른 것을 확인</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128304099-de80e537-fb69-4c0a-a528-e01b809d3ae8.JPG\" alt=\"1  아이피 재생성\"></p>\n<h2 id=\"lab2---pod_label\" style=\"position:relative;\"><a href=\"#lab2---pod_label\" aria-label=\"lab2   pod_label permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lab2 - Pod_Label</h2>\n<h4 id=\"파드-라벨을-통해-service에-묶인-pod를-실습하면서-라벨-개념에-대해-알아봅시다\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EB%93%9C-%EB%9D%BC%EB%B2%A8%EC%9D%84-%ED%86%B5%ED%95%B4-service%EC%97%90-%EB%AC%B6%EC%9D%B8-pod%EB%A5%BC-%EC%8B%A4%EC%8A%B5%ED%95%98%EB%A9%B4%EC%84%9C-%EB%9D%BC%EB%B2%A8-%EA%B0%9C%EB%85%90%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"파드 라벨을 통해 service에 묶인 pod를 실습하면서 라벨 개념에 대해 알아봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파드 라벨을 통해 Service에 묶인 Pod를 실습하면서 라벨 개념에 대해 알아봅시다.</h4>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>알아두면 좋은 것!</p>\n<p>라벨을 사용하는 이유는 <u><strong>목적에 따라 Object들을 따로 분류하고, 편하게 관리하기 위함입니다.</strong></u></p>\n</div>\n</div>\n<ul>\n<li>\n<p>[Pods2.yaml] 파일 생성</p>\n<ul>\n<li>총 6개의 라벨 생성</li>\n<li>web, db, server - dev버전, production 버전</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span>1(2<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>6)\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> web(db<span class=\"token punctuation\">,</span> server)\n    <span class=\"token key atrule\">lo</span><span class=\"token punctuation\">:</span> dev(production)\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> container\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kubetm/init</code></pre></div>\n<ul>\n<li>Pods 생성 및 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f pods2.yaml\n$ kubectl get pod</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128293090-8da13af2-865f-4eab-a2d9-d3d2133417ad.JPG\" alt=\"2  pods 확인\"></p>\n<ul>\n<li>[Service Object yaml] 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> svc<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> web\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span></code></pre></div>\n<ul>\n<li>Service 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl create -f  service.yaml</code></pre></div>\n<ul>\n<li>Service 라벨링으로 묶인 Pods들을 조회</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128301424-d4f9b3dc-143c-4e7c-a2ce-c185806b8461.JPG\" alt=\"1  서비스 오브젝트 라벨 확인\">\n<img src=\"https://user-images.githubusercontent.com/66216102/128301428-27aadd53-caef-4934-934e-7a9b8da4d1fa.JPG\" alt=\"1-1  서비스 오브젝트 라벨 확인\"></p>\n<h2 id=\"lab3---pod_nodeselector\" style=\"position:relative;\"><a href=\"#lab3---pod_nodeselector\" aria-label=\"lab3   pod_nodeselector permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lab3 - Pod_NodeSelector</h2>\n<h4 id=\"워커노드를-스케줄러가-정해주는-것-대신-노드라벨을-통해-워커-노드를-직접-지정-후-파드를-배치해-봅시다\" style=\"position:relative;\"><a href=\"#%EC%9B%8C%EC%BB%A4%EB%85%B8%EB%93%9C%EB%A5%BC-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%9F%AC%EA%B0%80-%EC%A0%95%ED%95%B4%EC%A3%BC%EB%8A%94-%EA%B2%83-%EB%8C%80%EC%8B%A0-%EB%85%B8%EB%93%9C%EB%9D%BC%EB%B2%A8%EC%9D%84-%ED%86%B5%ED%95%B4-%EC%9B%8C%EC%BB%A4-%EB%85%B8%EB%93%9C%EB%A5%BC-%EC%A7%81%EC%A0%91-%EC%A7%80%EC%A0%95-%ED%9B%84-%ED%8C%8C%EB%93%9C%EB%A5%BC-%EB%B0%B0%EC%B9%98%ED%95%B4-%EB%B4%85%EC%8B%9C%EB%8B%A4\" aria-label=\"워커노드를 스케줄러가 정해주는 것 대신 노드라벨을 통해 워커 노드를 직접 지정 후 파드를 배치해 봅시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>워커노드를 스케줄러가 정해주는 것 대신 노드라벨을 통해 워커 노드를 직접 지정 후 파드를 배치해 봅시다.</h4>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>들어가기 전에..</p>\n<p>워커 노드를 직접 지정하는 것이 아니라면 스케줄러는 각각의 노드들의 자원을 점수로 환산해<br>\n<u><strong>가장 좋은 점수를 받은 워커 노드에 자원을 자동으로 배치해 줍니다.</strong></u></p>\n</div>\n</div>\n<ul>\n<li>\n<p>현재 노드의 라벨들을 확인</p>\n<ul>\n<li>기본적으로 설정된 라벨이 있습니다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl get nodes --show-labels</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128293093-91875ef7-de9b-486a-9c3e-ea0491b325a0.JPG\" alt=\"3  nodeselector 확인\"></p>\n<ul>\n<li>yaml 파일에 <em>slavenod - nodeSelector</em>의 라벨을 설정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span><span class=\"token number\">7</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">nodeSelector</span><span class=\"token punctuation\">:</span> kubernetes.io/hostname=slavenod <span class=\"token comment\"># 이쪽 부분</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> container\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kubetm/init</code></pre></div>\n<ul>\n<li>검증 - <em>slavenod</em>에 생성되는 것을 확인할 수 있습니다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/128293094-97f80d04-7092-43b0-8a69-fc180a13789c.JPG\" alt=\"4  nodeselector 설정\"></p>","frontmatter":{"title":"#1 Kubernetes Pod","date":"August 04, 2021","category":"🧭 Kubernetes"}}},"pageContext":{"slug":"/Kubernetes/1.Kubernetes Pod/","previous":{"fields":{"slug":"/docker/[따배도] - 컨테이너 네트워크/"},"frontmatter":{"title":"[따배도] - 컨테이너 네트워크","category":"🐳 docker","draft":false}},"next":{"fields":{"slug":"/linux/리눅스 스토리지 마운트/"},"frontmatter":{"title":"리눅스 스토리지 마운트","category":"🖥️ linux","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}