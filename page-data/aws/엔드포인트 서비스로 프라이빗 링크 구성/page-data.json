{"componentChunkName":"component---src-templates-blog-post-js","path":"/aws/엔드포인트 서비스로 프라이빗 링크 구성/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"7ca59e40-e77e-5a74-b608-f04a94a4773b","excerpt":"엔드포인트 서비스 기능을 활용하여, 사용자가 생성한 VPC와 프라이빗 연결을 확인하고 통신되는 과정을 실습 실습과정 기본 환경 구성 CloudFormation 적용 생성 자원 확인 기본 환경 검증 엔드포인트 서비스 생성 및 연결 엔드포인트 서비스 생성 인터페이스 엔드포인트 생성 및 연결 엔드포인트 서비스 검증 자원삭제 기본 환경 구성 이전 실습 방법 참고 AWS 인프라 자원을 생성할 YAML 파일 VPC : 2개 (My, Custom) 퍼블릭 서브넷 2개 (My, Custom) 라우팅 테이블…","html":"<p>엔드포인트 서비스 기능을 활용하여, 사용자가 생성한 VPC와 프라이빗 연결을 확인하고 통신되는 과정을 실습</p>\n<h2 id=\"실습과정\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5%EA%B3%BC%EC%A0%95\" aria-label=\"실습과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습과정</h2>\n<h3 id=\"기본-환경-구성\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\"기본 환경 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h3>\n<ol>\n<li>CloudFormation 적용</li>\n<li>생성 자원 확인</li>\n<li>기본 환경 검증</li>\n</ol>\n<h3 id=\"엔드포인트-서비스-생성-및-연결\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%97%B0%EA%B2%B0\" aria-label=\"엔드포인트 서비스 생성 및 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트 서비스 생성 및 연결</h3>\n<ol>\n<li>엔드포인트 서비스 생성</li>\n<li>인터페이스 엔드포인트 생성 및 연결</li>\n</ol>\n<h3 id=\"엔드포인트-서비스-검증\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B2%80%EC%A6%9D\" aria-label=\"엔드포인트 서비스 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트 서비스 검증</h3>\n<h3 id=\"자원삭제\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90%EC%82%AD%EC%A0%9C\" aria-label=\"자원삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원삭제</h3>\n<h2 id=\"기본-환경-구성-1\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-1\" aria-label=\"기본 환경 구성 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h2>\n<ul>\n<li>이전 실습 방법 참고</li>\n<li>\n<p>AWS 인프라 자원을 생성할 [YAML 파일]</p>\n<ul>\n<li>VPC : 2개 (My, Custom)</li>\n<li>퍼블릭 서브넷 2개 (My, Custom)</li>\n<li>라우팅 테이블 2개 (My, Custom)</li>\n<li>인터넷 게이트웨이 2개 (My, Custom)</li>\n<li>퍼블릭 EC2 인스턴스 3개 (My, Custom1, Custom2)</li>\n<li>네트워크 로드밸랜서(NLB) 1개 (타겟 - Custom1, Custom2)</li>\n</ul>\n<blockquote>\n<p>NLB: 데이터의 부하를 분산해 주는 역할의 서비스 / 인스턴스로 데이터를 분산하여 전달</p>\n</blockquote>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">Parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> Name of an existing EC2 KeyPair to enable SSH access to the instances. Linked to AWS Parameter\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyPair<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyName\n    <span class=\"token key atrule\">ConstraintDescription</span><span class=\"token punctuation\">:</span> must be the name of an existing EC2 KeyPair.\n  <span class=\"token key atrule\">LatestAmiId</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> (DO NOT CHANGE)\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'AWS::SSM::Parameter::Value&lt;AWS::EC2::Image::Id>'</span>\n    <span class=\"token key atrule\">Default</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2'</span>\n    <span class=\"token key atrule\">AllowedValues</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> /aws/service/ami<span class=\"token punctuation\">-</span>amazon<span class=\"token punctuation\">-</span>linux<span class=\"token punctuation\">-</span>latest/amzn2<span class=\"token punctuation\">-</span>ami<span class=\"token punctuation\">-</span>hvm<span class=\"token punctuation\">-</span>x86_64<span class=\"token punctuation\">-</span>gp2\n\n<span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">MyVPC</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPC\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/16\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> MyVPC\n\n  <span class=\"token key atrule\">CustomVPC</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPC\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 20.0.0.0/16\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CustomVPC\n\n  <span class=\"token key atrule\">MyIGW</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>InternetGateway\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>IGW\n\n  <span class=\"token key atrule\">CustomIGW</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>InternetGateway\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>IGW\n\n  <span class=\"token key atrule\">MyIGWAttachment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPCGatewayAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InternetGatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyIGW\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n\n  <span class=\"token key atrule\">CustomIGWAttachment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPCGatewayAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InternetGatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomIGW\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomVPC\n\n  <span class=\"token key atrule\">MyPublicRT</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>RouteTable\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>RT\n\n  <span class=\"token key atrule\">MyDefaultPublicRoute</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Route\n    <span class=\"token key atrule\">DependsOn</span><span class=\"token punctuation\">:</span> MyIGWAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicRT\n      <span class=\"token key atrule\">DestinationCidrBlock</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n      <span class=\"token key atrule\">GatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyIGW\n\n  <span class=\"token key atrule\">CustomPublicRT</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>RouteTable\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>RT\n\n  <span class=\"token key atrule\">CustomDefaultPublicRoute</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Route\n    <span class=\"token key atrule\">DependsOn</span><span class=\"token punctuation\">:</span> CustomIGWAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomPublicRT\n      <span class=\"token key atrule\">DestinationCidrBlock</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n      <span class=\"token key atrule\">GatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomIGW\n\n  <span class=\"token key atrule\">MyPublicSN</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>SN\n\n  <span class=\"token key atrule\">CustomPublicSN</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 20.0.0.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>SN\n\n  <span class=\"token key atrule\">MyPublicSNRouteTableAssociation</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN\n\n  <span class=\"token key atrule\">CustomPublicSNRouteTableAssociation</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomPublicRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomPublicSN\n\n  <span class=\"token key atrule\">WebSG</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SecurityGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">GroupDescription</span><span class=\"token punctuation\">:</span> WebSG\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">GroupName</span><span class=\"token punctuation\">:</span> WebSG\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> WebSG\n      <span class=\"token key atrule\">SecurityGroupIngress</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n\n  <span class=\"token key atrule\">CustomWebSG</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SecurityGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">GroupDescription</span><span class=\"token punctuation\">:</span> CustomSG\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomVPC\n      <span class=\"token key atrule\">GroupName</span><span class=\"token punctuation\">:</span> CustomSG\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>WebSG\n      <span class=\"token key atrule\">SecurityGroupIngress</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n\n  <span class=\"token key atrule\">MyEC2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>EC2\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> WebSG\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n  <span class=\"token key atrule\">CustomWeb1EC2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>WEB<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomPublicSN\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> CustomWebSG\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">UserData</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">Fn::Base64</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Sub</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          #!/bin/bash\n          (\n          echo \"qwe123\"\n          echo \"qwe123\"\n          ) | passwd --stdin root\n          sed -i \"s/^PasswordAuthentication no/PasswordAuthentication yes/g\" /etc/ssh/sshd_config\n          sed -i \"s/^#PermitRootLogin yes/PermitRootLogin yes/g\" /etc/ssh/sshd_config\n          service sshd restart\n          yum install -y httpd\n          systemctl start httpd &amp;&amp; systemctl enable httpd\n          echo \"&lt;html>&lt;h1>Endpoint Service Lab - CloudNeta Web Server 1&lt;/h1>&lt;/html>\" > /var/www/html/index.html</span>\n\n  <span class=\"token key atrule\">CustomWeb2EC2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>WEB<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomPublicSN\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> CustomWebSG\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">UserData</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">Fn::Base64</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Sub</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          #!/bin/bash\n          (\n          echo \"qwe123\"\n          echo \"qwe123\"\n          ) | passwd --stdin root\n          sed -i \"s/^PasswordAuthentication no/PasswordAuthentication yes/g\" /etc/ssh/sshd_config\n          sed -i \"s/^#PermitRootLogin yes/PermitRootLogin yes/g\" /etc/ssh/sshd_config\n          service sshd restart\n          yum install -y httpd\n          systemctl start httpd &amp;&amp; systemctl enable httpd\n          echo \"&lt;html>&lt;h1>Endpoint Service Lab - CloudNeta Web Server 2&lt;/h1>&lt;/html>\" > /var/www/html/index.html</span>\n\n  <span class=\"token key atrule\">CustomNLBTG</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>TargetGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Name</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>NLB<span class=\"token punctuation\">-</span>TG\n      <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">Protocol</span><span class=\"token punctuation\">:</span> TCP\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomVPC\n      <span class=\"token key atrule\">Targets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Id</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomWeb1EC2\n          <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Id</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomWeb2EC2\n          <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n\n  <span class=\"token key atrule\">CustomNLB</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>LoadBalancer\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> network\n      <span class=\"token key atrule\">Scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n      <span class=\"token key atrule\">Subnets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> CustomPublicSN\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> Custom<span class=\"token punctuation\">-</span>NLB\n\n  <span class=\"token key atrule\">NLBListener</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Listener\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">DefaultActions</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> forward\n          <span class=\"token key atrule\">TargetGroupArn</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomNLBTG\n      <span class=\"token key atrule\">LoadBalancerArn</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CustomNLB\n      <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">Protocol</span><span class=\"token punctuation\">:</span> TCP</code></pre></div>\n<h3 id=\"기본-환경-검증\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B2%80%EC%A6%9D\" aria-label=\"기본 환경 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 검증</h3>\n<ul>\n<li>MyVPC에 존재하는 EC2 인스턴스에서 CustomVPC에 존재하는 웹 서버 인스턴스로 통신을 확인</li>\n<li>\n<p>NLB 자원에 대한 정상적인 서비스 상태를 확인 후 검증</p>\n<ul>\n<li>경로: 서비스 - EC2 - 로드밸런싱 - 대상 그룹 - 대상 그룹 선택</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131585-f8220600-c86a-11eb-95d2-73f303a6ef3d.JPG\" alt=\"1  로드밸런싱 인스턴스 상태확인\"></p>\n<ul>\n<li>\n<p>실습을 위해 Custom-NLB의 DNS 주소 먼저 확인</p>\n<ul>\n<li>경로: 서비스 - EC2 - 로드밸런싱 - 로드밸런서</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131587-f8ba9c80-c86a-11eb-85c8-d8acc293cffe.JPG\" alt=\"1-1  로드밸런싱 디엔에스 주소확인\"></p>\n<ul>\n<li>\n<p><em>MyVPC</em>에서 <em>CustomVPC - NLB</em> DNS의 IP주소 확인, 웹 통신 확인</p>\n<ul>\n<li>모두 퍼블릭 서브넷에 존재하기 때문에 <strong>인터넷 게이트웨이를 통한 외부 인터넷으로 통신한 것</strong></li>\n<li>현재 MyVPC의 서브넷 대역은 <em>10.0.0.0/24</em> 임</li>\n<li>프라이빗 통신을 위해서 <strong>엔드포인트를 활용한 <u>프라이빗 링크</u>를 통해 해결 가능</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131590-f9533300-c86a-11eb-8530-c72ca2cc3273.JPG\" alt=\"1-2 도메인 네임 아이피확인, 컬명령어로 웹통신 확인\"></p>\n<h2 id=\"엔드포인트-서비스-생성-및-연결-1\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%97%B0%EA%B2%B0-1\" aria-label=\"엔드포인트 서비스 생성 및 연결 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트 서비스 생성 및 연결</h2>\n<h3 id=\"엔드포인트-서비스-생성\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"엔드포인트 서비스 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트 서비스 생성</h3>\n<ul>\n<li>엔드포인트 서비스를 생성하여 VPC간 프라이빗 링크 연결을 위한 환경 구성</li>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 엔드포인트 서비스 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131593-f9ebc980-c86a-11eb-898d-58ca33b8471c.JPG\" alt=\"1-3 엔드포인트서비스 생성\"></p>\n<ul>\n<li>\n<p>엔드포인트 서비스 생성 확인</p>\n<ul>\n<li>엔드포인트 서비스를 생성하여 CustomVPC의 NLB와 연결완료</li>\n<li>이를 통해 <strong>인터페이스 엔드포인트와 프라이빗 링크</strong>를 연결할 수 있음</li>\n<li>이전 실습의 차이점은 <strong>이전에는 AWS 서비스 엔드포인트 연결에 대한 엔드포인트 실습</strong>이고,</li>\n<li>해당 실습은 <strong>사용자가 만든 VPC에 대한 엔드포인트 연결에 대한 엔드포인트 실습</strong>입니다.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131596-fa846000-c86a-11eb-9375-30c8dcfe0f8b.JPG\" alt=\"1-4 엔드포인트 서비스 생성확인\"></p>\n<h3 id=\"인터페이스-엔드포인트-생성-및-연결\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%97%B0%EA%B2%B0\" aria-label=\"인터페이스 엔드포인트 생성 및 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터페이스 엔드포인트 생성 및 연결</h3>\n<ul>\n<li>엔드포인트 서비스를 통해 CustomVPC-NLB에 연결했다면, MyVPC에 인터페이스 엔드포인트를 생성하여 연결해야합니다.</li>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 엔드포인트 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131599-fa846000-c86a-11eb-8dd5-3a736da847c1.JPG\" alt=\"1-5 엔드포인트끼리 연결을 위한 엔드포인트생성\"></p>\n<ul>\n<li>하단에 내려가서 보안그룹 선택</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131600-fb1cf680-c86a-11eb-9886-8270a02e52f3.JPG\" alt=\"1-5-1 엔드포인트끼리 연결을 위한 엔드포인트생성\"></p>\n<ul>\n<li>\n<p>생성된 엔드포인트 확인</p>\n<ul>\n<li>수락 대기 중인 <strong>엔드포인트 서비스를 수락</strong>해줘야 사용 가능</li>\n<li>약 2분 후 사용 가능으로 변경</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131603-fbb58d00-c86a-11eb-963d-0fbab5d6cf4c.JPG\" alt=\"1-6엔드포인트생성 확인\"></p>\n<ul>\n<li>엔드포인트 서비스에서 수락을 통해 엔드포인트 연결</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131606-fc4e2380-c86a-11eb-8231-97c0ab673635.JPG\" alt=\"1-7 엔드포인트서비스 수락\"></p>\n<h2 id=\"엔드포인트-서비스-검증-1\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B2%80%EC%A6%9D-1\" aria-label=\"엔드포인트 서비스 검증 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트 서비스 검증</h2>\n<ul>\n<li>\n<p>MyVPC의 EC2 인스턴스에서 통신을 확인</p>\n<ul>\n<li>확인에 앞서 <strong>엔드포인트 DNS 이름을 확인</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131608-fc4e2380-c86a-11eb-9fed-4f0bb65828ab.JPG\" alt=\"1-8 엔드포인트 도메인네임 주소 복사\"></p>\n<ul>\n<li>\n<p><code class=\"language-text\">dig</code>, <code class=\"language-text\">curl</code> 명령어를 DNS의 주소를 통해 검증</p>\n<ul>\n<li>서브넷 대역대가 <em>MyVPC</em>의 대역대로 달라진 것을 확인할 수 있음(10.0.0.x)</li>\n<li>인터넷 게이트웨이가 아닌 <strong><u>엔드포인트 서비스의 프라이빗 링크</u></strong>를 통해 통신 확인</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/121131579-f6f0d900-c86a-11eb-83b6-99b4063c1018.JPG\" alt=\"1-9 엔드포인트(프라이빗 링크) 통신확인\"></p>\n<h2 id=\"자원-삭제\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C\" aria-label=\"자원 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원 삭제</h2>\n<ul>\n<li>엔드포인트 삭제</li>\n<li>엔드포인트 서비스 삭제</li>\n<li>CloudFormation 스택 삭제</li>\n</ul>","frontmatter":{"title":"엔드포인트 서비스로 프라이빗 링크 구성","date":"June 08, 2021","category":"☁️ aws"}}},"pageContext":{"slug":"/aws/엔드포인트 서비스로 프라이빗 링크 구성/","previous":{"fields":{"slug":"/network/[후니]_3. TCP,IP, DHCP, 망분리/"},"frontmatter":{"title":"[후니] 3. TCP/IP, DHCP, 망분리","category":"🌐 network","draft":false}},"next":{"fields":{"slug":"/aws/배치 그룹 & 메타데이터/"},"frontmatter":{"title":"배치 그룹 & 메타데이터","category":"☁️ aws","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}