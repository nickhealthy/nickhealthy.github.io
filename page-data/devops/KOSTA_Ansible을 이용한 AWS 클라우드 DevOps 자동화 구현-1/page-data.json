{"componentChunkName":"component---src-templates-blog-post-js","path":"/devops/KOSTA_Ansible을 이용한 AWS 클라우드 DevOps 자동화 구현-1/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c411e64b-ab22-5192-9fa9-7be237d79728","excerpt":"Ansible의 기본적인 개념과 용어 애드혹, 플레이북의 사용 방법에 대해 알아봅시다. Ansible 소개 IaC(Ansible…","html":"<p>Ansible의 기본적인 개념과 용어 애드혹, 플레이북의 사용 방법에 대해 알아봅시다.</p>\n<h2 id=\"ansible-소개\" style=\"position:relative;\"><a href=\"#ansible-%EC%86%8C%EA%B0%9C\" aria-label=\"ansible 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ansible 소개</h2>\n<ul>\n<li>\n<p>IaC(Ansible) - 코드로써 인프라를 다루는 도구입니다.</p>\n<ul>\n<li><strong><u>환경의 배포와 구성을 규격화 된 코드로 정의해 사용하는 것을 의미</u></strong>합니다.</li>\n</ul>\n</li>\n<li>\n<p>여러 개의 서버를 효율적으로 관리할 수 있게 해주는 환경 구성 자동화 도구입니다.</p>\n<ul>\n<li>인프라의 상태를 코드로 작성하고, 이를 <u><strong>모든 서버에 배포함으로써 특정 환경을 동일하게 유지할 수 있도록 돕는 도구</strong></u></li>\n</ul>\n</li>\n<li>\n<p>앤서블은 플레이북이라는 파일에 실행할 구성을 선언해 놓으면, 필요할 때 마다 자동으로 실행시킬 수 있는 것이 가장 큰 특징입니다.</p>\n<ul>\n<li>예를 들어, 웹 서버의 구성과, DB 서버의 구성을 선언해 놓으면 관리자들은 필요할 때마다 그 구성대로 서버의 설정을 배포할 수 있게 해주는 것입니다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>AWS에서의 비슷한 자동화 도구로 <em>OpsWorks</em> 서비스가 존재하고,<br>\n이는 chef, puppet(openstack - packstack) 기술로 이루어져 있습니다.</p>\n</blockquote>\n<h3 id=\"용어-정리\" style=\"position:relative;\"><a href=\"#%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC\" aria-label=\"용어 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>용어 정리</h3>\n<ul>\n<li>앤서블은 크게 3가지인 <u>인벤토리, 플레이북, 모듈</u>로 이루어져 있습니다.</li>\n<li>\n<p>인벤토리 : 어디서 수행할 것인지?</p>\n<ul>\n<li>관리해야 되는 서버 리스트</li>\n</ul>\n</li>\n<li>플레이북 : 무엇을 수행할 것인지?</li>\n<li>\n<p>모듈 : 어떻게 수행할 것인지? 를 정의합니다.</p>\n<ul>\n<li>즉, 보다 효율적으로 운영하기 위한 앤서블이 정의한 모듈이 있습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"인벤토리inventory\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%ACinventory\" aria-label=\"인벤토리inventory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인벤토리(inventory)</h3>\n<ul>\n<li>\n<p>인벤토리는 앤서블에 의해 <u>제어될 대상</u>을 정의합니다.</p>\n<ul>\n<li>인벤토리를 만들어 놓지 않으면 관리할 대상이 없기 때문에 앤서블을 사용할 수 없습니다.</li>\n</ul>\n</li>\n<li>일반으로 <u>hosts.ini</u> 파일에 정의해 사용합니다.</li>\n<li>\n<p>여러 서버들의 <u>SSH 접근 IP, 포트, 사용자와 같은 접속 정보를 정의</u>합니다.</p>\n<ul>\n<li>또한 관리할 그룹, 제어할 서버 이름을 정의해서 사용할 수 있습니다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"플레이북playbook\" style=\"position:relative;\"><a href=\"#%ED%94%8C%EB%A0%88%EC%9D%B4%EB%B6%81playbook\" aria-label=\"플레이북playbook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>플레이북(playbook)</h3>\n<ul>\n<li>플레이북(각본)은 인벤토리 파일에서 정의한 대상들이 <u>무엇을 수행할 것인지 정의하는 역할</u>입니다.</li>\n<li>데이터 정의 형식은 <code class=\"language-text\">yaml</code> 포맷으로 설정합니다.</li>\n<li>\n<p>플레이북은 앤서블의 핵심 역할을 하는 것이며, 단독으로 사용하는 것이 아닌, <u>인벤토리와 플레이북의 조합으로 사용</u>됩니다.</p>\n<ul>\n<li><code class=\"language-text\">name</code>: 플레이명</li>\n<li><code class=\"language-text\">hosts</code> : 인벤토리에 정의한 그룹명 지정 또는 관리할 서버의 대상을 작성</li>\n<li><code class=\"language-text\">become</code> : 권한 상승 역할(sudo)</li>\n<li><code class=\"language-text\">tasks</code> : 실제 어떤 일을 수행할 것인지 해야할 일들을 정의</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"모듈module\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%88module\" aria-label=\"모듈module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모듈(Module)</h3>\n<ul>\n<li>\n<p>묘듈은 플레이북에서 <code class=\"language-text\">task</code>가 <u>어떻게 수행될지를 정의하는 요소</u>입니다.</p>\n<ul>\n<li>타켓 호스트로 실제 작업을 처리하는 단위로 이 Module이라는 개념을 사용합니다.</li>\n</ul>\n</li>\n<li>\n<p>앤서블은 많은 모듈을 보유하고 있고 해당 모듈을 이용해 사용하는 것입니다.</p>\n<ul>\n<li>예를 들어, yum 명령어를 통해 패키지를 설치할 때 앤서블에서는 <u>yum 모듈</u>을 정의하고 사용하면 되는 방식입니다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>참고하기</p>\n<p>앤서블에서 <u>Agent의 역할을 수행하는 것은 python 입니다.</u><br>\n즉, python 설치는 필수적으로 필요하지만 리눅스 환경에서는 파이썬이 기본적으로 설치되어 있기 때문에 앤서블은 agent가 없다고도 말합니다.</p>\n</div>\n</div>\n<h2 id=\"lab-1---앤서블-코어-설치-및-애드혹-명령어-실습\" style=\"position:relative;\"><a href=\"#lab-1---%EC%95%A4%EC%84%9C%EB%B8%94-%EC%BD%94%EC%96%B4-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%95%A0%EB%93%9C%ED%98%B9-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%8B%A4%EC%8A%B5\" aria-label=\"lab 1   앤서블 코어 설치 및 애드혹 명령어 실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LAB 1 - 앤서블 코어 설치 및 애드혹 명령어 실습</h2>\n<h4 id=\"ansible-core-server01centos-server02우분투-총-3대의-서버-환경을-구축-후-앤서블-다뤄보기\" style=\"position:relative;\"><a href=\"#ansible-core-server01centos-server02%EC%9A%B0%EB%B6%84%ED%88%AC-%EC%B4%9D-3%EB%8C%80%EC%9D%98-%EC%84%9C%EB%B2%84-%ED%99%98%EA%B2%BD%EC%9D%84-%EA%B5%AC%EC%B6%95-%ED%9B%84-%EC%95%A4%EC%84%9C%EB%B8%94-%EB%8B%A4%EB%A4%84%EB%B3%B4%EA%B8%B0\" aria-label=\"ansible core server01centos server02우분투 총 3대의 서버 환경을 구축 후 앤서블 다뤄보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ANSIBLE-CORE, server01(Centos), server02(우분투) 총 3대의 서버 환경을 구축 후 앤서블 다뤄보기</h4>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>애드혹이란?</p>\n<p>애드혹은 라틴어로서 “이것을 위해”라는 뜻을 가지고 있고, <u>명령어 한줄 단위로 작업하는 것을 말합니다.</u><br>\n한줄로 처리하기 번거롭고, <strong>자주 있을 반복적인 작업은 playbook 을 활용해야 합니다.</strong><br>\n애드혹의 명령어 사용법은 <code class=\"language-text\">ansible &quot;all 또는 인벤토리&quot; -m &quot;모듈명&quot; [-a] [구문 명령어]</code></p>\n</div>\n</div>\n<ul>\n<li>실습 환경에 맞게 호스트 이름 변경</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ hostnamectl set-hostname <span class=\"token string\">\"호스트명 지정\"</span></code></pre></div>\n<ul>\n<li>\n<p>epel repo 등록하기</p>\n<ul>\n<li>yum repo에서 직접 관리하는 곳 외에 <em>epel repo</em>에 ensible이 존재하기 때문에 레포를 등록해줌</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> epel-release -y</code></pre></div>\n<ul>\n<li>epel repo에서 ansible 패키지 다운로드</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yum --enablerepo<span class=\"token operator\">=</span>epel -y <span class=\"token function\">install</span> ansible</code></pre></div>\n<ul>\n<li>앤서블 버전 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible --version</code></pre></div>\n<ul>\n<li>\n<p>인벤토리 설정</p>\n<ul>\n<li>관리할 서버의 리스트를 맨 하단에 추가</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> /etc/ansible/hosts\n\n<span class=\"token punctuation\">..</span>.\nansible-ip 등록 <span class=\"token comment\"># 현재는 실습상 ansible도 하나의 관리할 서버로 가정하고 넣었음</span>\nserver01-ip 등록\nserver02-ip 등록</code></pre></div>\n<h3 id=\"애드혹---ping-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---ping-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   ping 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - ping 모듈</h3>\n<ul>\n<li>\n<p>등록한 서버의 ping 모듈을 통한 테스트</p>\n<ul>\n<li><code class=\"language-text\">-m</code> 옵션은 모듈을 뜻하고, 여기서 <code class=\"language-text\">ping</code> 자체가 모듈 이름임(즉, <u>ICMP 프로토콜을 이용하는 것이 아닙니다.</u>)</li>\n<li>첫 SSH 접속을 위한 fingerprint을 한 뒤, <u>Permission Denied</u>가 나오는데 <u>비밀번호를 입력하지 않아서</u> 그렇습니다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m <span class=\"token function\">ping</span></code></pre></div>\n<ul>\n<li>\n<p>비밀번호를 입력하기 위해 <code class=\"language-text\">-k</code> 옵션 부여 후, 비밀번호 입력</p>\n<ul>\n<li><code class=\"language-text\">-k</code> 옵션은 ask를 뜻함</li>\n<li>정상적으로 잘 작동된 모습</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m <span class=\"token function\">ping</span> -k</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497722-c2075551-73bc-4063-bd35-e68c22afedff.JPG\" alt=\"1  핑테스트\"></p>\n<h4 id=\"번외-1---비밀번호-인가-절차-없이-키를-등록해-인벤토리의-서버에-진입하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-1---%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%9D%B8%EA%B0%80-%EC%A0%88%EC%B0%A8-%EC%97%86%EC%9D%B4-%ED%82%A4%EB%A5%BC-%EB%93%B1%EB%A1%9D%ED%95%B4-%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%AC%EC%9D%98-%EC%84%9C%EB%B2%84%EC%97%90-%EC%A7%84%EC%9E%85%ED%95%98%EA%B8%B0\" aria-label=\"번외 1   비밀번호 인가 절차 없이 키를 등록해 인벤토리의 서버에 진입하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번외 1 - 비밀번호 인가 절차 없이 키를 등록해 인벤토리의 서버에 진입하기</h4>\n<ul>\n<li>\n<p>RSA key 만들기</p>\n<ul>\n<li><code class=\"language-text\">ssh-keygen</code> : key generate</li>\n<li><code class=\"language-text\">-t</code> : 타입을 뜻함</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-keygen -t rsa</code></pre></div>\n<ul>\n<li>만들어진 키를 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ls</span> -al .ssh/</code></pre></div>\n<ul>\n<li>만들어진 키를 인벤토리 서버에 복사</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-copy-id root@<span class=\"token string\">\"서버ip\"</span></code></pre></div>\n<ul>\n<li>\n<p>검증 - 패스워드 없이 키 방식으로 접속이 되는 것을 확인</p>\n<ul>\n<li>패스워드 치지 않고 접속이 잘 됩니다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m <span class=\"token function\">ping</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497727-568023ea-438d-4f5e-bc8f-639122e034ed.JPG\" alt=\"2  알에스에이 키\"></p>\n<h4 id=\"번외-2---hosts-파일의-인벤토리에-등록하지-않고-따로-인벤토리-정보를-가진-파일을-만들어-관리하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-2---hosts-%ED%8C%8C%EC%9D%BC%EC%9D%98-%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%AC%EC%97%90-%EB%93%B1%EB%A1%9D%ED%95%98%EC%A7%80-%EC%95%8A%EA%B3%A0-%EB%94%B0%EB%A1%9C-%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%AC-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EA%B0%80%EC%A7%84-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"번외 2   hosts 파일의 인벤토리에 등록하지 않고 따로 인벤토리 정보를 가진 파일을 만들어 관리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번외 2 - <em>hosts</em> 파일의 인벤토리에 등록하지 않고, 따로 인벤토리 정보를 가진 파일을 만들어 관리하기</h4>\n<ul>\n<li>인벤토리 서버의 ip주소 정보가 있는 파일 만들기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"192.168.56.101\"</span> <span class=\"token operator\">>></span> inventory.list\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"192.168.56.113\"</span> <span class=\"token operator\">>></span> inventory.list\n\n<span class=\"token function\">cat</span> inventory.list</code></pre></div>\n<ul>\n<li>\n<p>해당 파일에 있는 정보를 가지고 ping 모듈 테스트</p>\n<ul>\n<li><code class=\"language-text\">-i</code> 옵션 :</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -i inventory.list -m <span class=\"token function\">ping</span></code></pre></div>\n<ul>\n<li>특정 인벤토리의 서버ip만 가지고 테스트</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible <span class=\"token number\">192.168</span>.56.113 -i inventory.list -m <span class=\"token function\">ping</span></code></pre></div>\n<h4 id=\"번외-3---code-classlanguage-text--list-hostscode-명령어를-통해-관리하고-있는-호스트의-ip주소를-확인하기\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-3---code-classlanguage-text--list-hostscode-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%ED%86%B5%ED%95%B4-%EA%B4%80%EB%A6%AC%ED%95%98%EA%B3%A0-%EC%9E%88%EB%8A%94-%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%9D%98-ip%EC%A3%BC%EC%86%8C%EB%A5%BC-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"번외 3   code classlanguage text  list hostscode 명령어를 통해 관리하고 있는 호스트의 ip주소를 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번외 3 - <code class=\"language-text\">--list-hosts</code> 명령어를 통해 관리하고 있는 호스트의 ip주소를 확인하기</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible <span class=\"token number\">192.168</span>.56.113 -i inventory.list -m <span class=\"token function\">ping</span> --list-hosts</code></pre></div>\n<h3 id=\"애드혹---shell-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---shell-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   shell 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - Shell 모듈</h3>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>참고하기</p>\n<p><code class=\"language-text\">CHANGE</code> 표시가 뜨는 것은 <u><strong>어떤 변화가 있을 때</strong></u>를 나타냅니다.</p>\n</div>\n</div>\n<ul>\n<li>\n<p><code class=\"language-text\">uptime</code> 명령어를 통해 인벤토리 서버의 시간 확인하기</p>\n<ul>\n<li><code class=\"language-text\">-a</code> 옵션 : <u>리눅스 명령어 구문 입력을 의미함</u></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m shell -a <span class=\"token string\">\"uptime\"</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">df -h</code> 명령어를 통해 현재 인벤토리 서버의 디스크 사용량 확인하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m shell -a <span class=\"token string\">\"df -h\"</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497732-2486cf97-ea67-4f5c-927e-d702aa8c20f3.JPG\" alt=\"3  shell 모듈 명령어\"></p>\n<ul>\n<li>\n<p>위에서 <code class=\"language-text\">key-keygen</code> 명령어를 통해 만들어진 키가 잘 들어있는지 확인하는 등 응용이 가능합니다.</p>\n<ul>\n<li><em>authorized</em>keys_ 는 public 키입니다.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497729-c0fca993-dd19-421a-985b-b5ad723be857.JPG\" alt=\"2-1  확인\"></p>\n<h3 id=\"애드혹---user-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---user-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   user 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - User 모듈</h3>\n<ul>\n<li>인벤토리 서버에 유저 추가하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m user -a <span class=\"token string\">\"name=kosta\"</span></code></pre></div>\n<ul>\n<li>검증 - 사용자 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m shell -a <span class=\"token string\">\"tail -n 1 /etc/passwd\"</span></code></pre></div>\n<ul>\n<li>\n<p>인벤토리 서버에 추가한 유저 삭제하기</p>\n<ul>\n<li><u><code class=\"language-text\">absent</code> 명령어는 삭제하는 명령어임</u></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m user -a <span class=\"token string\">\"name=kosta state=absent\"</span>\n<span class=\"token comment\"># 확인</span>\n$ ansible all -m shell -a <span class=\"token string\">\"tail -n 1 /etc/passwd\"</span></code></pre></div>\n<h3 id=\"애드혹---yum-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---yum-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   yum 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - yum 모듈</h3>\n<ul>\n<li>\n<p>인벤토리 서버에 yum 모듈을 사용해 설치하기</p>\n<ul>\n<li><u><code class=\"language-text\">present</code> 명령어는 추가하는 명령어</u></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m yum -a <span class=\"token string\">\"name=httpd state=present\"</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">curl</code> 명령어를 통해 <em>index.html</em> 파일을 만들기</p>\n<ul>\n<li><code class=\"language-text\">-o</code> 옵션은 output의 의미</li>\n<li>해당 명령어를 통해 index.html 파일이 생성</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">curl</span> https://www.nginx.com -o index.html</code></pre></div>\n<h3 id=\"애드혹---copy-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---copy-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   copy 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - copy 모듈</h3>\n<ul>\n<li>\n<p>인벤토리 서버에 위에서 만든 <em>index.html</em> 파일을 copy 하기</p>\n<ul>\n<li><code class=\"language-text\">src</code> 옵션 : source를 의미함</li>\n<li><code class=\"language-text\">dest</code> 옵션 : destination를 의미함</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m copy -a <span class=\"token string\">\"src=index.html dest=/var/www/html/index.html\"</span></code></pre></div>\n<h3 id=\"애드혹---service-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---service-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   service 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - service 모듈</h3>\n<ul>\n<li>\n<p>인벤토리 서버에서 httpd 웹 서버를 위에서 만든 <em>index.html</em>로 구동시키기</p>\n<ul>\n<li><code class=\"language-text\">started</code> 옵션 : 서비스를 실행하는 명령어</li>\n<li><code class=\"language-text\">stopped</code> 옵션 : 서비스를 중지하는 명령</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m <span class=\"token function\">service</span> -a <span class=\"token string\">\"name=httpd state=started\"</span></code></pre></div>\n<ul>\n<li>검증</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497733-d07f8cdb-c979-40e7-998c-011d76e5624d.JPG\" alt=\"4  웹서버 구동\"></p>\n<ul>\n<li>인벤토리 httpd 웹서버 종료</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m <span class=\"token function\">service</span> -a <span class=\"token string\">\"name=httpd state=stopped\"</span></code></pre></div>\n<ul>\n<li>인벤토리 htppd 웹서버 remove 하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible all -m yum -a <span class=\"token string\">\"name=httpd state=absent\"</span></code></pre></div>\n<h3 id=\"애드혹---apt-모듈\" style=\"position:relative;\"><a href=\"#%EC%95%A0%EB%93%9C%ED%98%B9---apt-%EB%AA%A8%EB%93%88\" aria-label=\"애드혹   apt 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애드혹 - apt 모듈</h3>\n<ul>\n<li>\n<p>인벤토리 서버 중 <u>우분투 [ubuntu]로 이름 지정된 서버만</u> 구동시키기</p>\n<ul>\n<li><code class=\"language-text\">pkg</code> 옵션 : package를 의미함 (yum에서는 name으로 지정했었음)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># cat 명령어를 통해 확인</span>\n$ <span class=\"token function\">cat</span> /etc/ansible/hosts\n<span class=\"token comment\"># ubuntu로 지정된 이름의 서버만 apt로 아파치2를 설치</span>\n$ ansible ubuntu -m <span class=\"token function\">apt</span> -a <span class=\"token string\">\"pkg=apache2 state=present\"</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497735-2f1a4428-b1ee-4ac4-8f02-6098a68edd94.JPG\" alt=\"5  우분투 이름의 서버만 설치하기\"></p>\n<ul>\n<li>COPY 모듈을 사용해 우분투 웹서버에 반영 시키기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible ubuntu -m copy -a <span class=\"token string\">\"src=index.html dest=/var/www/html/index.html\"</span></code></pre></div>\n<ul>\n<li>인벤토리 서버의 웹서버 구동 종료 및 지우기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible ubuntu -m <span class=\"token function\">apt</span> -a <span class=\"token string\">\"name=apache2 state=stopped\"</span>\n$ ansible ubuntu -m <span class=\"token function\">apt</span> -a <span class=\"token string\">\"name=apache2 state=absent\"</span></code></pre></div>\n<h2 id=\"lab-2---멱등성-알아보기-및-테스트\" style=\"position:relative;\"><a href=\"#lab-2---%EB%A9%B1%EB%93%B1%EC%84%B1-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-%EB%B0%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"lab 2   멱등성 알아보기 및 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LAB 2 - 멱등성 알아보기 및 테스트</h2>\n<ul>\n<li>\n<p>같은 일을 반복하는 작업을 <strong><u>멱등성이 없다</u></strong>라고 합니다. 즉, 멱등성은 <u><strong>동일한 작업은 건너띄고 수행하지 않는 것을 의미합니다.</strong></u></p>\n<ul>\n<li>모듈마다 멱등성이 있는 것도, 없는 것도 존재합니다.</li>\n</ul>\n</li>\n<li>\n<p>하나의 파일 안에 같은 내용이 있는지 파악 및 내용 추가하기. 즉, <code class=\"language-text\">lineinfile</code> 모듈의 멱등성 테스트</p>\n<ul>\n<li><code class=\"language-text\">localhost</code> 옵션 : 현재 작업하고 있는 앤서블 코어의 로컬을 의미</li>\n<li><code class=\"language-text\">-c</code> 옵션 : <u>ssh 프로토콜을 이용하지 않겠다는 의미</u></li>\n<li><code class=\"language-text\">lineinfile</code> 옵션 : 파일 안에서 <u>라인 한줄을 추가하겠다는 의미</u></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>현재 192.168.56.113 라인이 3개 존재하고 있음</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible localhost -c <span class=\"token builtin class-name\">local</span> -m lineinfile -a <span class=\"token string\">\"path=inventory.list line=192.168.56.113\"</span></code></pre></div>\n<ul>\n<li>\n<p>검증 - 똑같이 3라인만 존재하는 것을 확인</p>\n<ul>\n<li><u>해당 LAB을 통해 <code class=\"language-text\">lineinfile</code> 모듈은 멱등성이 있는 모듈이라고 판단할 수 있습니다.</u></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/133497737-d98cc455-9eae-4286-8e45-e10aa59e979f.JPG\" alt=\"5-1 멱등성확인\"></p>\n<h2 id=\"lab-3---playbook을-활용해-nginx-설치-및-삭제하기centos-ubuntu\" style=\"position:relative;\"><a href=\"#lab-3---playbook%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%B4-nginx-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0centos-ubuntu\" aria-label=\"lab 3   playbook을 활용해 nginx 설치 및 삭제하기centos ubuntu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LAB 3 - playbook을 활용해 nginx 설치 및 삭제하기(centos, ubuntu)</h2>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>참고하기</p>\n<p>플레이북은 한줄씩 명령어를 실행한 앞선 애드혹과 다르게<br>\n<u>한번에 스크립트를 작성해 자동화 하는 것을 의미합니다.</u></p>\n</div>\n</div>\n<h3 id=\"centos---nginx-설치-구동-및-삭제\" style=\"position:relative;\"><a href=\"#centos---nginx-%EC%84%A4%EC%B9%98-%EA%B5%AC%EB%8F%99-%EB%B0%8F-%EC%82%AD%EC%A0%9C\" aria-label=\"centos   nginx 설치 구동 및 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CentOS - nginx 설치, 구동 및 삭제</h3>\n<ul>\n<li>\n<p>플레이북 작업에 사용할 디렉토리 생성 및 진입</p>\n<ul>\n<li><code class=\"language-text\">&amp;_</code> 옵션 : 직전에 생성한 디렉토리 진입</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> playbook <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$_</span></code></pre></div>\n<ul>\n<li>\n<p>플레이북에 사용할 yaml 파일 작성</p>\n<ul>\n<li><code class=\"language-text\">gather_facts</code> 옵션 : 관리할 수 있는 정보들 중(ip정보, mac 정보, 호스트네임 등) 인벤토리 서버의 정보를 변수로 활용 가능한 것들</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">$ vi nginx_install.yaml\n<span class=\"token comment\"># [nginx_install.yaml]</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install nginx on CentOS\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> centos\n  <span class=\"token key atrule\">gather_facts</span><span class=\"token punctuation\">:</span> no\n\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install epel<span class=\"token punctuation\">-</span>release\n      <span class=\"token comment\"># ansible centos -m yum -a \"name=epel-release state=latest\" 와 의미가 같음</span>\n      <span class=\"token key atrule\">yum</span><span class=\"token punctuation\">:</span> name=epel<span class=\"token punctuation\">-</span>release state=latest\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install nginx web server\n      <span class=\"token key atrule\">yum</span><span class=\"token punctuation\">:</span> name=nginx state=present\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> upload default index.html for web server\n      <span class=\"token comment\"># get_url : 해당 url를 가져옴 / mode : chmod 644 명령어와 동일</span>\n      <span class=\"token key atrule\">get_url</span><span class=\"token punctuation\">:</span> url=https<span class=\"token punctuation\">:</span>//www.nginx.com dest=/usr/share/nginx/html mode=0644\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> start nginx web server\n      <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> name=nginx state=started</code></pre></div>\n<ul>\n<li>\n<p>작성한 플레이북을 실행하기</p>\n<ul>\n<li>로그를 보고 싶다면 뒤에 <code class=\"language-text\">-v</code> 옵션을 부여하면 됨</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible-playbook nginx_install.yaml</code></pre></div>\n<ul>\n<li>제거하는 플레이북을 yaml 파일 만들기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">$ vi remove_nginx\n<span class=\"token comment\"># [remove_nginx.yaml]</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Remove nginx on CentOS\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> centos\n  <span class=\"token key atrule\">gather_facts</span><span class=\"token punctuation\">:</span> no\n\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> remove epel<span class=\"token punctuation\">-</span>release\n      <span class=\"token key atrule\">yum</span><span class=\"token punctuation\">:</span> name=epel<span class=\"token punctuation\">-</span>release state=absent\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> remove nginx web server\n      <span class=\"token key atrule\">yum</span><span class=\"token punctuation\">:</span> name=nginx state=absent</code></pre></div>\n<ul>\n<li>제거하는 플레이북 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible-playbook remove_nginx.yaml</code></pre></div>\n<h3 id=\"ubuntu---nginx-설치-구동-및-삭제\" style=\"position:relative;\"><a href=\"#ubuntu---nginx-%EC%84%A4%EC%B9%98-%EA%B5%AC%EB%8F%99-%EB%B0%8F-%EC%82%AD%EC%A0%9C\" aria-label=\"ubuntu   nginx 설치 구동 및 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ubuntu - nginx 설치, 구동 및 삭제</h3>\n<ul>\n<li>플레이북에 사용할 yaml 파일 작성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ansible f</span></code></pre></div>\n<h2 id=\"번외--필드온프레미스-환경에서-가상화-관리\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8--%ED%95%84%EB%93%9C%EC%98%A8%ED%94%84%EB%A0%88%EB%AF%B8%EC%8A%A4-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%EA%B0%80%EC%83%81%ED%99%94-%EA%B4%80%EB%A6%AC\" aria-label=\"번외  필드온프레미스 환경에서 가상화 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번외 : 필드(온프레미스 환경)에서 가상화 관리</h2>\n<blockquote>\n<p>궁금해서 물어본 내용 - 클라우드 환경이 아닌 가상화 관리 방식</p>\n</blockquote>\n<h4 id=\"베어메탈-방식의-하이퍼바이저--type1\" style=\"position:relative;\"><a href=\"#%EB%B2%A0%EC%96%B4%EB%A9%94%ED%83%88-%EB%B0%A9%EC%8B%9D%EC%9D%98-%ED%95%98%EC%9D%B4%ED%8D%BC%EB%B0%94%EC%9D%B4%EC%A0%80--type1\" aria-label=\"베어메탈 방식의 하이퍼바이저  type1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>베어메탈 방식의 하이퍼바이저 : TYPE1</h4>\n<ul>\n<li>KVM : 리눅스 베이스로 무료</li>\n<li>\n<p>아래는 VMWare 베이스로 유료</p>\n<ul>\n<li>ESXI - Vcenter</li>\n<li>XEN - Xcenter</li>\n<li>Hyper-v</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"KOSTA_Ansible을 이용한 AWS 클라우드 DevOps 자동화 구현-1","date":"September 16, 2021","category":"⛓️ devops"}}},"pageContext":{"slug":"/devops/KOSTA_Ansible을 이용한 AWS 클라우드 DevOps 자동화 구현-1/","previous":{"fields":{"slug":"/linux/[따배쉘] - bash shell Script/"},"frontmatter":{"title":"[따배쉘] - bash shell Script","category":"🖥️ linux","draft":false}},"next":{"fields":{"slug":"/devops/KOSTA_Ansible을 이용한 AWS 클라우드 DevOps 자동화 구현-2/"},"frontmatter":{"title":"KOSTA_Ansible을 이용한 AWS 클라우드 DevOps 자동화 구현-2","category":"⛓️ devops","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}