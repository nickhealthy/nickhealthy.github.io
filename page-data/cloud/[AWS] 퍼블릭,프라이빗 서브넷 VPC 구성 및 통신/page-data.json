{"componentChunkName":"component---src-templates-blog-post-js","path":"/cloud/[AWS] 퍼블릭,프라이빗 서브넷 VPC 구성 및 통신/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"6fdfcd3e-8765-5684-8058-6b37249e8828","excerpt":"단일 퍼블릭 서브넷에 속한 EC2 인스턴스가 외부 인터넷 구간으로 통신 되는 과정을 실습 실습 단계 퍼블릭 서브넷 VPC 생성 VPC 생성 퍼블릭 서브넷 생성 인터넷 게이트웨이 생성 및 VPC 연결 퍼블릭 라우팅 테이블 생성 및 서브넷 연결 퍼블릭 라우팅 테이블 경로 추가 검증 EC2 인스턴스 생성 EC2 인스턴스 접근 후 통신 확인 VPC 생성 VPC이름, CIRD 대역 설정 경로: 서비스 - VPC - 가상 프라이빗 클라우드 - VPC 생성 클릭 VPC…","html":"<p><u>단일 퍼블릭 서브넷에 속한 EC2 인스턴스가 외부 인터넷 구간으로 통신 되는 과정을 실습</u></p>\n<h3 id=\"실습-단계\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EB%8B%A8%EA%B3%84\" aria-label=\"실습 단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 단계</h3>\n<h4 id=\"퍼블릭-서브넷-vpc-생성\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EC%84%9C%EB%B8%8C%EB%84%B7-vpc-%EC%83%9D%EC%84%B1\" aria-label=\"퍼블릭 서브넷 vpc 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼블릭 서브넷 VPC 생성</h4>\n<ol>\n<li>VPC 생성</li>\n<li>퍼블릭 서브넷 생성</li>\n<li>인터넷 게이트웨이 생성 및 VPC 연결</li>\n<li>퍼블릭 라우팅 테이블 생성 및 서브넷 연결</li>\n<li>퍼블릭 라우팅 테이블 경로 추가</li>\n</ol>\n<h4 id=\"검증\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D\" aria-label=\"검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증</h4>\n<ol>\n<li>EC2 인스턴스 생성</li>\n<li>EC2 인스턴스 접근 후 통신 확인</li>\n</ol>\n<h2 id=\"vpc-생성\" style=\"position:relative;\"><a href=\"#vpc-%EC%83%9D%EC%84%B1\" aria-label=\"vpc 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VPC 생성</h2>\n<h3 id=\"vpc이름-cird-대역-설정\" style=\"position:relative;\"><a href=\"#vpc%EC%9D%B4%EB%A6%84-cird-%EB%8C%80%EC%97%AD-%EC%84%A4%EC%A0%95\" aria-label=\"vpc이름 cird 대역 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VPC이름, CIRD 대역 설정</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - VPC 생성 클릭</li>\n<li>VPC 생성시 <strong>가상 라우터가 자동으로 생성</strong></li>\n<li>기본 라우팅 테이블도 보유하고 있다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597550-2b861e80-c480-11eb-849f-1873b4d65e56.JPG\" alt=\"1-1브이피시생성\"></p>\n<h3 id=\"퍼블릭-서브넷-생성\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%83%9D%EC%84%B1\" aria-label=\"퍼블릭 서브넷 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼블릭 서브넷 생성</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 서브넷 생성 클릭</li>\n<li>\n<p>이름, VPC선택, 가용 영역 선택, IPv4 CIDR 대역을 설정해준다.</p>\n<ul>\n<li>서브넷의 네트워크 대역폭은 VPC 생성 시 대역범위 내여야한다.</li>\n</ul>\n</li>\n<li>퍼블릭 서브넷만 생성한 것이기 때문에 생성한 VPC는 <strong>아직 가상 라우터가 가지고 있는 기본 라우팅 테이블을 사용중</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597554-2cb74b80-c480-11eb-9b8f-0e27da990894.JPG\" alt=\"1-2서브넷설정\"></p>\n<h3 id=\"인터넷-게이트웨이-생성-및-vpc-연결\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%EB%84%B7-%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4-%EC%83%9D%EC%84%B1-%EB%B0%8F-vpc-%EC%97%B0%EA%B2%B0\" aria-label=\"인터넷 게이트웨이 생성 및 vpc 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터넷 게이트웨이 생성 및 VPC 연결</h3>\n<p>외부 인터넷 구간과 통신을 하기 위한 인터넷 게이트웨이 생성 후 VPC와 연결</p>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 인터넷 게이트웨이 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597561-2d4fe200-c480-11eb-8fa6-2bbf324b9e23.JPG\" alt=\"1-3인터넷게이트웨이 생성\"></p>\n<ul>\n<li>인터넷 게이트웨이 생성 후 VPC 연결</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597562-2de87880-c480-11eb-878e-fc6b67064c54.JPG\" alt=\"1-4인터넷게이트웨이 연결\"></p>\n<ul>\n<li><strong>외부 통신을 위한</strong> 인터넷 게이트웨이 연결하였지만, 인터넷 구간으로 향하는 <strong>라우팅 경로를 설정해 주어야함</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597564-2e810f00-c480-11eb-9047-2854f8fa02d0.JPG\" alt=\"1-5인터넷게이트웨이연결후\"></p>\n<h3 id=\"퍼블릭-라우팅-테이블-생성-및-서브넷-연결\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%97%B0%EA%B2%B0\" aria-label=\"퍼블릭 라우팅 테이블 생성 및 서브넷 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼블릭 라우팅 테이블 생성 및 서브넷 연결</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 라우팅 테이블</li>\n<li>라우팅 테이블 이름 설정 및 생성한 VPC 선택</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597566-2f19a580-c480-11eb-8225-71010722ec6c.JPG\" alt=\"1-6라우팅테이블 생성\"></p>\n<ul>\n<li>경로: 해당 라우팅 테이블 선택 - 세부사항 - 세브넷 연결 - 서브넷 연결 편집 클릭</li>\n<li>이전에 만들었던 <strong>서브넷이랑 라우팅 테이블을 연결</strong></li>\n<li>이제 퍼블릭 서브넷은 <strong>기본 라우팅 테이블이 아닌, 새로 생성한 퍼블릭 라우팅 테이블을 사용</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597568-2f19a580-c480-11eb-8318-8b5a0a0cfa1e.JPG\" alt=\"1-7서브넷연결\"></p>\n<h3 id=\"퍼블릭-라우팅-테이블-경로-추가\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B2%BD%EB%A1%9C-%EC%B6%94%EA%B0%80\" aria-label=\"퍼블릭 라우팅 테이블 경로 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼블릭 라우팅 테이블 경로 추가</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 라우팅 테이블 - 세부정보 - 라우팅 편집 클릭</li>\n<li><strong>인터넷 게이트웨이와 모든 경로 허용 추가</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597571-2fb23c00-c480-11eb-8e29-6fda0bc111a1.JPG\" alt=\"1-8라우팅테이블에 인터넷게이트웨이 추가\"></p>\n<h2 id=\"검증-1\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D-1\" aria-label=\"검증 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증</h2>\n<ul>\n<li>\n<p>EC2를 생성하여 <strong>새롭게 생성한 VPC로 변경</strong></p>\n<ul>\n<li>네트워크: <strong>생성한 VPC 선택</strong></li>\n<li>서브넷: <strong>생성한 퍼블릭 서브넷 선택</strong></li>\n<li>퍼블릭 IP 자동할당: <strong>활성화</strong></li>\n</ul>\n</li>\n<li>이외 나머지 설정은 기본 값</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120597574-304ad280-c480-11eb-98fa-02a1c4263a2e.JPG\" alt=\"1-9ec2확인\"></p>\n<p>목적지 타깃을 google.com으로 하여 외부 인터넷으로 정상적인 통신이 가능한 것을 확인</p>\n<h2 id=\"프라이빗-서브넷-vpc-구성\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%84%B7-vpc-%EA%B5%AC%EC%84%B1\" aria-label=\"프라이빗 서브넷 vpc 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 서브넷 VPC 구성</h2>\n<p><u>프라이빗 서브넷을 생성하여 외부 인터넷 구간과 통신 되는 과정을 실습</u></p>\n<h3 id=\"실습단계\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5%EB%8B%A8%EA%B3%84\" aria-label=\"실습단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습단계</h3>\n<h4 id=\"프라이빗-서브넷-추가\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%B6%94%EA%B0%80\" aria-label=\"프라이빗 서브넷 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 서브넷 추가</h4>\n<ol>\n<li>프라이빗 서브넷 생성</li>\n<li>NAT 게이트웨이 생성</li>\n<li>프라이빗 라우팅 테이블 생성 및 서브넷 연결</li>\n<li>프라이빗 라우팅 테이블 경로 추가 =</li>\n</ol>\n<h4 id=\"검증-2\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D-2\" aria-label=\"검증 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증</h4>\n<ol>\n<li>EC2 인스턴스 생성</li>\n<li>EC2 인스턴스 접근 후 통신 확인</li>\n<li>퍼블릭 서브넷과 프라이빗 서브넷의 통신 흐름</li>\n</ol>\n<h2 id=\"프라이빗-서브넷-추가-1\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%B6%94%EA%B0%80-1\" aria-label=\"프라이빗 서브넷 추가 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 서브넷 추가</h2>\n<h3 id=\"프라이빗-서브넷-생성\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%83%9D%EC%84%B1\" aria-label=\"프라이빗 서브넷 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 서브넷 생성</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 서브넷 생성 클릭</li>\n<li>\n<p>생성한 VPC 선택, 서브넷 이름설정, 가용영역 선택, 네트워크 대역 설정 후 생성</p>\n<ul>\n<li>프라이빗 서브넷은 아직 <strong>기본 라우팅 테이블을 사용중</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598410-31303400-c481-11eb-9fe1-efbb0b16da1e.JPG\" alt=\"2-1서브넷생성\"></p>\n<h3 id=\"nat-게이트웨이-생성\" style=\"position:relative;\"><a href=\"#nat-%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4-%EC%83%9D%EC%84%B1\" aria-label=\"nat 게이트웨이 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NAT 게이트웨이 생성</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - NAT 게이트웨이 생성 클릭</li>\n<li>NAT 게이트웨이는 인터넷 게이트웨이와 마찮가지로 외부와 통신을 할 때 사용하지만, <strong>프라이빗 서브넷에서 외부로 통신하기 위해 사용</strong>한다.</li>\n<li>NAT게이트웨이의 역할은 프라이빗 네트워크를 외부로 보내기 위해 사용되지만, 서브넷의 배치는 <strong>퍼블릭 서브넷</strong>에 배치되어야 한다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598228-fb8b4b00-c480-11eb-96f1-7e089ca16f5d.JPG\" alt=\"2-2넷게이트웨이 생성\"></p>\n<h3 id=\"프라이빗-라우팅-테이블-생성-및-서브넷-연결\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%84%9C%EB%B8%8C%EB%84%B7-%EC%97%B0%EA%B2%B0\" aria-label=\"프라이빗 라우팅 테이블 생성 및 서브넷 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 라우팅 테이블 생성 및 서브넷 연결</h3>\n<ul>\n<li>기존에 생성한 VPC에 프라이빗 라우팅 테이블을 생성</li>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 라우팅 테이블 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598231-fc23e180-c480-11eb-8af3-ed5aad6102b3.JPG\" alt=\"2-3프라이빗라우팅테이블생성\"></p>\n<ul>\n<li>프라이빗 서브넷과 연결</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598233-fcbc7800-c480-11eb-980c-e2db27abb928.JPG\" alt=\"2-4 프라이빗라우팅테이블서브넷연결\"></p>\n<h3 id=\"프라이빗-라우팅-테이블-경로-추가\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B2%BD%EB%A1%9C-%EC%B6%94%EA%B0%80\" aria-label=\"프라이빗 라우팅 테이블 경로 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 라우팅 테이블 경로 추가</h3>\n<ul>\n<li>현재 프라이빗 라우팅 테이블에는 외부 인터넷 구간 통신을 위한 라우팅 경로가 없음</li>\n<li><strong>모든 네트워크가 NAT 게이트웨이로</strong> 향하는 경로 추가</li>\n<li>경로: 서비스 - 가상 프라이빗 클라우드 - 라우팅 테이블 - 세부정보 - 라우팅 편집 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598236-fd550e80-c480-11eb-9e75-80d71d93efe0.JPG\" alt=\"2-5 프라이빗라우팅테이블추가\"></p>\n<h2 id=\"검증-3\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%A6%9D-3\" aria-label=\"검증 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검증</h2>\n<ul>\n<li>프라이빗 서브넷을 가진 EC2 새로 생성</li>\n<li>네트워크, 서브넷, 설정</li>\n<li>그외 설정 기본 값</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598239-fdeda500-c480-11eb-9b03-2288bbb61ed0.JPG\" alt=\"2-6 프라이빗이씨투\"></p>\n<ul>\n<li>\n<p><strong>고급 세부 정보 - 데이터 입력란에 해당 코드 입력</strong></p>\n<ul>\n<li>해당 코드는 EC2가 실행될 때 코드를 실행하게 됨</li>\n<li>해당 코드는 root 비밀번호 지정 후, <strong>키페어 없이 root의 암호 입력 방식으로 로그인하는 설정임</strong></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token punctuation\">(</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"qwe123\"</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"qwe123\"</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token function\">passwd</span> --stdin root\n<span class=\"token function\">sed</span> -i <span class=\"token string\">\"s/^PasswordAuthentication no/PasswordAuthentication yes/g\"</span> /etc/ssh/sshd_config\n<span class=\"token function\">sed</span> -i <span class=\"token string\">\"s/^#PermitRootLogin yes/PermitRootLogin yes/g\"</span> /etc/ssh/sshd_config\n<span class=\"token function\">service</span> sshd restart</code></pre></div>\n<ul>\n<li>\n<p>프라이빗 EC2 생성 및 세부정보</p>\n<ul>\n<li>퍼블릭 IP 주소가 없다.</li>\n<li>NAT 게이트웨이는 <strong>네트워크가 내부에서 외부로 나갈 순 있지만, 외부에서 내부로 들어오는 것은 불가능</strong></li>\n<li>따라서 이전에 만들었던 <strong>퍼블릭 EC2 인스턴스에 최초 진입 후, 로컬통신을 통해 프라이빗 EC2로 접근</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598372-25447200-c481-11eb-9e11-dcca63638b95.JPG\" alt=\"2-7 프라이빗이씨투생성\"></p>\n<ul>\n<li>\n<p>프라이빗 EC2에 접근한 모습</p>\n<ul>\n<li>처음 퍼블릭 EC2 접근 후, SSH 프로토콜을 통해 프라이빗 EC2에 접속한 모습</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598244-fe863b80-c480-11eb-8e12-985ed4adb396.JPG\" alt=\"2-8 프라이빗이씨투에 접속\"></p>\n<ul>\n<li>정상적으로 ping이 떨어지는 모습</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120598245-ff1ed200-c480-11eb-8ab8-189af25cbf59.JPG\" alt=\"2-9검증확인\"></p>\n<blockquote>\n<p>중간에 NAT 게이트웨이를 설정할 때, 서브넷 설정을 프라이빗으로 설정해두어 외부 네트워크와 통신이 안됬었다.</p>\n<p>NAT 게이트웨이를 지웠다가 다시 제대로 퍼블릭 서브넷으로 설정하니 통신이 된 모습</p>\n</blockquote>\n<h2 id=\"이후-모든-자원-삭제\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%ED%9B%84-%EB%AA%A8%EB%93%A0-%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C\" aria-label=\"이후 모든 자원 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이후 모든 자원 삭제</h2>\n<ul>\n<li>EC2 인스턴스 종료</li>\n<li>NAT 게이트웨이 삭제</li>\n<li>탄력적 IP삭제</li>\n<li>VPC 삭제</li>\n</ul>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>따라하며 배우는 AWS 네트워크 입문</p>","frontmatter":{"title":"[AWS] 퍼블릭,프라이빗 서브넷 VPC 구성 및 통신","date":"June 03, 2021","category":"☁️ cloud"}}},"pageContext":{"slug":"/cloud/[AWS] 퍼블릭,프라이빗 서브넷 VPC 구성 및 통신/","previous":{"fields":{"slug":"/cloud/[AWS] VPC 서비스 및 기본개념/"},"frontmatter":{"title":"[AWS] VPC 서비스 및 기본개념","category":"☁️ cloud","draft":false}},"next":{"fields":{"slug":"/cloud/[AWS] 게이트웨이인터페이스 엔드포인트 비교/"},"frontmatter":{"title":"[AWS] 게이트웨이/인터페이스 엔드포인트 비교","category":"☁️ cloud","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}