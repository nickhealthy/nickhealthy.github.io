{"componentChunkName":"component---src-templates-blog-post-js","path":"/cloud/[AWS] Route53 구성 및 라우팅 정책/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"07967b65-ccf4-5291-bb56-b1151f161997","excerpt":"실습 목표 AWS 클라우드 네트워크를 구성하고, Route53의 도메인을 활용하여 연결하는 실습 진행 추가로, 장애 조치 라우팅 정책을 통해 Failover 환경 구성 실습 단계 기본 환경 구성 CloudFormation 적용 생성 자원 확인 기본 환경 검증 Route53과 ALB 연결 Route53 레코드 생성(단순 라우팅) Route53 단순 라우팅 검증 Route53 장애 조치 라우팅 정책 Route53 레코드 생성(장애 조치 라우팅) Route5…","html":"<h3 id=\"실습-목표\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EB%AA%A9%ED%91%9C\" aria-label=\"실습 목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 목표</h3>\n<ul>\n<li>AWS 클라우드 네트워크를 구성하고, Route53의 도메인을 활용하여 연결하는 실습 진행</li>\n<li>추가로, 장애 조치 라우팅 정책을 통해 Failover 환경 구성</li>\n</ul>\n<h2 id=\"실습-단계\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%EB%8B%A8%EA%B3%84\" aria-label=\"실습 단계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 단계</h2>\n<h3 id=\"기본-환경-구성\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\"기본 환경 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h3>\n<ul>\n<li>CloudFormation 적용</li>\n<li>생성 자원 확인</li>\n<li>기본 환경 검증</li>\n</ul>\n<h3 id=\"route53과-alb-연결\" style=\"position:relative;\"><a href=\"#route53%EA%B3%BC-alb-%EC%97%B0%EA%B2%B0\" aria-label=\"route53과 alb 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53과 ALB 연결</h3>\n<ul>\n<li>Route53 레코드 생성(단순 라우팅)</li>\n<li>Route53 단순 라우팅 검증</li>\n</ul>\n<h3 id=\"route53-장애-조치-라우팅-정책\" style=\"position:relative;\"><a href=\"#route53-%EC%9E%A5%EC%95%A0-%EC%A1%B0%EC%B9%98-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A0%95%EC%B1%85\" aria-label=\"route53 장애 조치 라우팅 정책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 장애 조치 라우팅 정책</h3>\n<ul>\n<li>Route53 레코드 생성(장애 조치 라우팅)</li>\n<li>Route53 장애 조치 라우팅 검증</li>\n</ul>\n<h3 id=\"자원-삭제\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C\" aria-label=\"자원 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원 삭제</h3>\n<h2 id=\"기본-환경-구성-1\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-1\" aria-label=\"기본 환경 구성 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h2>\n<h3 id=\"cloudformation-적용\" style=\"position:relative;\"><a href=\"#cloudformation-%EC%A0%81%EC%9A%A9\" aria-label=\"cloudformation 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CloudFormation 적용</h3>\n<ul>\n<li>적용 방법 이전 실습 참고</li>\n<li>\n<p>AWS 인프라 자원을 생성할 [YAML 파일]</p>\n<ul>\n<li>VPC(My-VPC)</li>\n<li>퍼블릭 서브넷(My-Public-SN-1, My-Public-SN-2)</li>\n<li>퍼블릭 라우팅 테이블(My-Public-RT)</li>\n<li>인터넷게이트웨이</li>\n<li>퍼블릭 EC2 인스턴스(EC2-1, EC2-2)</li>\n<li>ALB(대상 그룹: EC2-1, EC2-2)</li>\n<li>보안그룹(WEB-SG)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">Parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> Name of an existing EC2 KeyPair to enable SSH access to the instances. Linked to AWS Parameter\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyPair<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyName\n    <span class=\"token key atrule\">ConstraintDescription</span><span class=\"token punctuation\">:</span> must be the name of an existing EC2 KeyPair.\n  <span class=\"token key atrule\">LatestAmiId</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> (DO NOT CHANGE)\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'AWS::SSM::Parameter::Value&lt;AWS::EC2::Image::Id>'</span>\n    <span class=\"token key atrule\">Default</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2'</span>\n    <span class=\"token key atrule\">AllowedValues</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> /aws/service/ami<span class=\"token punctuation\">-</span>amazon<span class=\"token punctuation\">-</span>linux<span class=\"token punctuation\">-</span>latest/amzn2<span class=\"token punctuation\">-</span>ami<span class=\"token punctuation\">-</span>hvm<span class=\"token punctuation\">-</span>x86_64<span class=\"token punctuation\">-</span>gp2\n\n<span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">MyVPC</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPC\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/16\n      <span class=\"token key atrule\">EnableDnsSupport</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">EnableDnsHostnames</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>VPC\n\n  <span class=\"token key atrule\">MyIGW</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>InternetGateway\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>IGW\n\n  <span class=\"token key atrule\">MyIGWAttachment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPCGatewayAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InternetGatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyIGW\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n\n  <span class=\"token key atrule\">MyPublicRT</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>RouteTable\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>RT\n\n  <span class=\"token key atrule\">MyDefaultPublicRoute</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Route\n    <span class=\"token key atrule\">DependsOn</span><span class=\"token punctuation\">:</span> MyIGWAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicRT\n      <span class=\"token key atrule\">DestinationCidrBlock</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n      <span class=\"token key atrule\">GatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyIGW\n\n  <span class=\"token key atrule\">MyPublicSN1</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>SN<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n\n  <span class=\"token key atrule\">MyPublicSN2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.1.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>SN<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n\n  <span class=\"token key atrule\">MyPublicSNRouteTableAssociation</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN1\n\n  <span class=\"token key atrule\">MyPublicSNRouteTableAssociation2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN2\n\n  <span class=\"token key atrule\">WEBSG</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SecurityGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">GroupDescription</span><span class=\"token punctuation\">:</span> Enable HTTP access via port 80 and SSH access via port 22\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> WEBSG\n      <span class=\"token key atrule\">SecurityGroupIngress</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n\n  <span class=\"token key atrule\">MYEC21</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> EC2<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN1\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> WEBSG\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">UserData</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">Fn::Base64</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Sub</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          #!/bin/bash\n          hostname EC2-1\n          yum install httpd -y\n          service httpd start\n          chkconfig httpd on\n          echo \"&lt;h1>CloudNet@ EC2-1 Web Server&lt;/h1>\" > /var/www/html/index.html</span>\n\n  <span class=\"token key atrule\">MYEC22</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> EC2<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyPublicSN2\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> WEBSG\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">UserData</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">Fn::Base64</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Sub</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          #!/bin/bash\n          hostname ELB-EC2-2\n          yum install httpd -y\n          service httpd start\n          chkconfig httpd on\n          echo \"&lt;h1>CloudNet@ EC2-2 Web Server&lt;/h1>\" > /var/www/html/index.html</span>\n\n  <span class=\"token key atrule\">MyEIP1</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EIP\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Domain</span><span class=\"token punctuation\">:</span> vpc\n\n  <span class=\"token key atrule\">MyEIP1Assoc</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EIPAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MYEC21\n      <span class=\"token key atrule\">AllocationId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!GetAtt</span> MyEIP1.AllocationId\n\n  <span class=\"token key atrule\">MyEIP2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EIP\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Domain</span><span class=\"token punctuation\">:</span> vpc\n\n  <span class=\"token key atrule\">MyEIP2Assoc</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EIPAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MYEC22\n      <span class=\"token key atrule\">AllocationId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!GetAtt</span> MyEIP2.AllocationId\n\n  <span class=\"token key atrule\">ALBTargetGroup</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>TargetGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Name</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>ALB<span class=\"token punctuation\">-</span>TG\n      <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">Protocol</span><span class=\"token punctuation\">:</span> HTTP\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MyVPC\n      <span class=\"token key atrule\">Targets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Id</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MYEC21\n          <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Id</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> MYEC22\n          <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n\n  <span class=\"token key atrule\">ApplicationLoadBalancer</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>LoadBalancer\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Name</span><span class=\"token punctuation\">:</span> My<span class=\"token punctuation\">-</span>ALB\n      <span class=\"token key atrule\">Scheme</span><span class=\"token punctuation\">:</span> internet<span class=\"token punctuation\">-</span>facing\n      <span class=\"token key atrule\">SecurityGroups</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> WEBSG\n      <span class=\"token key atrule\">Subnets</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> MyPublicSN1\n        <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> MyPublicSN2\n\n  <span class=\"token key atrule\">ALBListener</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>ElasticLoadBalancingV2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Listener\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">DefaultActions</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> forward\n          <span class=\"token key atrule\">TargetGroupArn</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> ALBTargetGroup\n      <span class=\"token key atrule\">LoadBalancerArn</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> ApplicationLoadBalancer\n      <span class=\"token key atrule\">Port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">Protocol</span><span class=\"token punctuation\">:</span> HTTP</code></pre></div>\n<h3 id=\"기본-환경-검증\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B2%80%EC%A6%9D\" aria-label=\"기본 환경 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 검증</h3>\n<ul>\n<li>\n<p>사용자 PC에서 ALB DNS 주소로 웹 접근하여 로드밸런싱 되는 기본 환경을 검증</p>\n<ul>\n<li>ALB DNS 이름 확인</li>\n<li>경로: 서비스 - EC2 - 로드밸런싱 - 로드밸런서 - 로드밸런서 생성</li>\n</ul>\n</li>\n<li>라운드 로빈 형태로 주소가 번갈아 가면서 라우팅되는 모습</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772268-aec35480-d906-11eb-9af6-48517aaf4d3b.JPG\" alt=\"1  ALB-DNS 확인\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772277-aff48180-d906-11eb-8380-9a89e0d56126.JPG\" alt=\"1-1\"></p>\n<h2 id=\"route53과-alb-연결-1\" style=\"position:relative;\"><a href=\"#route53%EA%B3%BC-alb-%EC%97%B0%EA%B2%B0-1\" aria-label=\"route53과 alb 연결 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53과 ALB 연결</h2>\n<ul>\n<li>Route53에서 Alias를 통해 ELB, CloudFront, S3 등의 서비스와 연결할 수 있습니다.</li>\n<li>해당 기능을 이용해 ALB 와 연결</li>\n<li>경로: 서비스 - Route53 - 호스팅 영역 생성 - 기존에 만들어 둔 도메인 선택 - 레코드 생성 버튼 클릭</li>\n</ul>\n<h3 id=\"route53-레코드-생성단순-라우팅\" style=\"position:relative;\"><a href=\"#route53-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%83%9D%EC%84%B1%EB%8B%A8%EC%88%9C-%EB%9D%BC%EC%9A%B0%ED%8C%85\" aria-label=\"route53 레코드 생성단순 라우팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 레코드 생성(단순 라우팅)</h3>\n<ul>\n<li>단순 라우팅 선택 후 생성</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772281-aff48180-d906-11eb-90b3-ee8cc2559718.JPG\" alt=\"2  레코드 생성\"></p>\n<ul>\n<li>\n<p>단순 레코드 정의</p>\n<ul>\n<li><u>값/트래픽 라우팅 대상에서 사용할 alias 서비스 리전 및 서비스 선택</u></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772285-b125ae80-d906-11eb-88ec-182c696305af.JPG\" alt=\"2-1\"></p>\n<h3 id=\"route53-단순-라우팅-검증\" style=\"position:relative;\"><a href=\"#route53-%EB%8B%A8%EC%88%9C-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EA%B2%80%EC%A6%9D\" aria-label=\"route53 단순 라우팅 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 단순 라우팅 검증</h3>\n<ul>\n<li>성공적으로 생성한 레코드 이름을 통해 라운드 로빈 방식을 통해 접속 되는 모습</li>\n<li>결론적으로 사용자 PC에서 ALB를 통해 2대의 웹 서버로 로드밸런싱 되어 통신합니다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772287-b1be4500-d906-11eb-9d26-35e935ae3d9a.JPG\" alt=\"3-1  DNS 테스트\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772286-b125ae80-d906-11eb-8692-47d2c2b7760d.JPG\" alt=\"3  DNS 테스트\"></p>\n<h3 id=\"정리하기\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"정리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리하기</h3>\n<ol>\n<li>사용자 PC에서 test2.nickhealthy.shop 주소의 대상을 알기 위해 <u>DNS 질의를 DNS 해석기로 전달</u></li>\n<li>DNS 해석기는 <u><strong>루트 네임 서버로 DNS 질의를 하고</strong></u>, .shop TLD 네임 서버의 주소를 받음. DNS 해석기는 다시 .shop <u><strong>TLD 네임 서버로 DNS 질의를 하며</strong></u>, Route53의 호스팅 영역의 네임 서버 주소를 받음</li>\n<li>DNS 해석기는 Route53 호스팅 영역의 네임 서버로 test2.nickhealthy.shop에 대한 DNS 질의를 하고, 응답을 받음</li>\n<li>DNS 해석기는 사용자PC로 DNS 질의에 대한 응답을 전달합니다.</li>\n</ol>\n<h2 id=\"route53-장애-조치-라우팅-정책-1\" style=\"position:relative;\"><a href=\"#route53-%EC%9E%A5%EC%95%A0-%EC%A1%B0%EC%B9%98-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A0%95%EC%B1%85-1\" aria-label=\"route53 장애 조치 라우팅 정책 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 장애 조치 라우팅 정책</h2>\n<ul>\n<li>\n<p>2대의 EC2 인스턴스를 연결하여 주 대상(Primary) 보조 대상(Secondary) 형태의 장애 조치 라우팅을 구성합니다.</p>\n<ul>\n<li>주 대상은 EC2-1, 보조 대상은 EC2-2</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"route53-레코드-생성장애-조치-라우팅\" style=\"position:relative;\"><a href=\"#route53-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%83%9D%EC%84%B1%EC%9E%A5%EC%95%A0-%EC%A1%B0%EC%B9%98-%EB%9D%BC%EC%9A%B0%ED%8C%85\" aria-label=\"route53 레코드 생성장애 조치 라우팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 레코드 생성(장애 조치 라우팅)</h3>\n<ul>\n<li>장애 조치 라우팅을 통해 Failover 환경을 구성하기 위해선 <strong><u>대상의 상태를 확인하는 동작이 필요합니다.</u></strong></li>\n<li>경로: 서비스 - Route53 - 상태 검사 - 상태 검사 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772290-b256db80-d906-11eb-864e-43fe08082f1a.JPG\" alt=\"4  장애조치라우팅 설정\"></p>\n<ul>\n<li>\n<p>주 대상(Primary-Check), 보조 대상(Secondary-Check) 상태 생성</p>\n<ul>\n<li><code class=\"language-text\">/index</code> 경로를 주기적으로 상태 검사함</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772293-b256db80-d906-11eb-9409-901e01884bb5.JPG\" alt=\"4-1 장애조치 상태 검사 생성\"></p>\n<ul>\n<li>\n<p>장애 조치 라우팅 생성</p>\n<ul>\n<li>경로: 서비스 - Route53 - 호스팅 영역 생성 - 레코드 생성</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772296-b2ef7200-d906-11eb-9175-113c5c7978f0.JPG\" alt=\"5  장애조치라우팅 생성\"></p>\n<ul>\n<li>\n<p>레코드 정의 클릭</p>\n<ul>\n<li>주 대상, 보조 대상 각각 생성</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772298-b3880880-d906-11eb-984c-cf7c7d6b7de7.JPG\" alt=\"5-1  장애조치라우팅 생성\"></p>\n<ul>\n<li>장애 조치 레코드 생성 확인</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772302-b3880880-d906-11eb-9e23-86da3299d858.JPG\" alt=\"5-2  장애조치라우팅 생성\"></p>\n<h3 id=\"route53-장애-조치-라우팅-검증\" style=\"position:relative;\"><a href=\"#route53-%EC%9E%A5%EC%95%A0-%EC%A1%B0%EC%B9%98-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EA%B2%80%EC%A6%9D\" aria-label=\"route53 장애 조치 라우팅 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Route53 장애 조치 라우팅 검증</h3>\n<ul>\n<li>사용자 PC의 인터넷 브라우저에서 설정한 장애 조치 라우팅 레코드의 도메인 이름으로 접속(test3.nickhealthy.shop)</li>\n<li>장애가 없을 시, 여러번 방문하여도 로드밸런싱이 되지 않고 주 대상으로만 연결된 모습</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772304-b4209f00-d906-11eb-8fdf-b3e323602957.JPG\" alt=\"6  장애조치 라우팅 검증\"></p>\n<ul>\n<li>\n<p>주 대상 장애를 일으키기 위해 EC2-1 인스턴스 중지 후 테스트</p>\n<ul>\n<li>보조 대상으로만 연결되는 모습(EC2-2)</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772307-b4209f00-d906-11eb-9639-50794cca3002.JPG\" alt=\"6-1  장애조치 라우팅 검증\"></p>\n<ul>\n<li>\n<p>상태 검사 확인</p>\n<ul>\n<li>상태 검사에서도 주 대상이 <strong>비정상</strong>인 것을 확인할 수 있음</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/123772309-b4b93580-d906-11eb-9285-58d5299a6b6b.JPG\" alt=\"7  상태 검사 확인\"></p>\n<blockquote>\n<p>상태 검사 주기에 따라 인스턴스의 상태를 확인하고 파악하는데 약간의 딜레이가 발생할 수 있습니다. 원하는 동작이 이루어지지 않았을 때 잠시 후 다시 시도해봐야 합니다.</p>\n</blockquote>\n<h2 id=\"자원-삭제-1\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C-1\" aria-label=\"자원 삭제 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원 삭제</h2>\n<ul>\n<li>Route53 상태 검사 삭제</li>\n<li>호스팅 영역 레코드 삭제</li>\n<li>호스팅 영역 삭제</li>\n<li>CloudFormation 자원 삭제</li>\n</ul>","frontmatter":{"title":"[AWS] Route53 구성 및 라우팅 정책","date":"June 29, 2021","category":"☁️ cloud"}}},"pageContext":{"slug":"/cloud/[AWS] Route53 구성 및 라우팅 정책/","previous":{"fields":{"slug":"/cloud/[AWS] 가비아 도메인 구입 후 AWS-Route53 연결하기/"},"frontmatter":{"title":"[AWS] 가비아 도메인 구입 후 AWS-Route53 연결하기","category":"☁️ cloud","draft":false}},"next":{"fields":{"slug":"/코드로서구현/파이썬 RESTAPI 서버 구현/"},"frontmatter":{"title":"파이썬 RESTAPI 서버 구현","category":"🎮 코드로서구현","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}