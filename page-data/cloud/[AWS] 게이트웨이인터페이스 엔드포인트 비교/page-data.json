{"componentChunkName":"component---src-templates-blog-post-js","path":"/cloud/[AWS] 게이트웨이인터페이스 엔드포인트 비교/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"4f52c139-c861-54b7-bfe3-d6453802c03f","excerpt":"VPC 엔드포인트의 게이트웨이 엔드포인트와 인터페이스 엔드포인트 기능 활용하여, AWS 특정 서비스에 대한 프라이빗 연결을 확인하고 통신 과정을 실습 실습과정 기본 환경 구성 CloudFormation 적용 생성 자원 확인 기본 환경 검증 게이트웨이 엔드포인트 생성 및 검증 게이트웨이 엔드포인트 생성 게이트웨이 엔드포인트 검증 인터페이스 엔드포인트 생성 및 검증 인터페이스 엔드포인트 생성 인터페이스 엔드포인트 검증 자원 삭제 기본 환경 구성 CloudFormation…","html":"<p>VPC 엔드포인트의 <strong>게이트웨이 엔드포인트와 인터페이스 엔드포인트 기능 활용</strong>하여, AWS 특정 서비스에 대한 프라이빗 연결을 확인하고 통신 과정을 실습</p>\n<h2 id=\"실습과정\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5%EA%B3%BC%EC%A0%95\" aria-label=\"실습과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습과정</h2>\n<h3 id=\"기본-환경-구성\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\"기본 환경 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h3>\n<ol>\n<li>CloudFormation 적용</li>\n<li>생성 자원 확인</li>\n<li>기본 환경 검증</li>\n</ol>\n<h3 id=\"게이트웨이-엔드포인트-생성-및-검증\" style=\"position:relative;\"><a href=\"#%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B2%80%EC%A6%9D\" aria-label=\"게이트웨이 엔드포인트 생성 및 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>게이트웨이 엔드포인트 생성 및 검증</h3>\n<ol>\n<li>게이트웨이 엔드포인트 생성</li>\n<li>게이트웨이 엔드포인트 검증</li>\n</ol>\n<h3 id=\"인터페이스-엔드포인트-생성-및-검증\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B2%80%EC%A6%9D\" aria-label=\"인터페이스 엔드포인트 생성 및 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터페이스 엔드포인트 생성 및 검증</h3>\n<ol>\n<li>인터페이스 엔드포인트 생성</li>\n<li>인터페이스 엔드포인트 검증</li>\n</ol>\n<h3 id=\"자원-삭제\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C\" aria-label=\"자원 삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원 삭제</h3>\n<h2 id=\"기본-환경-구성-1\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-1\" aria-label=\"기본 환경 구성 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 구성</h2>\n<h3 id=\"cloudformation-자원-적용\" style=\"position:relative;\"><a href=\"#cloudformation-%EC%9E%90%EC%9B%90-%EC%A0%81%EC%9A%A9\" aria-label=\"cloudformation 자원 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CloudFormation 자원 적용</h3>\n<ul>\n<li>경로: 서비스 - CloudFormation - 스택 - 스택 생성 클릭</li>\n<li>AWS 인프라 자원을 생성할 [YAML 파일]</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">Parameters</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> Name of an existing EC2 KeyPair to enable SSH access to the instances. Linked to AWS Parameter\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyPair<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>KeyName\n    <span class=\"token key atrule\">ConstraintDescription</span><span class=\"token punctuation\">:</span> must be the name of an existing EC2 KeyPair.\n  <span class=\"token key atrule\">LatestAmiId</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Description</span><span class=\"token punctuation\">:</span> (DO NOT CHANGE)\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'AWS::SSM::Parameter::Value&lt;AWS::EC2::Image::Id>'</span>\n    <span class=\"token key atrule\">Default</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2'</span>\n    <span class=\"token key atrule\">AllowedValues</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> /aws/service/ami<span class=\"token punctuation\">-</span>amazon<span class=\"token punctuation\">-</span>linux<span class=\"token punctuation\">-</span>latest/amzn2<span class=\"token punctuation\">-</span>ami<span class=\"token punctuation\">-</span>hvm<span class=\"token punctuation\">-</span>x86_64<span class=\"token punctuation\">-</span>gp2\n\n<span class=\"token key atrule\">Resources</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">CloudNetaVPC</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPC\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/16\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>VPC\n\n  <span class=\"token key atrule\">CloudNetaIGW</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>InternetGateway\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>IGW\n\n  <span class=\"token key atrule\">CloudNetaIGWAttachment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>VPCGatewayAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InternetGatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaIGW\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n\n  <span class=\"token key atrule\">CloudNetaPublicRT</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>RouteTable\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>RT\n\n  <span class=\"token key atrule\">DefaultPublicRoute</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Route\n    <span class=\"token key atrule\">DependsOn</span><span class=\"token punctuation\">:</span> CloudNetaIGWAttachment\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPublicRT\n      <span class=\"token key atrule\">DestinationCidrBlock</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n      <span class=\"token key atrule\">GatewayId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaIGW\n\n  <span class=\"token key atrule\">CloudNetaPrivateRT</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>RouteTable\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Private<span class=\"token punctuation\">-</span>RT\n\n  <span class=\"token key atrule\">CloudNetaPublicSN</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.0.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>SN\n\n  <span class=\"token key atrule\">CloudNetaPrivateSN</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Subnet\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n      <span class=\"token key atrule\">AvailabilityZone</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Select</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token tag\">!GetAZs</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">CidrBlock</span><span class=\"token punctuation\">:</span> 10.0.1.0/24\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Private<span class=\"token punctuation\">-</span>SN\n\n  <span class=\"token key atrule\">CloudNetaPublicSNRouteTableAssociation</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPublicRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPublicSN\n\n  <span class=\"token key atrule\">CloudNetaPrivateSNRouteTableAssociation</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SubnetRouteTableAssociation\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">RouteTableId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPrivateRT\n      <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPrivateSN\n\n  <span class=\"token key atrule\">CloudNetaSecurityGroup</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>SecurityGroup\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">GroupDescription</span><span class=\"token punctuation\">:</span> Enable HTTP access via port 80 and SSH access via port 22\n      <span class=\"token key atrule\">VpcId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaVPC\n      <span class=\"token key atrule\">SecurityGroupIngress</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'80'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">IpProtocol</span><span class=\"token punctuation\">:</span> tcp\n          <span class=\"token key atrule\">FromPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">ToPort</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'22'</span>\n          <span class=\"token key atrule\">CidrIp</span><span class=\"token punctuation\">:</span> 0.0.0.0/0\n\n  <span class=\"token key atrule\">CloudNetaPublicEC2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Public<span class=\"token punctuation\">-</span>EC2\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPublicSN\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> CloudNetaSecurityGroup\n          <span class=\"token key atrule\">AssociatePublicIpAddress</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n  <span class=\"token key atrule\">CloudNetaPrivateEC2</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">Type</span><span class=\"token punctuation\">:</span> AWS<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>EC2<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>Instance\n    <span class=\"token key atrule\">Properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">InstanceType</span><span class=\"token punctuation\">:</span> t2.micro\n      <span class=\"token key atrule\">ImageId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> LatestAmiId\n      <span class=\"token key atrule\">KeyName</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> KeyName\n      <span class=\"token key atrule\">Tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">Key</span><span class=\"token punctuation\">:</span> Name\n          <span class=\"token key atrule\">Value</span><span class=\"token punctuation\">:</span> CloudNeta<span class=\"token punctuation\">-</span>Private<span class=\"token punctuation\">-</span>EC2\n      <span class=\"token key atrule\">NetworkInterfaces</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">DeviceIndex</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n          <span class=\"token key atrule\">SubnetId</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Ref</span> CloudNetaPrivateSN\n          <span class=\"token key atrule\">GroupSet</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token tag\">!Ref</span> CloudNetaSecurityGroup\n      <span class=\"token key atrule\">UserData</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">Fn::Base64</span><span class=\"token punctuation\">:</span> <span class=\"token tag\">!Sub</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          #!/bin/bash\n          (\n          echo \"qwe123\"\n          echo \"qwe123\"\n          ) | passwd --stdin root\n          sed -i \"s/^PasswordAuthentication no/PasswordAuthentication yes/g\" /etc/ssh/sshd_config\n          sed -i \"s/^#PermitRootLogin yes/PermitRootLogin yes/g\" /etc/ssh/sshd_config\n          service sshd restart</span></code></pre></div>\n<ul>\n<li>YAML 템플릿을 업로드하여 설정</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621413-d1458780-c498-11eb-8ef6-0d426541b3b3.JPG\" alt=\"1-1클라우드포메이션 스택생성\"></p>\n<ul>\n<li>\n<p>스택 세부정보 설정</p>\n<ul>\n<li>이름, 생성한 키페어 설정</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621416-d276b480-c498-11eb-8e7b-3ced0b988e29.JPG\" alt=\"1-2클라우드포메이션 스택설정\"></p>\n<h3 id=\"생성된-자원으로-통신-확인\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EC%84%B1%EB%90%9C-%EC%9E%90%EC%9B%90%EC%9C%BC%EB%A1%9C-%ED%86%B5%EC%8B%A0-%ED%99%95%EC%9D%B8\" aria-label=\"생성된 자원으로 통신 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생성된 자원으로 통신 확인</h3>\n<ul>\n<li>\n<p>처음 퍼블릭 EC2에 접근 후 <em>AWS-S3</em> 서비스로 통신 확인</p>\n<ul>\n<li>ping 반환을 통해 통신이 잘 되는 것을 확인</li>\n</ul>\n</li>\n<li>\n<p>SSH 프로토콜을 통해 <strong>로컬 네트워크로 프라이빗 EC2 접근(암호 입력 방식)</strong></p>\n<ul>\n<li>ping 반환이 안되는 것을 확인(퍼블릭 IP에 대한 접근 불가능)</li>\n<li>프라이빗 라우팅 테이블에는 <strong>외부와 통신할 수 있는 NAT 게이트웨이 등이 설정되어 있지 않음</strong></li>\n</ul>\n</li>\n<li>위와 같은 환경에서 <strong>모든 네트워크가 S3와 통신이 가능하고, 외부 인터넷이 아닌 AWS 내부 네트워크를 통해 통신하기를 원한다면 VPC 엔드포인트 기능을 활용</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621418-d30f4b00-c498-11eb-90c4-6963c9352c25.JPG\" alt=\"1-3퍼블릭,프라이빗통신확인\"></p>\n<h2 id=\"게이트웨이-엔드포인트-생성-및-검증-1\" style=\"position:relative;\"><a href=\"#%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B2%80%EC%A6%9D-1\" aria-label=\"게이트웨이 엔드포인트 생성 및 검증 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>게이트웨이 엔드포인트 생성 및 검증</h2>\n<ul>\n<li>VPC 엔드포인트는 <strong>AWS 대상 서비스에 따라 게이트웨이, 인터페이스 타입으로 나뉨</strong></li>\n<li>이중 게이트웨이 엔드포인트는 S3, DynamoDB 서비스에 대해 연결이 가능(S3 서비스 사용예정)</li>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 엔드포인트 - 엔드포인트 생성 클릭</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621422-d3a7e180-c498-11eb-8c98-064341116043.JPG\" alt=\"1-4엔드포인트생성\"></p>\n<h3 id=\"프라이빗-라우팅테이블-정보확인\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EB%9D%BC%EC%9A%B0%ED%8C%85%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%A0%95%EB%B3%B4%ED%99%95%EC%9D%B8\" aria-label=\"프라이빗 라우팅테이블 정보확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 라우팅테이블 정보확인</h3>\n<ul>\n<li>\n<p>이전에 프라이빗 라우팅에는 로컬 네트워크만 등록되어 있던 상태</p>\n<ul>\n<li>따라서 S3 버킷 객체를 URL로 외부 통신할 수 없었음</li>\n</ul>\n</li>\n<li>\n<p>엔드포인트 생성과 함께 S3 서비스를 엔드포인트에 등록, 프라이빗 라우팅 테이블도 등록</p>\n<ul>\n<li>밑에 사진에 S3 서비스에 대한 경로가 세부정보에 추가된 모습</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621425-d4407800-c498-11eb-9d02-a9a5857950e3.JPG\" alt=\"1-5라우팅테이블-라우팅정보확인\"></p>\n<ul>\n<li>퍼블릭 라우팅 테이블 또한 S3에 대한 경로가 추가된 모습</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621430-d4d90e80-c498-11eb-86d1-a7923e434049.JPG\" alt=\"1-6라우팅테이블-정보확인\"></p>\n<h3 id=\"게이트웨이-엔드포인트-검증\" style=\"position:relative;\"><a href=\"#%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EA%B2%80%EC%A6%9D\" aria-label=\"게이트웨이 엔드포인트 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>게이트웨이 엔드포인트 검증</h3>\n<ul>\n<li>\n<p>S3 서비스 연결을 위해 <strong>게이트웨이 엔드포인트를 생성</strong>, 실제 EC2 인스턴스에 접속하여 통신 검증</p>\n<ul>\n<li>퍼블릭 EC2 통신은 기존과 같이 잘 되는 모습</li>\n<li>프라이빗 EC2 통신은 <strong>AWS의 내부 네트워크를 통해 S3와 통신</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621434-d4d90e80-c498-11eb-9bb0-0b4da67b128c.JPG\" alt=\"1-7 통신확인\"></p>\n<h2 id=\"인터페이스-엔드포인트-생성-및-검증-1\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B2%80%EC%A6%9D-1\" aria-label=\"인터페이스 엔드포인트 생성 및 검증 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터페이스 엔드포인트 생성 및 검증</h2>\n<h3 id=\"인터페이스-엔드포인트-생성\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"인터페이스 엔드포인트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터페이스 엔드포인트 생성</h3>\n<ul>\n<li>\n<p>이번 실습에서는 S3와 DynamoDB가 아닌 CloudFormation 서비스로 변경하여 통신을 실험</p>\n<ul>\n<li>아까도 말했듯이, <strong>AWS의 서비스에 따라 엔드포인트의 종류가 바뀜</strong></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">dig</code> 명령어를 통해 CloudFormation DNS 주소에 대한 IP 주소를 확인</p>\n<ul>\n<li>퍼블릭 EC2와 프라이빗 EC2 각각 체크</li>\n<li><strong>현재 DNS 주소는</strong> 퍼블릭 IP 주소로 매핑되어 있어 <strong>외부 인터넷 구간을 통해 통신하는 환경</strong></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">dig</span> +short cloudformation.ap-northeast-2.amazonaws.com</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621435-d60a3b80-c498-11eb-8455-4ae61f429484.JPG\" alt=\"1-8디그명령어를 통해 아이피주소확인\"></p>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>중요내용</p>\n<ul>\n<li><u><strong>AWS 서비스는 리전별로 기본 DNS 호스트 주소를 가지고 있습니다</strong>.</u></li>\n<li>여기에 VPC 인터페이스 엔드포인트를 생성하면, <strong>엔드포인트 전용 DNS 호스트가 생성됩니다</strong>.</li>\n<li>\n<p>인터페이스 엔드포인트의 설정 값중에 <strong>프라이빗 DNS 활성화 설정</strong> 여부에 따라 통신흐름이 바뀌게 됩니다.</p>\n<ul>\n<li>프라이빗 DNS 활성화 시 기본 DNS, 엔드포인트 전용 DNS 모두 <u><strong>인터페이스 엔드포인트를 통한 프라이빗 통신</strong></u></li>\n<li>프라이빗 DNS 비활성화 시 <u><strong>기본 DNS 주소는 인터넷 구간을 통한 퍼블릭 통신</strong></u></li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n<h3 id=\"프라이빗-dns-활성화\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-dns-%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"프라이빗 dns 활성화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 DNS 활성화</h3>\n<ul>\n<li>경로: 서비스 - VPC - 가상 프라이빗 클라우드 - VPC - 작업 - DNS 호스트 이름 편집 클릭</li>\n<li>프라이빗 DNS 활성화하려면 <strong>DNS 호스트 이름 활성화</strong>을 체크해야 합니다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621442-d6a2d200-c498-11eb-9acf-ba1d580bb147.JPG\" alt=\"1-9프라이빗디엔에스활성화\"></p>\n<ul>\n<li>위 작업 완료 후 경로: 서비스 - VPC - 가상 프라이빗 클라우드 - 엔드포인트 - 엔드포인트 생성 클릭</li>\n<li>필터링 검색으로 인터페이스 엔드포인트 선택, 퍼블릭/프라이빗 서브넷 선택, <strong>프라이빗 DNS 이름 활성화 체크</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621449-d73b6880-c498-11eb-84d6-4a832ca82930.JPG\" alt=\"1-10인터페이스엔드포인트생성\"></p>\n<ul>\n<li>\n<p>기본 DNS 호스트는 동일한 형태이지만, 엔드포인트 전용 DNS 호스트는 <strong>개별적으로 다른 형태의 주소를 가집니다.</strong></p>\n<ul>\n<li>아래 사진에서 <u><em>Private DNS names</em> 부분이 기본 DNS 호스트</u></li>\n</ul>\n</li>\n<li>\n<p>해당 인터페이스 엔드포인트는 <strong>프라이빗 서브넷 내에 배치되었으며, CloudFormation과 연결되어 있습니다.</strong></p>\n<ul>\n<li>위에서 중요 내용으로 언급한 것과 마찮가지로 <strong>프라이빗 DNS 활성화를 통해</strong> 퍼블릭이 아닌 VPC 내부 인터넷으로 통신하는 것(퍼블릭EC2, 프라이빗EC2 둘다)</li>\n<li>추가로, 프라이빗 DNS 활성화 시키면 <u><strong>기본 DNS, 인터페이스 DNS 모두 인터페이스 엔드포인트를 통해 통신</strong></u>한다고 하였다.(밑에 사진에 나옴 - 기억해두기)</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621454-d9052c00-c498-11eb-9efe-00870b192d17.JPG\" alt=\"1-11인터페이스엔드포인트확인\"></p>\n<h3 id=\"인터페이스-엔드포인트-검증\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EA%B2%80%EC%A6%9D\" aria-label=\"인터페이스 엔드포인트 검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인터페이스 엔드포인트 검증</h3>\n<ul>\n<li>CloudFormation 서비스 연결을 위해 인터페이스 엔드포인트 생성 완료</li>\n<li>\n<p>실제 EC2 환경에서 <strong>CloudFormation의 DNS 주소에 대한 매핑 정보를 검증</strong>하고, <strong>최초 환경과 통신 흐름을 비교</strong></p>\n<ul>\n<li>DNS 매핑 주소를 <code class=\"language-text\">dig</code> 명령어를 통해 검증</li>\n<li>최초의 퍼블릭 IP로 나오던 주소가 바뀌게 되었습니다. (각각 퍼블릭, 프라이빗)</li>\n<li>사진에도 보듯이 프라이빗 IP 대역으로 IP가 바뀌었음 / 해당 IP 주소는 <strong>인터페이스 엔드포인트의 주소</strong></li>\n</ul>\n</li>\n<li>인터페이스 엔드포인트를 통해 <strong>외부 네트워크를 사용하지 않고, AWS의 내부 네트워크로 CloudFormation이랑 통신을 한 것</strong></li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621459-d99dc280-c498-11eb-8f48-6f6e8f5d399e.JPG\" alt=\"1-12 인터페이스 엔드포인트 검증\"></p>\n<h3 id=\"번외-프라이빗-dns-이름을-비활성화한다면\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-dns-%EC%9D%B4%EB%A6%84%EC%9D%84-%EB%B9%84%ED%99%9C%EC%84%B1%ED%99%94%ED%95%9C%EB%8B%A4%EB%A9%B4\" aria-label=\"번외 프라이빗 dns 이름을 비활성화한다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>번외: 프라이빗 DNS 이름을 비활성화한다면</h3>\n<ul>\n<li>\n<p>기존에 생성한 인터페이스 엔드포인트 삭제 후 재생성</p>\n<ul>\n<li>이때, <strong>프라이빗 DNS 활성화 체크 해제 후</strong>, 다시 테스트</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621465-daceef80-c498-11eb-8ae5-54afa3f3e557.JPG\" alt=\"1-13 프라이빗 디엔에스 이름 체크해제\"></p>\n<ul>\n<li>\n<p>재생성 후, 테스트 결과</p>\n<ul>\n<li><strong>프라이빗 DNS 이름 비활성화</strong>에 의해 기본 DNS 호스트는 퍼블릭 IP로 퍼블릭 통신을,</li>\n<li>엔드포인트 전용 DNS 호스트 이용시 프라이빗 IP로 프라이빗 통신을 합니다.</li>\n<li><strong>즉, 프라이빗 DNS 이름 비활성화 설정에 따라 기본 DNS 통신과 엔드포인트 DNS 통신이 다른 형태를 가지게 됩니다.</strong></li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/120621470-dc001c80-c498-11eb-8db0-1dd0e4868f69.JPG\" alt=\"1-14 프라이빗 디엔에스 비활성화\"></p>\n<h2 id=\"자원-삭제-1\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90-%EC%82%AD%EC%A0%9C-1\" aria-label=\"자원 삭제 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원 삭제</h2>\n<ul>\n<li>엔드포인트 삭제</li>\n<li>CloudFormation 삭제</li>\n</ul>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>따라하며 배우는 AWS 네트워크 입문</p>","frontmatter":{"title":"[AWS] 게이트웨이/인터페이스 엔드포인트 비교","date":"June 03, 2021","category":"☁️ cloud"}}},"pageContext":{"slug":"/cloud/[AWS] 게이트웨이인터페이스 엔드포인트 비교/","previous":{"fields":{"slug":"/cloud/[AWS] 퍼블릭,프라이빗 서브넷 VPC 구성 및 통신/"},"frontmatter":{"title":"[AWS] 퍼블릭,프라이빗 서브넷 VPC 구성 및 통신","category":"☁️ cloud","draft":false}},"next":{"fields":{"slug":"/network/[후니]_2. 캐스트, OSI 7 Layer, 프로토콜/"},"frontmatter":{"title":"[후니] 2. 캐스트, OSI 7 Layer, 프로토콜","category":"🌐 network","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}