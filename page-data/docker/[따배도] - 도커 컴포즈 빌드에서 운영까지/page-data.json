{"componentChunkName":"component---src-templates-blog-post-js","path":"/docker/[ë”°ë°°ë„] - ë„ì»¤ ì»´í¬ì¦ˆ ë¹Œë“œì—ì„œ ìš´ì˜ê¹Œì§€/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"98946c2a-2b83-56ab-a20f-a564b185ee0e","excerpt":"ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•´ë³´ê³  ìµí˜€ë´…ì‹œë‹¤! ë„ì»¤ ì»´í¬ì¦ˆê°€ ë¬´ì—‡ì¸ê°€ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì •ì˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íˆ´ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•´ì•¼ í•¨ ì»¨í…Œì´ë„ˆí™” ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì„ í†µí•© ê´€ë¦¬í•  ìˆ˜ ìˆìŒ YAML íŒŒì¼ í˜•ì‹ì˜ ì •ì˜ë¥¼ í†µí•´ ë„ì»¤ íŒŒì¼ë“¤ì„ ì •ì˜í•˜ê³  ì‚¬ìš© ë˜ëŠ” ë„ì»¤ ì»´í¬ì¦ˆì˜  ëª…ë ¹ì–´ë¥¼ í†µí•´  ëª…ë ¹ì–´ì²˜ëŸ¼ ë°”ë¡œ ì‹¤í–‰ë„ ê°€ëŠ¥ ì»´í¬ì¦ˆ YAML íŒŒì¼ ëª…ë ¹ì–´ ì •ë¦¬  : composeâ€¦","html":"<p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•´ë³´ê³  ìµí˜€ë´…ì‹œë‹¤!</p>\n<h2 id=\"ë„ì»¤-ì»´í¬ì¦ˆê°€-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%BB%B4%ED%8F%AC%EC%A6%88%EA%B0%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"ë„ì»¤ ì»´í¬ì¦ˆê°€ ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë„ì»¤ ì»´í¬ì¦ˆê°€ ë¬´ì—‡ì¸ê°€</h2>\n<ul>\n<li>\n<p><strong><u>ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì¼ê´„ì ìœ¼ë¡œ ì •ì˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íˆ´</u></strong></p>\n<ul>\n<li>í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•´ì•¼ í•¨</li>\n<li>ì»¨í…Œì´ë„ˆí™” ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì„ í†µí•© ê´€ë¦¬í•  ìˆ˜ ìˆìŒ</li>\n<li>YAML íŒŒì¼ í˜•ì‹ì˜ ì •ì˜ë¥¼ í†µí•´ ë„ì»¤ íŒŒì¼ë“¤ì„ ì •ì˜í•˜ê³  ì‚¬ìš©</li>\n<li>ë˜ëŠ” ë„ì»¤ ì»´í¬ì¦ˆì˜ <code class=\"language-text\">image</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ <code class=\"language-text\">docker run</code> ëª…ë ¹ì–´ì²˜ëŸ¼ ë°”ë¡œ ì‹¤í–‰ë„ ê°€ëŠ¥</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ì»´í¬ì¦ˆ-yaml-íŒŒì¼-ëª…ë ¹ì–´-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%BB%B4%ED%8F%AC%EC%A6%88-yaml-%ED%8C%8C%EC%9D%BC-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%95%EB%A6%AC\" aria-label=\"ì»´í¬ì¦ˆ yaml íŒŒì¼ ëª…ë ¹ì–´ ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì»´í¬ì¦ˆ YAML íŒŒì¼ ëª…ë ¹ì–´ ì •ë¦¬</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">version</code> : compose ë²„ì „.</p>\n<ul>\n<li>ë²„ì „ì— ë”°ë¼ ì§€ì› ë¬¸ë²•ì´ ë‹¤ë¦„</li>\n</ul>\n</li>\n<li><code class=\"language-text\">services</code> : ì»´í¬ì¦ˆë¥¼ ì´ìš©í•´ì„œ ì‹¤í–‰í•  ì»¨í…Œì´ë„ˆ ì˜µì…˜ì„ ì •ì˜</li>\n<li><code class=\"language-text\">build</code> : ë¹Œë“œí•  ë„ì»¤ íŒŒì¼ì˜ ìœ„ì¹˜</li>\n<li>\n<p><code class=\"language-text\">image</code> : composeë¥¼ í†µí•´ ì‹¤í–‰í•  ì´ë¯¸ì§€ë¥¼ ì§€ì •</p>\n<ul>\n<li>ë„ì»¤ íŒŒì¼ ì •ì˜ ì—†ì´ <code class=\"language-text\">run</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ imageë¥¼ í—ˆë¸Œì—ì„œ ë°”ë¡œ pullí•´ì„œ ëŒë¦¬ëŠ” ì—­í• ê³¼ ë¹„ìŠ·</li>\n</ul>\n</li>\n<li><code class=\"language-text\">command</code> : ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ë  ëª…ë ¹ì–´ ì§€ì •</li>\n<li><code class=\"language-text\">port</code> : ì»¨í…Œì´ë„ˆê°€ ê³µê°œí•˜ëŠ” í¬íŠ¸ë¥¼ ë‚˜ì—´</li>\n<li><code class=\"language-text\">link</code> : ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì™€ ì—°ê³„í•  ë•Œ ì—°ê³„í•  ì»¨í…Œì´ë„ˆë¥¼ ì§€ì •</li>\n<li><code class=\"language-text\">expose</code> : í¬íŠ¸ë¥¼ ë§í¬ë¡œ ì—°ê³„ëœ ì»¨í…Œì´ë„ˆì—ê²Œë§Œ ê³µê°œí•  í¬íŠ¸</li>\n<li><code class=\"language-text\">volumes</code> : ì»¨í…Œì´ë„ˆì— ë³¼ë¥¨ì„ ë§ˆìš´ë“œ</li>\n<li><code class=\"language-text\">environment</code> : ì»¨í…Œì´ë„ˆì— ì ìš©í•  í™˜ê²½ë³€ìˆ˜ë¥¼ ì •ì˜</li>\n<li>\n<p><code class=\"language-text\">restart</code> : ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ì ìš©í•  restart ì •ì±…</p>\n<ul>\n<li><code class=\"language-text\">no</code> : default ê°’ - ì¬ì‹œì‘ ë˜ì§€ ì•ŠìŒ</li>\n<li><code class=\"language-text\">always</code> : ì»¨í…Œì´ë„ˆë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë„ê¸° ì „ê¹Œì§€ í•­ìƒ ì¬ì‹œì‘</li>\n<li><code class=\"language-text\">on-failure</code> : ì˜¤ë¥˜ê°€ ìˆì„ ì‹œì— ì¬ì‹œì‘</li>\n</ul>\n</li>\n<li><code class=\"language-text\">depends_on</code> : <strong><u>ì»¨í…Œì´ë„ˆ ê°„ì˜ ì¢…ì†ì„±ì„ ì •ì˜, ì •ì˜í•œ ì»¨í…Œì´ë„ˆê°€ ë¨¼ì € ë™ì‘</u></strong></li>\n</ul>\n<h2 id=\"ë„ì»¤-ì»´í¬ì¦ˆ-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%BB%B4%ED%8F%AC%EC%A6%88-%EC%84%A4%EC%B9%98\" aria-label=\"ë„ì»¤ ì»´í¬ì¦ˆ ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë„ì»¤ ì»´í¬ì¦ˆ ì„¤ì¹˜</h2>\n<ul>\n<li>ê³µì‹ ë˜í¼ëŸ°ìŠ¤ í™•ì¸</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> -L <span class=\"token string\">\"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">uname</span> -s<span class=\"token variable\">)</span></span>-<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">uname</span> -m<span class=\"token variable\">)</span></span>\"</span> -o /usr/local/bin/docker-compose\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n$ docker-compose --version</code></pre></div>\n<h2 id=\"ë„ì»¤-ì»´í¬ì¦ˆ-ì‹¤ìŠµ-1\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%BB%B4%ED%8F%AC%EC%A6%88-%EC%8B%A4%EC%8A%B5-1\" aria-label=\"ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤ìŠµ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤ìŠµ 1</h2>\n<p>Flask, Redis ì»¨í…Œì´ë„ˆë¥¼ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ í†µí•´ ì‹¤í–‰ì‹œì¼œ ë´…ì‹œë‹¤.</p>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">ğŸ’¡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p>ì‹¤ìŠµ ì „ ì•Œì•„ë‘ê¸°!</p>\n<p>ë„ì»¤ ì»´í¬ì¦ˆëŠ” ymlíŒŒì¼ ìœ„ì¹˜ê°€ ìˆëŠ” ê³³ì—ì„œ ì‹¤í–‰ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.<br>\në”°ë¼ì„œ ë””ë ‰í† ë¦¬ ìƒì„± í›„, ë„ì»¤ íŒŒì¼ ì •ì˜, ì»´í¬ì¦ˆ íŒŒì¼ ì •ì˜ ë° ì‹¤í–‰ì„ í•˜ëŠ” ìˆœì„œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</p>\n</div>\n</div>\n<ul>\n<li>í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> composetest\n$ <span class=\"token builtin class-name\">cd</span> composetest</code></pre></div>\n<ul>\n<li>íŒŒì´ì¬ [app.py] íŒŒì¼ ìƒì„± - Flask ì´ìš©</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">cat <span class=\"token operator\">></span> app<span class=\"token punctuation\">.</span>py\n\n<span class=\"token keyword\">import</span> time\n\n<span class=\"token keyword\">import</span> redis\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\ncache <span class=\"token operator\">=</span> redis<span class=\"token punctuation\">.</span>Redis<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'redis'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">6379</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_hit_count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    retries <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">.</span>incr<span class=\"token punctuation\">(</span><span class=\"token string\">'hits'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">except</span> redis<span class=\"token punctuation\">.</span>exceptions<span class=\"token punctuation\">.</span>ConnectionError <span class=\"token keyword\">as</span> exc<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> retries <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">raise</span> exc\n            retries <span class=\"token operator\">-=</span> <span class=\"token number\">1</span>\n            time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    count <span class=\"token operator\">=</span> get_hit_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello World! I have been seen {} times.\\n'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬ [requirements.txt] íŒŒì¼ ìƒì„±</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">cat <span class=\"token operator\">></span> requirements<span class=\"token punctuation\">.</span>txt\nflask\nredis</code></pre></div>\n<ul>\n<li>ë„ì»¤ íŒŒì¼ ìƒì„±</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> python<span class=\"token punctuation\">:</span>3.7<span class=\"token punctuation\">-</span>alpine\n<span class=\"token keyword\">WORKDIR</span> /code\n<span class=\"token keyword\">ENV</span> FLASK_APP=app.py\n<span class=\"token keyword\">ENV</span> FLASK_RUN_HOST=0.0.0.0\n<span class=\"token keyword\">RUN</span> apk add <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>cache gcc musl<span class=\"token punctuation\">-</span>dev linux<span class=\"token punctuation\">-</span>headers\n<span class=\"token keyword\">COPY</span> requirements.txt requirements.txt\n<span class=\"token keyword\">RUN</span> pip install <span class=\"token punctuation\">-</span>r requirements.txt\n<span class=\"token keyword\">EXPOSE</span> 5000\n<span class=\"token keyword\">COPY</span> . .\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"flask\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"run\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ [docker-compose.yml] íŒŒì¼ ìƒì„±</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.9'</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'5000:5000'</span>\n  <span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'redis:alpine'</span></code></pre></div>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ yaml íŒŒì¼ ë¬¸ë²• ì²´í¬</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose config</code></pre></div>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤í–‰</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose up</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312075-82a37b2f-8d2a-4235-b676-648112f4f785.JPG\" alt=\"1  docker-compose up í™•ì¸\"></p>\n<p>Flask, Redis ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì˜ ì‹¤í–‰ëœ ëª¨ìŠµì…ë‹ˆë‹¤.</p>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ yaml íŒŒì¼ì— ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì¶”ê°€</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">version: <span class=\"token string\">\"3.9\"</span>\nservices:\n  web:\n    build: <span class=\"token builtin class-name\">.</span>\n    ports:\n      - <span class=\"token string\">\"5000:5000\"</span>\n    <span class=\"token comment\"># ------ì¶”ê°€--------</span>\n    volumes:\n      - .:/code\n    environment:\n      FLASK_ENV: development\n    <span class=\"token comment\"># -----------------</span>\n  redis:\n    image: <span class=\"token string\">\"redis:alpine\"</span></code></pre></div>\n<ul>\n<li>ì´ë²ˆì—ëŠ” ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose up -d</code></pre></div>\n<ul>\n<li>[app.py] íŒŒì¼ì„ ìˆ˜ì • ì‹œ, ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¥¼ í†µí•´ì„œ ë°”ë¡œ ì»¨í…Œì´ë„ˆì— ë°˜ì˜ë˜ëŠ” ëª¨ìŠµì„ í™•ì¸</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">$ vi app<span class=\"token punctuation\">.</span>py\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">return</span> Hello Docker!\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312076-ebed45f5-ca43-4270-9332-f861515b7e93.JPG\" alt=\"2  volume ì‚¬ìš©\"></p>\n<ul>\n<li><code class=\"language-text\">scale</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ redis ì»¨í…Œì´ë„ˆ ëŠ˜ë¦¬ê¸°</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose scale <span class=\"token assign-left variable\">redis</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312077-a1156cd0-43a3-4a92-af14-28dbaf36b6ca.JPG\" alt=\"3  redis ìŠ¤ì¼€ì¼ì•„ì›ƒ\"></p>\n<ul>\n<li>\n<p><code class=\"language-text\">run</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ <code class=\"language-text\">docker exec</code> ëª…ë ¹ì–´ì²˜ëŸ¼ ëª…ë ¹ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¤ê¸°</p>\n<ul>\n<li>web ì»¨í…Œì´ë„ˆì— env ëª…ë ¹ì–´ë¥¼ ë‚ ë¦° ê²ƒê³¼ ë™ì¼</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312078-773a180b-8af6-4b96-af9c-39b2b0d3aa8d.JPG\" alt=\"4  docker-compose run\"></p>\n<h2 id=\"ë„ì»¤-ì»´í¬ì¦ˆ-ì‹¤ìŠµ-2\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EC%BB%A4-%EC%BB%B4%ED%8F%AC%EC%A6%88-%EC%8B%A4%EC%8A%B5-2\" aria-label=\"ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤ìŠµ 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤ìŠµ 2</h2>\n<p>wordpressì™€ mysql ì»¨í…Œì´ë„ˆë¥¼ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ í†µí•´ ì‹¤í–‰ì‹œì¼œ ë´…ì‹œë‹¤.</p>\n<blockquote>\n<p>wordpressì˜ ë™ì‘ ë°©ì‹ê³¼ êµ¬ì„± ë‚´ìš©ì€ ë„ì»¤ network í¬ìŠ¤íŒ… or ê³µì‹ ë˜í¼ëŸ°ìŠ¤ ì°¸ê³ </p>\n</blockquote>\n<ul>\n<li>í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> wordpress\n$ <span class=\"token builtin class-name\">cd</span> wordpress</code></pre></div>\n<ul>\n<li>\n<p>ë„ì»¤ ì»´í¬ì¦ˆ [docker-compose.yml] íŒŒì¼ ìƒì„±</p>\n<ul>\n<li>depends_on : db ì»¨í…Œì´ë„ˆ ì´ë¦„ì„ ê°€ì§„ ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ëœ í›„, wordpress ì»¨í…Œì´ë„ˆ ì‹¤í–‰</li>\n<li>volumes : mysql ë°ì´í„°ì™€ wordpress_data ë³¼ë¥¨ ë§ˆìš´íŠ¸</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.9'</span>\n\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db_data<span class=\"token punctuation\">:</span>/var/lib/mysql\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">MYSQL_ROOT_PASSWORD</span><span class=\"token punctuation\">:</span> somewordpress\n      <span class=\"token key atrule\">MYSQL_DATABASE</span><span class=\"token punctuation\">:</span> wordpress\n      <span class=\"token key atrule\">MYSQL_USER</span><span class=\"token punctuation\">:</span> wordpress\n      <span class=\"token key atrule\">MYSQL_PASSWORD</span><span class=\"token punctuation\">:</span> wordpress\n\n  <span class=\"token key atrule\">wordpress</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> db\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wordpress<span class=\"token punctuation\">:</span>latest\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> wordpress_data<span class=\"token punctuation\">:</span>/var/www/html\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'8080:80'</span>\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">WORDPRESS_DB_HOST</span><span class=\"token punctuation\">:</span> db<span class=\"token punctuation\">:</span><span class=\"token number\">3306</span>\n      <span class=\"token key atrule\">WORDPRESS_DB_USER</span><span class=\"token punctuation\">:</span> wordpress\n      <span class=\"token key atrule\">WORDPRESS_DB_PASSWORD</span><span class=\"token punctuation\">:</span> wordpress\n      <span class=\"token key atrule\">WORDPRESS_DB_NAME</span><span class=\"token punctuation\">:</span> wordpress\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">db_data</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">wordpress_data</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ ì‹¤í–‰</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose up -d</code></pre></div>\n<ul>\n<li>wordpressê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312079-a23ce51f-2bcf-4ea1-8585-978510f587e4.JPG\" alt=\"5  wordpress ìƒì„±\"></p>\n<ul>\n<li>\n<p>ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¥¼ í™•ì¸</p>\n<ul>\n<li><code class=\"language-text\">&#39;/var/lib/docker/volumes/í´ë”ëª…/ë³¼ë¥¨ëª…/_data&#39;</code> í˜•íƒœë¡œ í‘œì‹œê°€ ë©ë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker volume inspect ë³¼ë¥¨ ë°ì´í„° ì´ë¦„</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312080-4a760511-da7f-4dee-87d0-b492018ff13a.JPG\" alt=\"6  volume í™•ì¸\"></p>\n<ul>\n<li>\n<p>í•´ë‹¹ ê²½ë¡œë¡œ ì§„ì…í•´ì„œ í™•ì¸</p>\n<ul>\n<li>root ê³„ì • ì ‘ì† í•„ìš”</li>\n<li>mysqlê³¼ wordpressì˜ ë°ì´í„°ê°€ ìŒ“ì—¬ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312081-324791e4-9b13-4d11-837a-a153c6e2f5c2.JPG\" alt=\"6-1  volume í™•ì¸\"></p>\n<ul>\n<li>\n<p>ë„ì»¤ ì»´í¬ì¦ˆ ì •ë¦¬</p>\n<ul>\n<li><code class=\"language-text\">--volumes</code> ì¶”ê°€ ì˜µì…˜ì„ í†µí•´ ë³¼ë¥¨ë§ˆìš´íŠ¸ê¹Œì§€ ì •ë¦¬ëœ ëª¨ìŠµ</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker-compose down --volume</code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/130312082-fe218b85-567d-481d-a253-8293f3372d85.JPG\" alt=\"7  ìµœì¢…\"></p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://docs.docker.com/compose/install/\">ë„ì»¤ì»´í¬ì¦ˆ ì„¤ì¹˜</a></p>","frontmatter":{"title":"[ë”°ë°°ë„] - ë„ì»¤ ì»´í¬ì¦ˆ ë¹Œë“œì—ì„œ ìš´ì˜ê¹Œì§€","date":"August 21, 2021","category":"ğŸ³ docker"}}},"pageContext":{"slug":"/docker/[ë”°ë°°ë„] - ë„ì»¤ ì»´í¬ì¦ˆ ë¹Œë“œì—ì„œ ìš´ì˜ê¹Œì§€/","previous":{"fields":{"slug":"/linux/ë¦¬ëˆ…ìŠ¤ ìŠ¤í† ë¦¬ì§€ ë§ˆìš´íŠ¸/"},"frontmatter":{"title":"ë¦¬ëˆ…ìŠ¤ ìŠ¤í† ë¦¬ì§€ ë§ˆìš´íŠ¸","category":"ğŸ–¥ï¸ linux","draft":false}},"next":{"fields":{"slug":"/Kubernetes/[ë”°ë°°ì¿ ] ì•„í‚¤í…ì²˜ & ë„¤ì„ìŠ¤í˜ì´ìŠ¤/"},"frontmatter":{"title":"[ë”°ë°°ì¿ ] ì•„í‚¤í…ì²˜ & ë„¤ì„ìŠ¤í˜ì´ìŠ¤","category":"ğŸ§­ Kubernetes","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}