{"componentChunkName":"component---src-templates-blog-post-js","path":"/docker/[따배도] - 도커 컨테이너 만들어보기/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"c0435d3f-8209-55fe-b266-6ae3bab1dc6b","excerpt":"의 개념과 컨테이너 이미지를 직접 만들어보고 배포해 봅시다. 무엇을 컨테이너로 만드는 건가요? 도커란 개발한 애플리케이션(실행파일)과 운영환경이 모두 들어있는 독립된 공간 기술 면접에서 조금 더 전문적으로 말하기 위해 필자는 “독립된 환경에서 하나의 애플리케이션을 구동시키기 위한 코드와 그 모든 종속성을 패키징 하는 기술”이라고 연습했었다… 개발한 프로그램과 실행환경을 모두 컨테이너로 만듭니다. MSA(Micro Service Architecture) 환경의 Polyglot…","html":"<p><code class=\"language-text\">dockerfile</code>의 개념과 컨테이너 이미지를 직접 만들어보고 배포해 봅시다.</p>\n<h2 id=\"무엇을-컨테이너로-만드는-건가요\" style=\"position:relative;\"><a href=\"#%EB%AC%B4%EC%97%87%EC%9D%84-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%A1%9C-%EB%A7%8C%EB%93%9C%EB%8A%94-%EA%B1%B4%EA%B0%80%EC%9A%94\" aria-label=\"무엇을 컨테이너로 만드는 건가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>무엇을 컨테이너로 만드는 건가요?</h2>\n<blockquote>\n<p>도커란 개발한 애플리케이션(실행파일)과 운영환경이 모두 들어있는 독립된 공간<br>\n기술 면접에서 조금 더 전문적으로 말하기 위해 필자는 “독립된 환경에서 하나의 애플리케이션을 구동시키기 위한 코드와 그 모든 종속성을 패키징 하는 기술”이라고 연습했었다…</p>\n</blockquote>\n<ul>\n<li>개발한 프로그램과 실행환경을 모두 컨테이너로 만듭니다.</li>\n<li>MSA(Micro Service Architecture) 환경의 Polyglot 애플리케이션 운영</li>\n</ul>\n<div class=\"quote-block\">\n<div class=\"quote-block__emoji\">💡</div>\n<div class=\"quote-block__content\" markdown=1>\n<p><code class=\"language-text\">Polyglot</code> 란?</p>\n<p>다양한 언어로(해당 서비스를 구성할 때 최적화 된 환경을 구축하기 위한 언어)으로 개발하여 하나의 큰 서비스를 이루는 것을 의미합니다.</p>\n</div>\n</div>\n<h2 id=\"컨테이너는-어떻게-만드나요-dockerfile-이란\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%A7%8C%EB%93%9C%EB%82%98%EC%9A%94-dockerfile-%EC%9D%B4%EB%9E%80\" aria-label=\"컨테이너는 어떻게 만드나요 dockerfile 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너는 어떻게 만드나요? Dockerfile 이란?</h2>\n<h3 id=\"dockerfile\" style=\"position:relative;\"><a href=\"#dockerfile\" aria-label=\"dockerfile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dockerfile</h3>\n<ul>\n<li>컨테이너를 만들 수 있도록 도와주는 명령어 집합</li>\n<li>Top-Down으로 해석하는 방식</li>\n<li>고유의 지시어(Instruction)을 가짐(FROM, COPY, CMD etc..)</li>\n<li>대소문자 구분하지 않으나 가독성을 위해 사용함</li>\n</ul>\n<img width=\"487\" alt=\"도커파일 문법\" src=\"https://user-images.githubusercontent.com/66216102/126177054-1ea4ca77-02e1-48a2-a9c7-660b5eb92fb0.PNG\">\n<h2 id=\"내가-만든-컨테이너를-배포하려면\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EA%B0%80-%EB%A7%8C%EB%93%A0-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%A5%BC-%EB%B0%B0%ED%8F%AC%ED%95%98%EB%A0%A4%EB%A9%B4\" aria-label=\"내가 만든 컨테이너를 배포하려면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내가 만든 컨테이너를 배포하려면?</h2>\n<ul>\n<li>도커 이미지 빌드 후 도커 허브에 push하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t hello.js:lastst <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># dockerimage build</span>\n$ docker login <span class=\"token comment\"># dockerhub login</span>\n$ docker push hello.js:latest <span class=\"token comment\"># dockerhub에 push</span></code></pre></div>\n<h2 id=\"실습으로-컨테이너-만들고-배포하기\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5%EC%9C%BC%EB%A1%9C-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B3%A0-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"실습으로 컨테이너 만들고 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습으로 컨테이너 만들고 배포하기</h2>\n<h3 id=\"실습1--nodejs-애플리케이션-컨테이너-만들기\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B51--nodejs-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"실습1  nodejs 애플리케이션 컨테이너 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습1 : nodejs 애플리케이션 컨테이너 만들기</h3>\n<ul>\n<li>작업 폴더 생성 및 소스코드 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> build <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> build <span class=\"token comment\"># 폴더 만들고 진입</span>\n$ <span class=\"token function\">cat</span> <span class=\"token operator\">></span> hello.js\nconst http <span class=\"token operator\">=</span> require<span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconst os <span class=\"token operator\">=</span> require<span class=\"token punctuation\">(</span><span class=\"token string\">'os'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole.log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Test server starting...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nvar handler <span class=\"token operator\">=</span> function<span class=\"token punctuation\">(</span>request, response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console.log<span class=\"token punctuation\">(</span><span class=\"token string\">\"Received request from \"</span> + request.connection.remoteAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  response.wirteHead<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  response.end<span class=\"token punctuation\">(</span><span class=\"token string\">\"Container Hostname: \"</span> + os.hostname<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> + <span class=\"token string\">\"<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nvar www <span class=\"token operator\">=</span> http.createServer<span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwww.listen<span class=\"token punctuation\">(</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>도커 파일 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> node<span class=\"token punctuation\">:</span>12 <span class=\"token comment\"># 베이스 이미지를 노드js로 지정</span>\n<span class=\"token keyword\">COPY</span> hello.js / <span class=\"token comment\"># 호스트 파일을 컨테이너 루트 디렉토리로 복사</span>\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/hello.js\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 컨테이너 동작시 실행하는 코드</span></code></pre></div>\n<ul>\n<li>도커파일의 이미지 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t hellojs:latest <span class=\"token builtin class-name\">.</span>\n$ docker images <span class=\"token comment\"># 이미지 생성 확인</span></code></pre></div>\n<h3 id=\"실습2--우분투-기반의-웹서버-컨테이너-만들기\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B52--%EC%9A%B0%EB%B6%84%ED%88%AC-%EA%B8%B0%EB%B0%98%EC%9D%98-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"실습2  우분투 기반의 웹서버 컨테이너 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습2 : 우분투 기반의 웹서버 컨테이너 만들기</h3>\n<ul>\n<li>작업 폴더 생성 및 진입</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> webserver <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> webserver</code></pre></div>\n<ul>\n<li>도커 파일 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> ubuntu<span class=\"token punctuation\">:</span>18.04\n<span class=\"token keyword\">LABEL</span> maintainer=<span class=\"token string\">\"nickhealthy &lt;alskadmlcraz1@gmail.com>\"</span>\n<span class=\"token comment\"># install apache</span>\n<span class=\"token keyword\">RUN</span> apt<span class=\"token punctuation\">-</span>get update \\\n    &amp;&amp; apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y apache2\n<span class=\"token keyword\">RUN</span> echo <span class=\"token string\">\"TEST WEB\"</span> <span class=\"token punctuation\">></span> /var/www/html/index.html\n<span class=\"token keyword\">EXPOSE</span> 80\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/sbin/apache2ctl\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-DFOREGROUND\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>도커 이미지 빌드</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t webserver:v1 <span class=\"token builtin class-name\">.</span></code></pre></div>\n<ul>\n<li>도커 파일 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -d -p <span class=\"token number\">80</span>:80 --name web webserver:v1</code></pre></div>\n<h3 id=\"컨테이너-배포\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%B0%B0%ED%8F%AC\" aria-label=\"컨테이너 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨테이너 배포</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker login <span class=\"token comment\"># 도커 허브 개인 레포지토리에 올리기 위한 로그인 절차</span>\n$ docker push -t <span class=\"token operator\">&lt;</span>본인ID<span class=\"token operator\">></span>/hellojs\n$ docker push -t <span class=\"token operator\">&lt;</span>본인ID<span class=\"token operator\">></span>/webserver:v1 <span class=\"token comment\"># 버전을 따로 명시하지 않아 latest인 경우 버전명은 생략 가능</span></code></pre></div>\n<h2 id=\"혼자-연습해보기\" style=\"position:relative;\"><a href=\"#%ED%98%BC%EC%9E%90-%EC%97%B0%EC%8A%B5%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"혼자 연습해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>혼자 연습해보기</h2>\n<h3 id=\"기본-구성\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EA%B5%AC%EC%84%B1\" aria-label=\"기본 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 구성</h3>\n<ul>\n<li>데비안 베이스이미지 사용</li>\n<li>무한 반복문 쉘 스크립트 작성</li>\n<li>도커 이미지 파일에 fortune 애플리케이션 설치 후 쉘 스크립트 실행하는 프로그램 작성</li>\n<li>확인절차</li>\n</ul>\n<h3 id=\"연습-시작\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EC%8A%B5-%EC%8B%9C%EC%9E%91\" aria-label=\"연습 시작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연습 시작</h3>\n<ul>\n<li>[webpage.sh] 파일</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> <span class=\"token operator\">></span> webpage.sh\n<span class=\"token comment\">#!/bin/bash</span>\n<span class=\"token function\">mkdir</span> /htdocs\n<span class=\"token keyword\">while</span> <span class=\"token builtin class-name\">:</span>\n<span class=\"token keyword\">do</span>\n    /usr/games/fortune <span class=\"token operator\">></span> /htdocs/index.html\n    <span class=\"token function\">sleep</span> <span class=\"token number\">10</span>\n<span class=\"token keyword\">done</span></code></pre></div>\n<ul>\n<li>도커 파일 생성</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> debian<span class=\"token punctuation\">:</span>latest\n<span class=\"token keyword\">COPY</span> webpage.sh /\n<span class=\"token keyword\">RUN</span> apt<span class=\"token punctuation\">-</span>get update \\\n    &amp;&amp; apt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y fortune\n<span class=\"token keyword\">RUN</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"chmod\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"+x\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./webpage.sh\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 해당 파일을 copy 후 실행 권한이 없어서 따로 추가해 둠</span>\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./webpage.sh\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>도커 파일 생성 및 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker build -t fortune:21.02 <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># 도커 이미지 파일 생성</span>\n$ docker run -d --name fortune fortune:21.02 <span class=\"token comment\"># 도커 파일 실행</span></code></pre></div>\n<ul>\n<li>도커 실행 파일 내부에서 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker <span class=\"token builtin class-name\">exec</span> -it fortune <span class=\"token function\">bash</span>\n<span class=\"token comment\"># 쉘 스크립트에 작성한 경로 /htdocs/index.html 확인</span>\n$ <span class=\"token function\">cat</span> /htdocs/index.html</code></pre></div>\n<p>정상적으로 실행되는 것을 확인할 수 있었습니다.</p>","frontmatter":{"title":"[따배도] - 도커 컨테이너 만들어보기","date":"July 19, 2021","category":"🐳 docker"}}},"pageContext":{"slug":"/docker/[따배도] - 도커 컨테이너 만들어보기/","previous":{"fields":{"slug":"/study/2장 - NCA 대비 클라우드 핵심 인프라 Compute 서비스/"},"frontmatter":{"title":"2장 - NCA 대비 클라우드 핵심 인프라 Compute 서비스","category":"📚 study","draft":false}},"next":null}},"staticQueryHashes":["3128451518","521680639"]}