{"componentChunkName":"component---src-templates-blog-post-js","path":"/docker/[따배도] - 컨테이너 보관창고(Registry)/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"d4223c3a-174b-565f-a445-88d6c1b183c3","excerpt":"도커 이미지를 저장하는 Public 공간과(도커 허브) Private을 구축하는 방법을 알아봅시다. Docker Registry Registry 컨테이너 이미지를 저장하는 저장소 Public은 Docker Hub, Private는 Registry 도커 공식 이미지를 사용합니다. 아래는 도커 허브의 이미지 저장소입니다. Private 공간을 도커 허브 자체에서 사용할 수도 있지만 유료화라 비용을 지불해야 합니다. 1  도커허브 이미지저장소 Private Registry…","html":"<ul>\n<li>도커 이미지를 저장하는 Public 공간과(도커 허브) Private을 구축하는 방법을 알아봅시다.</li>\n</ul>\n<h2 id=\"docker-registry\" style=\"position:relative;\"><a href=\"#docker-registry\" aria-label=\"docker registry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker Registry</h2>\n<h3 id=\"registry\" style=\"position:relative;\"><a href=\"#registry\" aria-label=\"registry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Registry</h3>\n<ul>\n<li>컨테이너 이미지를 저장하는 저장소</li>\n<li>\n<p>Public은 Docker Hub, <u><strong>Private는 Registry 도커 공식 이미지를 사용합니다.</strong></u></p>\n<ul>\n<li>아래는 도커 허브의 이미지 저장소입니다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>Private 공간을 도커 허브 자체에서 사용할 수도 있지만 유료화라 비용을 지불해야 합니다.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/126321344-c223fd65-58e6-4fcb-a058-8e9fb992d940.JPG\" alt=\"1  도커허브 이미지저장소\"></p>\n<h2 id=\"private-registry-구축\" style=\"position:relative;\"><a href=\"#private-registry-%EA%B5%AC%EC%B6%95\" aria-label=\"private registry 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Private Registry 구축</h2>\n<ul>\n<li>도커 허브 공식 이미지에서 관리하는 <code class=\"language-text\">registry</code> 도커 이미지를 사용해 Private 이미지 저장소를 구축할 수 있습니다.</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/126321350-eb8b7d35-0e10-4ec1-88bb-b82846b8e588.JPG\" alt=\"1-1 프라이빗 레지스트리 컨테이너 이미지\"></p>\n<ul>\n<li>실행방법은 하단 참고</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -d -p <span class=\"token number\">5000</span>:5000 --restart always --name registry registry:2</code></pre></div>\n<h3 id=\"image-repository\" style=\"position:relative;\"><a href=\"#image-repository\" aria-label=\"image repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>image repository</h3>\n<ul>\n<li>퍼블릭 공간인 도커 허브에 배포할 땐 <code class=\"language-text\">docker push &lt;호스트네임&gt;:&lt;버전&gt;</code> 형식으로 했지만,</li>\n<li><code class=\"language-text\">&lt;호스트네임&gt;:&lt;포트넘버&gt;/&lt;이미지 이름&gt;:&lt;버전&gt;</code> 형식으로 입력해 주어야 도커 Private 이미지 컨테이너인 Registry에 이미지가 저장됩니다.</li>\n</ul>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<h3 id=\"퍼블릭-컨테이너-저장소\" style=\"position:relative;\"><a href=\"#%ED%8D%BC%EB%B8%94%EB%A6%AD-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%A0%80%EC%9E%A5%EC%86%8C\" aria-label=\"퍼블릭 컨테이너 저장소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>퍼블릭 컨테이너 저장소</h3>\n<ul>\n<li>\n<p><code class=\"language-text\">docker search 이미지</code> 명령어로 이미지 찾아보기</p>\n<ul>\n<li>NAME 또는 DESCRIPTION 에 표시된 이미지들이 표시됨</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker pull httpd:latest</code></pre></div>\n<ul>\n<li>도커 허브에 로그인하고 내 레포지토리에 올리기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker login <span class=\"token comment\"># 도커 허브에 로그인하기</span>\n$ docker pull httpd:latest</code></pre></div>\n<ul>\n<li>도커 허브에 push하기 위한 새로운 tag 설정</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/66216102/126321351-792ea5e5-587d-4e78-9f11-29f55263f131.JPG\" alt=\"2  도커퍼블릭 실습\"></p>\n<ul>\n<li>\n<p>도커 허브에 push</p>\n<ul>\n<li>해당 명령어가 완료되면 <strong>나의 레포지토리</strong>에 정상적으로 이미지가 올라간 것을 확인할 수 있습니다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker push alskadmlcraz/httpd:latest</code></pre></div>\n<h3 id=\"프라이빗-컨테이너-저장소\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%A0%80%EC%9E%A5%EC%86%8C\" aria-label=\"프라이빗 컨테이너 저장소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프라이빗 컨테이너 저장소</h3>\n<ul>\n<li>도커 공식 이미지인 <code class=\"language-text\">registry</code> 컨테이너 이미지 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker run -d -p <span class=\"token number\">5000</span>:5000 --restart always --name registry registry:2</code></pre></div>\n<ul>\n<li>\n<p>위에서 설명한 것과 같이 형식을 맞춰 Tag 저장</p>\n<ul>\n<li><code class=\"language-text\">&lt;호스트네임&gt;:&lt;포트넘버&gt;/&lt;이미지 이름&gt;:&lt;버전&gt;</code></li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker tag httpd:latest localhost:5000/httpd:latest</code></pre></div>\n<ul>\n<li>\n<p>프라이빗 컨테이너 저장소에 이미지가 잘 있는지 확인</p>\n<ul>\n<li>아래 경로에서 <code class=\"language-text\">ls</code> 명령어를 통해 확인 가능</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ /var/lib/docker/volumes/컨테이너ID/_data/docker/registry/v2/repositories</code></pre></div>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://hub.docker.com/\">https://hub.docker.com/</a></p>","frontmatter":{"title":"[따배도] - 컨테이너 보관창고(Registry)","date":"July 20, 2021","category":"🐳 docker"}}},"pageContext":{"slug":"/docker/[따배도] - 컨테이너 보관창고(Registry)/","previous":{"fields":{"slug":"/docker/[따배도] - 도커 컨테이너 만들어보기/"},"frontmatter":{"title":"[따배도] - 도커 컨테이너 만들어보기","category":"🐳 docker","draft":false}},"next":{"fields":{"slug":"/docker/[따배도] - 컨테이너 사용하기/"},"frontmatter":{"title":"[따배도] - 컨테이너 사용하기","category":"🐳 docker","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}