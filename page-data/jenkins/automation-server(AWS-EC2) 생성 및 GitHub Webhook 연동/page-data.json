{"componentChunkName":"component---src-templates-blog-post-js","path":"/jenkins/automation-server(AWS-EC2) ìƒì„± ë° GitHub Webhook ì—°ë™/","result":{"data":{"site":{"siteMetadata":{"title":"Woo's Dev Log","author":"nickhealthy","siteUrl":"https://nickhealthy.github.io","comment":{"disqusShortName":"","utterances":"nickhealthy/nickhealthy.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"39ca3102-6f5f-5ff7-9312-39ce4f8f6e61","excerpt":"ì‚¬ì‹¤ ì´ì „ì— Jenkinsë¥¼ ì´ìš©í•´ì„œ dockerë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸ í•´ë³´ì•˜ëŠ”ë° ìƒê°í•´ë³´ë‹ˆ webhookì„ ì—°ë™í•˜ë ¤ë©´ ì›¹ í˜¸ìŠ¤íŒ…ì´ í•„ìš”í–ˆë‹¤. ë¡œì»¬ì˜ VMìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥â€¦ ê²°êµ­ AWS-EC2ë¡œ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì•˜ë‹¤. AWS - EC2 ìƒì„± ì´ë•Œë™ì•ˆ ìš°ë¶„íˆ¬ ë§Œ ì‚¬ìš©í–ˆê¸°ì— ë¹ ë¥¸ ì‹œì‘ íƒ­ì—ì„œ ì´ë¯¸ì§€ë¥¼ êµ¬í•  ìˆ˜ ìˆì—ˆëŠ”ë°  ì´ë¯¸ì§€ëŠ” AWS-Marketplaceì—ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤. ì´í›„ ì  í‚¤ìŠ¤ì˜ ê¸°ë³¸ í¬íŠ¸ëŠ”  í¬íŠ¸ì´ê¸° ë•Œë¬¸ì— ë³´ì•ˆ ê·¸ë£¹.ì¸ë°”ìš´ë“œì—ì„œ  í¬íŠ¸ë¥¼ ê°œë°©í•´ ì£¼ì—ˆë‹¤. Jenkinsâ€¦","html":"<blockquote>\n<p>ì‚¬ì‹¤ ì´ì „ì— Jenkinsë¥¼ ì´ìš©í•´ì„œ dockerë¥¼ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸ í•´ë³´ì•˜ëŠ”ë° ìƒê°í•´ë³´ë‹ˆ webhookì„ ì—°ë™í•˜ë ¤ë©´ ì›¹ í˜¸ìŠ¤íŒ…ì´ í•„ìš”í–ˆë‹¤. ë¡œì»¬ì˜ VMìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥â€¦ ê²°êµ­ AWS-EC2ë¡œ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì•˜ë‹¤.</p>\n</blockquote>\n<h1 id=\"aws---ec2-ìƒì„±\" style=\"position:relative;\"><a href=\"#aws---ec2-%EC%83%9D%EC%84%B1\" aria-label=\"aws   ec2 ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS - EC2 ìƒì„±</h1>\n<p>ì´ë•Œë™ì•ˆ ìš°ë¶„íˆ¬ <code class=\"language-text\">AMI</code>ë§Œ ì‚¬ìš©í–ˆê¸°ì— ë¹ ë¥¸ ì‹œì‘ íƒ­ì—ì„œ ì´ë¯¸ì§€ë¥¼ êµ¬í•  ìˆ˜ ìˆì—ˆëŠ”ë° <code class=\"language-text\">centos</code> ì´ë¯¸ì§€ëŠ” AWS-Marketplaceì—ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.</p>\n<img width=\"606\" alt=\"1\" src=\"https://user-images.githubusercontent.com/66216102/107617093-9c67b780-6c92-11eb-97fc-0a22986eadce.PNG\">\n<p>ì´í›„ ì  í‚¤ìŠ¤ì˜ ê¸°ë³¸ í¬íŠ¸ëŠ” <code class=\"language-text\">8080</code> í¬íŠ¸ì´ê¸° ë•Œë¬¸ì— ë³´ì•ˆ ê·¸ë£¹.ì¸ë°”ìš´ë“œì—ì„œ <code class=\"language-text\">8080</code> í¬íŠ¸ë¥¼ ê°œë°©í•´ ì£¼ì—ˆë‹¤.</p>\n<p><strong>Jenkinsì™€ github webhookë¥¼ ìœ„í•œ ê²ƒ</strong>ì´ê¸° ë•Œë¬¸ì— ìì„¸í•œ EC2 ìƒì„±ì€ ìƒëµ</p>\n<h1 id=\"ec2-putty-ì ‘ì†-í›„-jenkins-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#ec2-putty-%EC%A0%91%EC%86%8D-%ED%9B%84-jenkins-%EC%84%A4%EC%B9%98\" aria-label=\"ec2 putty ì ‘ì† í›„ jenkins ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2 Putty ì ‘ì† í›„ Jenkins ì„¤ì¹˜</h1>\n<ol>\n<li>yum íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ìµœì‹ ìœ¼ë¡œ ì—…ë°ì´íŠ¸</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum -y update</code></pre></div>\n<ol start=\"2\">\n<li>\n<p>JenkinsëŠ” ìë°” ê¸°ë°˜ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ì´ê¸° ë•Œë¬¸ì— ìë°”ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼í•œë‹¤. ìë°”ì„¤ì¹˜</p>\n<ul>\n<li>JAVA 8 ë²„ì „ ì´ìƒë¶€í„° ê°€ëŠ¥</li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> java-1.8.0</code></pre></div>\n<ol start=\"3\">\n<li>ì™¸ë¶€ë¡œ ë¶€í„° íŒŒì¼ì„ ë‹¤ìš´ë°›ê¸° ìœ„í•œ wget íŒ¨í‚¤ì§€ ì„¤ì¹˜</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> -y <span class=\"token function\">wget</span></code></pre></div>\n<ol start=\"4\">\n<li>yumì´ ì–´ë””ì„œ Jenkinsë¥¼ ì„¤ì¹˜í•´ì•¼í•  ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ jenkins - repo ì¶”ê°€</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">wget</span> -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</code></pre></div>\n<ol start=\"5\">\n<li>Jenkins ë¥¼ ì„¤ì¹˜í•  ë•Œ, íŒŒì¼ë“¤ì´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” source ë¡œ ë¶€í„° ì œê³µë¨ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ ë¡œì»¬ GPG í‚¤ë§ì— Jenkins GPG key ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rpm</span> --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</code></pre></div>\n<ol start=\"6\">\n<li>Jenkins ì„¤ì¹˜</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> jenkins</code></pre></div>\n<ol start=\"7\">\n<li>Jenkins ì„œë²„ í™•ì¸ ë° ì‹œì‘</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> systemctl status jenkins\n$ <span class=\"token function\">sudo</span> systemctl start jenkins</code></pre></div>\n<ol start=\"8\">\n<li><code class=\"language-text\">8080</code> í¬íŠ¸ LISTENING ì¤‘ì¸ì§€ í™•ì¸</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">netstat</span> -na <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token number\">8080</span></code></pre></div>\n<h1 id=\"jenkins-ë¡œê·¸ì¸\" style=\"position:relative;\"><a href=\"#jenkins-%EB%A1%9C%EA%B7%B8%EC%9D%B8\" aria-label=\"jenkins ë¡œê·¸ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins ë¡œê·¸ì¸</h1>\n<ol>\n<li>ì´ˆê¸° ì ‘ì† ë¹„ë°€ë²ˆí˜¸ í™•ì¸</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">cat</span> /var/lib/jenkins/secrets/initialAdminPasswor</code></pre></div>\n<ol start=\"2\">\n<li>ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ê¸°ë³¸ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ ë° ì‚¬ìš©ì ê³„ì • ìƒì„± í›„ ë¡œê·¸ì¸</li>\n</ol>\n<h1 id=\"githubê³¼-ì—°ë™-ë°-webhook-setting\" style=\"position:relative;\"><a href=\"#github%EA%B3%BC-%EC%97%B0%EB%8F%99-%EB%B0%8F-webhook-setting\" aria-label=\"githubê³¼ ì—°ë™ ë° webhook setting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHubê³¼ ì—°ë™ ë° Webhook Setting</h1>\n<blockquote>\n<p>Webhookì€ ì›¹ìƒì˜ Trigger ê°™ì€ ì¡´ì¬ì…ë‹ˆë‹¤. GitHubì˜ ì§€ì •í•œ ë¸Œëœì¹˜ì— ì†ŒìŠ¤ê°€ push ë˜ë©´ webhookìœ¼ë¡œ ì  í‚¨ìŠ¤ì—ê²Œ ì•Œë ¤ì£¼ì–´ ë¹Œë“œë¥¼ ìœ ë°œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<ol>\n<li>\n<p>Jenkins [ìƒˆë¡œìš´ item - Freestyle project] ìƒì„±</p>\n<ul>\n<li>ì†ŒìŠ¤ì½”ë“œë¥¼ ê°€ì ¸ì˜¨ repo ì§€ì •</li>\n<li>ìê²© ì¦ëª…ì„ í•´ì•¼í•˜ë¯€ë¡œ ê¹ƒí—™ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</li>\n</ul>\n</li>\n</ol>\n<img width=\"553\" alt=\"1-1\" src=\"https://user-images.githubusercontent.com/66216102/107614945-a5568a00-6c8e-11eb-92a6-43f34acf7685.PNG\">\n<ol start=\"2\">\n<li>[ì¤‘ìš”] ì  í‚¤ìŠ¤ê°€ ë™ì‘í•˜ë ¤ë©´ â€œì–´ë–¤ ì‹ í˜¸ë¥¼ ë°›ì•„ì•¼í•˜ëŠ”ë°â€ ìš°ë¦¬ëŠ” githubì˜ webhookì„ ì´ìš©í•˜ë¯€ë¡œ <code class=\"language-text\">GitHub hook trigger for GITScm polling</code>ë¥¼ ì²´í¬</li>\n</ol>\n<img width=\"560\" alt=\"1-2\" src=\"https://user-images.githubusercontent.com/66216102/107614948-a5ef2080-6c8e-11eb-9fc6-57e1f2bbbca8.PNG\">\n<ol start=\"3\">\n<li>\n<p>ë¹Œë“œí•  ë‚´ìš©ì„ ì •ì˜</p>\n<ul>\n<li>ë‹¨ì§€ í…ŒìŠ¤íŠ¸ìš©ì´ë¼ í™”ë©´ì— ë‚´ìš©ì´ ì¶œë ¥ë§Œ ë˜ë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.</li>\n</ul>\n</li>\n</ol>\n<img width=\"547\" alt=\"1-3\" src=\"https://user-images.githubusercontent.com/66216102/107614949-a687b700-6c8e-11eb-8879-866588502c56.PNG\">\n<ol start=\"4\">\n<li>\n<p>GitHubì˜ Webhook ì„¸íŒ…</p>\n<ul>\n<li>webhookë¥¼ ì„¤ì •í•œ repo - settings - Webhooksì°½ì— ë“¤ì–´ê°„ë‹¤.</li>\n<li><code class=\"language-text\">Add webhook</code> ë²„íŠ¼ì„ í´ë¦­</li>\n</ul>\n</li>\n</ol>\n<img width=\"610\" alt=\"2-1\" src=\"https://user-images.githubusercontent.com/66216102/107614955-a7204d80-6c8e-11eb-8061-3b7804c61bd6.PNG\">\n<blockquote>\n<p>Payload URLì— ë‚˜ì˜ ì  í‚¤ìŠ¤ ì„œë²„ ì£¼ì†Œë¥¼ ì…ë ¥ + <code class=\"language-text\">/github-webhook/</code> ë’¤ì— ì¶”ê°€ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<p><code class=\"language-text\">Active</code> ë²„íŠ¼ì„ í´ë¦­í•´ í™œì„±í™”</p>\n</blockquote>\n<ol start=\"5\">\n<li>í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ gitë¥¼ PUSH</li>\n<li>ì  í‚¤ìŠ¤ í™”ë©´ì„ ë³´ë©´ ìë™ìœ¼ë¡œ ë¹Œë“œê°€ ë˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<img width=\"628\" alt=\"3\" src=\"https://user-images.githubusercontent.com/66216102/107614958-a7b8e400-6c8e-11eb-8e74-db2a7d57b786.PNG\">\n<ol start=\"7\">\n<li>ì  í‚¤ìŠ¤ Console Output í™”ë©´ - ì •ìƒì ìœ¼ë¡œ SUCCESSê°€ ë˜ë©° ìœ„ì— <code class=\"language-text\">echo</code>ë¡œ ì ì€ ëª…ë ¹ì–´ë„ ì •ìƒ ì¶œë ¥ë˜ì—ˆë‹¤.</li>\n</ol>\n<img width=\"536\" alt=\"4\" src=\"https://user-images.githubusercontent.com/66216102/107614959-a7b8e400-6c8e-11eb-8f22-dafc0f1ab443.PNG\">\n<ol start=\"8\">\n<li>ê¹ƒí—™ í˜ì´ì§€ì—ì„œë„ ë™ì¼í•˜ê²Œ ì²´í¬ ëª¨ì–‘ìœ¼ë¡œ ë°”ë€Œë©°, ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n</ol>\n<img width=\"628\" alt=\"2\" src=\"https://user-images.githubusercontent.com/66216102/107614950-a687b700-6c8e-11eb-88f0-96f955e93512.PNG\">\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://yaboong.github.io/jenkins/2018/05/14/github-webhook-jenkins/\">https://yaboong.github.io/jenkins/2018/05/14/github-webhook-jenkins/</a></p>\n<br />\n<a href='#'><small class='up-button'>ìœ„ë¡œ ì˜¬ë¼ê°€ê¸°ğŸ’¨</small></a>\n<br />","frontmatter":{"title":"automation-server(AWS-EC2) ìƒì„± ë° GitHub Webhook ì—°ë™","date":"February 11, 2021","category":"ğŸ‘¨â€ğŸ³ jenkins"}}},"pageContext":{"slug":"/jenkins/automation-server(AWS-EC2) ìƒì„± ë° GitHub Webhook ì—°ë™/","previous":{"fields":{"slug":"/infra/CICDê°€ ë­˜ê¹Œ/"},"frontmatter":{"title":"CI/CDê°€ ë­˜ê¹Œ?","category":"ğŸ§± infra","draft":false}},"next":{"fields":{"slug":"/algorithm/[íŒŒì´ì¬ì•Œê³ ë¦¬ì¦˜ì¸í„°ë·°]6-1.ë¬¸ìì—´ ì¡°ì‘(String-Manipulation)/"},"frontmatter":{"title":"[íŒŒì´ì¬ì•Œê³ ë¦¬ì¦˜ì¸í„°ë·°]#6-1 ë¬¸ìì—´ ì¡°ì‘(String Manipulation)","category":"ğŸ”¥ algorithm","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}