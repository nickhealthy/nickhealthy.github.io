---
title: '[AWS] 배치 그룹 & 메타데이터'
date: 2021-06-08 15:41:13
category: '☁️ cloud'
draft: false
---

## 배치 그룹이란?

- 새로운 인스턴스가 시작되면 AWS에서는 하드웨어에 최대한 분산하여 배치합니다.
  - Why? 물리 호스트의 장애에 대해 상호 간 영향도를 최소화하고 장애를 줄이는 데 도움이 되기 때문
- 하지만 **워크로드에 따라 인스턴스의 배치 위치를 조정하는 것이 유리**한 경우가 있습니다.
  - 필요에 따라 배치 그룹은 **그룹 내 인스턴스의 배치를 조정하는 기능**

### 배치 그룹 종류

#### 클러스터 배치 그룹

- 인스턴스의 <u>**하드웨어 배치를 서로 근접하게 위치**</u>시키는 방법
  - 일반적으로 **고성능**을 요구하는 컴퓨팅 환경에서 수많은 애플리케이션이 **서로 긴밀한 통신을 요구하여 낮은 지연 시간과 높은 네트워크 성능을 보장**하는 방법
- 하나의 가용 영역에 종속되는 제약이 있음
- 그룹 내 인스턴스는 동일한 인스턴스 유형 사용을 권고

#### 파티션 배치 그룹

- 인스턴스를 **<u>논리적인 세그먼트로 분산</u>**하며, 하나의 파티션에 존재하는 인스턴스는 다른 파티션의 인스턴스와 하드웨어를 공유하지 않아 **상호 영향을 미치지 않는 방법**
- 가용 영역 당 파티션을 최대 7개 까지 가질 수 있음

#### 분산형 배치 그룹

- 서로 다른 하드웨어로 분산 및 배치하여 **<u>인스턴스 간의 상호 장애 영향도를 최소화하는 방법</u>**
  - 보통 중요한 애플리케이션의 **고가용성을 보장 받기 위해 사용**
  - **각각 고유한 랙에 배치된 인스턴스 그룹이며, 랙마다 자체 네트워크 및 전원이 존재**
- 가용 영역당 7개의 인스턴스로 제한

## 메타데이터

- 메타데이터는 **<u>객체에 대한 키와 값에 대한 집합 데이터</u>**입니다.
  - 키에 대한 값을 가지고 있어 **필요한 정보를 호출하여 정보를 파악할 수 있음**

### EC2 인스턴스 메타데이터 확인

- 인스턴스 생성
- **<u>169.254.169.254</u>**라는 링크-로컬 주소를 가지고 HTTP 요청과 응답으로 확인 가능
  - `curl 169.254.169.254/latest/meta-data/` 명령어를 통해 목록을 확인 가능하며, `meta-data/`뒤에 필요한 메타데이터를 입력할 시 데이터를 확인할 수 있다.

![1  메타데이터 목록확인](https://user-images.githubusercontent.com/66216102/121136050-28b86e80-c870-11eb-8cec-36e5cc63a4bb.JPG)

- 메타데이터를 통해 **인스턴스의 설정 자동화 작업**에 활용하거나 **다수의 인스턴스를 일괄 관리**하는 형태로 활용이 가능
- 단, 인스턴스에 직접 액세스할 수 있는 모든 사람은 메타데이터를 볼 수 있음
  - 따라서 민감한 데이터를 사용자 데이터로 저장해서는 안됨
