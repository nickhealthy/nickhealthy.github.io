## HTTP, HTTPS란?

* HTTP는 암호화되지 않은 방법으로 데이터를 전송하기 때문에 서버와 클라이언트가 주고 받는 보안에 취약합니다. 예를 들어 로그인을 위해서 서버로 비밀번호를 전송하거나, 또는 중요한 기밀 문서를 열람하는 과정에서 악의적인 감청이나 데이터의 변조 등이 일어날 수 있습니다. 이를 보완한 것이 HTTPS 입니다.
* 마지막 S는 Over Secure Socket Layer의 약자로 보안이 강화된 HTTP라는 것을 짐작할 수 있다.

## SSL/TLS 구조

* SSL/TLS 프로토콜 위에서 돌아가는 HTTP 프로토콜이 HTTPS 프로토콜입니다.

> 알고가기!
>
> SSL과 TLS는 같은 말입니다. 네스케이프에 의해 SSL이 발명되었고, 국제 표준화 기구인 IETF의 관리로 변경되면서 TLS라는 이름으로 바뀌었지만, SSL이라는 이름이 훨씬 많이 사용되고 있습니다.

![1  프로토콜 계층 구성](https://user-images.githubusercontent.com/66216102/141752174-4f4c187d-cc3b-4221-97b6-bbd009957359.JPG)

## SSL 디지털 인증서

* <u>SSL 인증서는 클라이언트와 서버간의 통신을 제3자가 보증해주는 전자화 된 문서입니다.</u>
* 클라이언트가 이 인증서 정보가 신뢰할 수 있는 것인지를 검증 한 후에, 다음 절차를 수행하게 됩니다.

## SSL의 주요 기능

* 암호화(Encryption) - 통신 내용이 공격자에게 노출되는 것을 막을 수 있음
* 인증(Authentication) - 클라이언트가 접속하려는 서버가 신뢰할 수 있는 서버인지를 판단할 수 있음
* 변경 감지 등 - 통신 내용의 악의적인 변경을 방지할 수 있음

## SSL에서 사용하는 암호화의 종류

### 대칭키

* 암호를 만드는 행위인 <u>**암호화**</u>를 할 때 사용하는 일종의 비밀번호를 키(key)라고 합니다.
* 이 키에 따라 암호화 된 결과가 달라지기 때문에 키를 모르면 <u>암호를 푸는 행위인 **복호화**</u>를 할 수 없습니다.
* **<u>대칭키는 동일한 키로 암호화와 복호화를 같이 할 수 있는 방식</u>**의 암호화 기법을 의미합니다.

#### LAB 1 - openssl 명령어의 des3 암호화 기법으로 암호화 된 모습

* 복호화를 진행할 때, 암호화 했던 암호(키)를 똑같이 알고 있어야 하기 때문에, <u>**복호화 하는 과정에서 보안에 취약함**</u>

![2  openssl 명령어 사용](https://user-images.githubusercontent.com/66216102/141752180-68e054ef-7b4c-4fe2-9430-0604a28ed700.JPG)

### 공개키

* <u>대칭키의 단점을 극복하기 위해 나온 것이 공개키입니다.</u>
* 공개키 방식은 <u>두개의 키</u>를 갖게 되는데, A키로 암호화를 하면 B키로 복호화 할 수 있고, B키로 암호화하면 A키로 복호화 할 수 있는 방식입니다.

#### 공개키의 암복호화 방식

* 두개의 키 중 하나를 비공개키(private key, 개인키, 비밀키라고도 불림)로 하고, 나머지를 공개키(public key)로 지정
* 비공개키는 자신만이 가지고 있고, 공개키를 타인에게 제공합니다.
* 공개키를 제공 받은 타인은 공개키를 이용해서 정보를 암호화합니다.
* 암호화한 정보를 복호화 합니다.
* 이 과정에서 공개키가 유출되더라도, 비공개키를 가지고 있는 사람만 복호화를 할 수 있기에 안전합니다.

#### LAB 2 - openssl 명령어의 RSA 방식으로 공개키 사용(암복호화)

* 아래 명령어는 RSA 암호화 방식으로 private.pem 파일을 생성
  * 1024는 1024bit를 의미하며 이 숫자가 높을수록 안전하지만, 그만큼 복호화하는데 컴퓨팅 파워가 더 필요함

![3  비공개키 생성 알에스에이 방식](https://user-images.githubusercontent.com/66216102/141752183-4e3c90b7-c79a-4fec-84a3-5b1a5308b7de.JPG)

* 비공개키를 이용하여 공개키  생성
  * <u>해당 공개키를 이용하여 암호화를 진행함</u>

![3  공개키 생성 알에스에이 방식](https://user-images.githubusercontent.com/66216102/141752182-eb2ba25a-5242-4cb6-aaa5-41644015f64e.JPG)

* 암복호화 진행한 모습
  * 암호화는 공개키로 진행
  * 복호화는 비공개키로 진행
* 정상적으로 복호화가 되었습니다.

![4  암복호화 진행](https://user-images.githubusercontent.com/66216102/141752185-6aa4023a-9882-42de-bf6a-65997dc14853.JPG)

## SSL 인증서

* 인증서의 기능은 크게 두 가지이며, 아래 두 가지를 이해하는 것이 인증서를 이해하는 핵심입니다.
  1. 클라이언트가 접속한 서버가 신뢰 할 수 있는 서버임을 보장한다.
  2. SSL 통신에 사용할 공개키를 클라이언트에게 제공한다.

### CA(Certificate authority or Root Certificate)

* **<u>인증서의 역할은 클라이언트가 접속한 서버가 클라이언트가 의도한 서버가 맞는지 보장하는 역할을 합니다.</u>**
* 이 역할을 하는 민간기업들이 있는데 이런 기업들을 CA라고 부르며, 아무나 참여할 수는 없고 엄격하게 공인된 기업들만이 참여가 가능합니다.
* SSL을 통해서 암호화 된 통신을 제공하려는 서비스는 <u>CA를 통해서 인증서를 구입</u>해야 합니다. CA는 서비스의 신뢰성을 다양한 방법으로 평가하게 됩니다.

### SSL 인증서의 내용

* SSL 인증서에는 다음과 같은 정보가 포함되어 있습니다.
  1. 서비스의 정보(인증서를 발급한 CA, 서비스의 도메인 등등)
  2. 서버 측 공개키(공개키의 내용, 공개키의 암호화 방법)
* 서비스의 도메인, 공개키와 같은 정보는 서비스가 CA로부터 인증서를 구입할 때 제출해야 합니다.
* 위와 같은 내용은 <u>CA에 의해 암호화 되며, 이때 사용하는 기법이 공개키 방식</u>입니다. **CA는 자신의 CA 비공개키를 이용해서 서버가 제출한 인증서를 암호화**하는 것입니다.





## Reference

[생활코딩](https://opentutorials.org/course/228/4894)

