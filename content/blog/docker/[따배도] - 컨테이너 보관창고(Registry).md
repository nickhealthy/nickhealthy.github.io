---
title: '[ë”°ë°°ë„] - ì»¨í…Œì´ë„ˆ ë³´ê´€ì°½ê³ (Registry)'
date: 2021-07-20 21:04:30
category: 'ğŸ³ docker'
thumbnail: { thumbnailSrc }
tags: [docker, linux]
draft: false
---

- ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” Public ê³µê°„ê³¼(ë„ì»¤ í—ˆë¸Œ) Privateì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.

## Docker Registry

### Registry

- ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œ

- Publicì€ Docker Hub, <u>**PrivateëŠ” Registry ë„ì»¤ ê³µì‹ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.**</u>
  - ì•„ë˜ëŠ” ë„ì»¤ í—ˆë¸Œì˜ ì´ë¯¸ì§€ ì €ì¥ì†Œì…ë‹ˆë‹¤.

> Private ê³µê°„ì„ ë„ì»¤ í—ˆë¸Œ ìì²´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ ìœ ë£Œí™”ë¼ ë¹„ìš©ì„ ì§€ë¶ˆí•´ì•¼ í•©ë‹ˆë‹¤.

![1  ë„ì»¤í—ˆë¸Œ ì´ë¯¸ì§€ì €ì¥ì†Œ](https://user-images.githubusercontent.com/66216102/126321344-c223fd65-58e6-4fcb-a058-8e9fb992d940.JPG)

## Private Registry êµ¬ì¶•

- ë„ì»¤ í—ˆë¸Œ ê³µì‹ ì´ë¯¸ì§€ì—ì„œ ê´€ë¦¬í•˜ëŠ” `registry` ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ Private ì´ë¯¸ì§€ ì €ì¥ì†Œë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![1-1 í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€](https://user-images.githubusercontent.com/66216102/126321350-eb8b7d35-0e10-4ec1-88bb-b82846b8e588.JPG)

- ì‹¤í–‰ë°©ë²•ì€ í•˜ë‹¨ ì°¸ê³ 

```bash
$ docker run -d -p 5000:5000 --restart always --name registry registry:2
```

### image repository

- í¼ë¸”ë¦­ ê³µê°„ì¸ ë„ì»¤ í—ˆë¸Œì— ë°°í¬í•  ë• `docker push <í˜¸ìŠ¤íŠ¸ë„¤ì„>:<ë²„ì „>` í˜•ì‹ìœ¼ë¡œ í–ˆì§€ë§Œ,
- `<í˜¸ìŠ¤íŠ¸ë„¤ì„>:<í¬íŠ¸ë„˜ë²„>/<ì´ë¯¸ì§€ ì´ë¦„>:<ë²„ì „>` í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ ì£¼ì–´ì•¼ ë„ì»¤ Private ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆì¸ Registryì— ì´ë¯¸ì§€ê°€ ì €ì¥ë©ë‹ˆë‹¤.

## ì‹¤ìŠµ

### í¼ë¸”ë¦­ ì»¨í…Œì´ë„ˆ ì €ì¥ì†Œ

- `docker search ì´ë¯¸ì§€` ëª…ë ¹ì–´ë¡œ ì´ë¯¸ì§€ ì°¾ì•„ë³´ê¸°
  - NAME ë˜ëŠ” DESCRIPTION ì— í‘œì‹œëœ ì´ë¯¸ì§€ë“¤ì´ í‘œì‹œë¨

```bash
$ docker pull httpd:latest
```

- ë„ì»¤ í—ˆë¸Œì— ë¡œê·¸ì¸í•˜ê³  ë‚´ ë ˆí¬ì§€í† ë¦¬ì— ì˜¬ë¦¬ê¸°

```bash
$ docker login # ë„ì»¤ í—ˆë¸Œì— ë¡œê·¸ì¸í•˜ê¸°
$ docker pull httpd:latest
```

- ë„ì»¤ í—ˆë¸Œì— pushí•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ tag ì„¤ì •

![2  ë„ì»¤í¼ë¸”ë¦­ ì‹¤ìŠµ](https://user-images.githubusercontent.com/66216102/126321351-792ea5e5-587d-4e78-9f11-29f55263f131.JPG)

- ë„ì»¤ í—ˆë¸Œì— push
  - í•´ë‹¹ ëª…ë ¹ì–´ê°€ ì™„ë£Œë˜ë©´ **ë‚˜ì˜ ë ˆí¬ì§€í† ë¦¬**ì— ì •ìƒì ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ ì˜¬ë¼ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
$ docker push alskadmlcraz/httpd:latest
```

### í”„ë¼ì´ë¹— ì»¨í…Œì´ë„ˆ ì €ì¥ì†Œ

- ë„ì»¤ ê³µì‹ ì´ë¯¸ì§€ì¸ `registry` ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì‹¤í–‰

```bash
$ docker run -d -p 5000:5000 --restart always --name registry registry:2
```

- ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒê³¼ ê°™ì´ í˜•ì‹ì„ ë§ì¶° Tag ì €ì¥
  - `<í˜¸ìŠ¤íŠ¸ë„¤ì„>:<í¬íŠ¸ë„˜ë²„>/<ì´ë¯¸ì§€ ì´ë¦„>:<ë²„ì „>`

```bash
$ docker tag httpd:latest localhost:5000/httpd:latest
```

- í”„ë¼ì´ë¹— ì»¨í…Œì´ë„ˆ ì €ì¥ì†Œì— ì´ë¯¸ì§€ê°€ ì˜ ìˆëŠ”ì§€ í™•ì¸
  - ì•„ë˜ ê²½ë¡œì—ì„œ `ls` ëª…ë ¹ì–´ë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥

```bash
$ /var/lib/docker/volumes/ì»¨í…Œì´ë„ˆID/_data/docker/registry/v2/repositories
```

## Reference

[https://hub.docker.com/](https://hub.docker.com/)
